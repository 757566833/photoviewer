{"version":3,"file":"photoviewer.js","sources":["../src/js/domq/d-class.js","../src/js/domq/vars.js","../src/js/domq/utils.js","../src/js/domq/core.js","../src/js/domq/css.js","../src/js/domq/classes.js","../src/js/domq/offset.js","../src/js/domq/attr.js","../src/js/domq/prop.js","../src/js/domq/val.js","../src/js/domq/wrap.js","../src/js/domq/traversing.js","../src/js/domq/dimensions.js","../src/js/domq/manipulation.js","../src/js/domq/event.js","../src/js/domq/animate.js","../src/js/domq/effects.js","../src/js/domq/index.js","../src/js/defaults.js","../src/js/utilities.js","../src/js/constants.js","../src/js/draggable.js","../src/js/movable.js","../src/js/resizable.js","../src/js/core.js"],"sourcesContent":["// Class D\r\nvar D = function (selector, context) {\r\n    return new D.fn.init(selector, context);\r\n}\r\n\r\nexport default D;","var emptyArray = [],\r\n  concat = emptyArray.concat,\r\n  filter = emptyArray.filter,\r\n  slice = emptyArray.slice,\r\n  document = window.document,\r\n  elementDisplay = {},\r\n  classCache = {},\r\n  cssNumber = {\r\n    'column-count': 1,\r\n    'columns': 1,\r\n    'font-weight': 1,\r\n    'line-height': 1,\r\n    'opacity': 1,\r\n    'z-index': 1,\r\n    'zoom': 1\r\n  },\r\n  fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\r\n  singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\r\n  tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\r\n  rootNodeRE = /^(?:body|html)$/i,\r\n  capitalRE = /([A-Z])/g,\r\n\r\n  // special attributes that should be get/set via method calls\r\n  methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\r\n\r\n  adjacencyOperators = ['after', 'prepend', 'before', 'append'],\r\n  dimensions= ['width', 'height'],\r\n\r\n  table = document.createElement('table'),\r\n  tableRow = document.createElement('tr'),\r\n  containers = {\r\n    'tr': document.createElement('tbody'),\r\n    'tbody': table,\r\n    'thead': table,\r\n    'tfoot': table,\r\n    'td': tableRow,\r\n    'th': tableRow,\r\n    '*': document.createElement('div')\r\n  },\r\n  simpleSelectorRE = /^[\\w-]*$/,\r\n  class2type = {},\r\n  toString = class2type.toString,\r\n  tempParent = document.createElement('div'),\r\n  propMap = {\r\n    'tabindex': 'tabIndex',\r\n    'readonly': 'readOnly',\r\n    'for': 'htmlFor',\r\n    'class': 'className',\r\n    'maxlength': 'maxLength',\r\n    'cellspacing': 'cellSpacing',\r\n    'cellpadding': 'cellPadding',\r\n    'rowspan': 'rowSpan',\r\n    'colspan': 'colSpan',\r\n    'usemap': 'useMap',\r\n    'frameborder': 'frameBorder',\r\n    'contenteditable': 'contentEditable'\r\n  },\r\n  isArray = Array.isArray || function (arg) {\r\n    return Object.prototype.toString.call(arg) === '[object Array]';\r\n  };\r\n\r\nexport {\r\n  emptyArray,\r\n  concat,\r\n  filter,\r\n  slice,\r\n  document,\r\n  elementDisplay,\r\n  classCache,\r\n  cssNumber,\r\n  fragmentRE,\r\n  singleTagRE,\r\n  tagExpanderRE,\r\n  rootNodeRE,\r\n  capitalRE,\r\n  methodAttributes,\r\n  adjacencyOperators,\r\n  dimensions,\r\n  containers,\r\n  simpleSelectorRE,\r\n  class2type,\r\n  toString,\r\n  tempParent,\r\n  propMap,\r\n  isArray\r\n}\r\n\r\n\r\n","import D from './d-class';\r\nimport {\r\n  filter,\r\n  slice,\r\n  document,\r\n  elementDisplay,\r\n  classCache,\r\n  cssNumber,\r\n  class2type,\r\n  toString\r\n} from './vars';\r\n\r\nfunction type(obj) {\r\n  return obj == null\r\n    ? String(obj)\r\n    : class2type[toString.call(obj)] || \"object\"\r\n}\r\n\r\nfunction isFunction(value) {\r\n  return type(value) == \"function\"\r\n}\r\n\r\nfunction isWindow(obj) {\r\n  return obj != null && obj == obj.window\r\n}\r\n\r\nfunction isDocument(obj) {\r\n  return obj != null && obj.nodeType == obj.DOCUMENT_NODE\r\n}\r\n\r\nfunction isObject(obj) {\r\n  return type(obj) == \"object\"\r\n}\r\n\r\nfunction isPlainObject(obj) {\r\n  return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype\r\n}\r\n\r\nfunction likeArray(obj) {\r\n  var length = !!obj && 'length' in obj && obj.length,\r\n    typeRes = type(obj);\r\n\r\n  return 'function' != typeRes && !isWindow(obj) && (\r\n    'array' == typeRes || length === 0 ||\r\n    (typeof length == 'number' && length > 0 && (length - 1) in obj)\r\n  )\r\n}\r\n\r\nfunction compact(array) {\r\n  return filter.call(array, function (item) {\r\n    return item != null\r\n  })\r\n}\r\n\r\nfunction flatten(array) {\r\n  return array.length > 0 ? D.fn.concat.apply([], array) : array\r\n}\r\n\r\nfunction dasherize(str) {\r\n  return str.replace(/::/g, '/')\r\n    .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\r\n    .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\r\n    .replace(/_/g, '-')\r\n    .toLowerCase()\r\n}\r\n\r\nfunction maybeAddPx(name, value) {\r\n  return (typeof value == \"number\" && !cssNumber[dasherize(name)]) ? value + \"px\" : value\r\n}\r\n\r\nfunction uniq(array) {\r\n  return filter.call(array, function (item, idx) {\r\n    return array.indexOf(item) == idx\r\n  })\r\n}\r\n\r\nfunction camelize(str) {\r\n  return str.replace(/-+(.)?/g, function (match, chr) {\r\n    return chr ? chr.toUpperCase() : ''\r\n  })\r\n}\r\n\r\nfunction classRE(name) {\r\n  return name in classCache ?\r\n    classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)'))\r\n}\r\n\r\nfunction defaultDisplay(nodeName) {\r\n  var element, display\r\n  if (!elementDisplay[nodeName]) {\r\n    element = document.createElement(nodeName)\r\n    document.body.appendChild(element)\r\n    display = getComputedStyle(element, '').getPropertyValue(\"display\")\r\n    element.parentNode.removeChild(element)\r\n    display == \"none\" && (display = \"block\")\r\n    elementDisplay[nodeName] = display\r\n  }\r\n  return elementDisplay[nodeName]\r\n}\r\n\r\nfunction children(element) {\r\n  return 'children' in element ?\r\n    slice.call(element.children) :\r\n    D.map(element.childNodes, function (node) {\r\n      if (node.nodeType == 1) return node\r\n    })\r\n}\r\n\r\n// \"true\"  => true\r\n// \"false\" => false\r\n// \"null\"  => null\r\n// \"42\"    => 42\r\n// \"42.5\"  => 42.5\r\n// \"08\"    => \"08\"\r\n// JSON    => parse if valid\r\n// String  => self\r\nfunction deserializeValue(value) {\r\n  try {\r\n    return value ?\r\n      value == \"true\" ||\r\n      (value == \"false\" ? false :\r\n        value == \"null\" ? null :\r\n          +value + \"\" == value ? +value :\r\n            /^[\\[\\{]/.test(value) ? JSON.parse(value) :\r\n              value) :\r\n      value\r\n  } catch (e) {\r\n    return value\r\n  }\r\n}\r\nfunction filtered(nodes, selector) {\r\n  return selector == null ? D(nodes) : D(nodes).filter(selector)\r\n}\r\n\r\nfunction funcArg(context, arg, idx, payload) {\r\n  return isFunction(arg) ? arg.call(context, idx, payload) : arg\r\n}\r\n\r\nfunction setAttribute(node, name, value) {\r\n  value == null ? node.removeAttribute(name) : node.setAttribute(name, value)\r\n}\r\n\r\n// access className property while respecting SVGAnimatedString\r\nfunction className(node, value) {\r\n  var klass = node.className || '',\r\n    svg = klass && klass.baseVal !== undefined\r\n\r\n  if (value === undefined) return svg ? klass.baseVal : klass\r\n  svg ? (klass.baseVal = value) : (node.className = value)\r\n}\r\n\r\nexport {\r\n  type,\r\n  isFunction,\r\n  isWindow,\r\n  isDocument,\r\n  isObject,\r\n  isPlainObject,\r\n  likeArray,\r\n  compact,\r\n  flatten,\r\n  dasherize,\r\n  maybeAddPx,\r\n  uniq,\r\n  camelize,\r\n  classRE,\r\n  defaultDisplay,\r\n  deserializeValue,\r\n  children,\r\n  filtered,\r\n  funcArg,\r\n  setAttribute,\r\n  className\r\n}\r\n\r\n\r\n","import D from './d-class';\r\nimport {\r\n    emptyArray,\r\n    concat,\r\n    filter,\r\n    slice,\r\n    document,\r\n    fragmentRE,\r\n    singleTagRE,\r\n    tagExpanderRE,\r\n    rootNodeRE,\r\n    capitalRE,\r\n    methodAttributes,\r\n    adjacencyOperators,\r\n    containers,\r\n    simpleSelectorRE,\r\n    class2type,\r\n    tempParent,\r\n    propMap,\r\n    isArray\r\n} from './vars';\r\nimport {\r\n    type,\r\n    isFunction,\r\n    isWindow,\r\n    isDocument,\r\n    isObject,\r\n    isPlainObject,\r\n    likeArray,\r\n    compact,\r\n    flatten,\r\n    dasherize,\r\n    maybeAddPx,\r\n    uniq,\r\n    camelize,\r\n    classRE,\r\n    defaultDisplay,\r\n    deserializeValue,\r\n    children,\r\n    filtered,\r\n    funcArg,\r\n    setAttribute,\r\n    className\r\n} from './utils';\r\n\r\nD.fn = D.prototype = {\r\n    constuctor: D,\r\n    length: 0,\r\n    // Because a collection acts like an array\r\n    // copy over these useful array functions.\r\n    forEach: emptyArray.forEach,\r\n    reduce: emptyArray.reduce,\r\n    push: emptyArray.push,\r\n    sort: emptyArray.sort,\r\n    splice: emptyArray.splice,\r\n    indexOf: emptyArray.indexOf,\r\n    // D's counterpart to jQuery's `$.fn.init` and\r\n    // takes a CSS selector and an optional context (and handles various\r\n    // special cases).\r\n    init: function (selector, context) {\r\n        var dom;\r\n        // If nothing given, return an empty D collection\r\n        if (!selector) {\r\n            return this\r\n        }\r\n        // Optimize for string selectors\r\n        else if (typeof selector == 'string') {\r\n            selector = selector.trim()\r\n            // If it's a html fragment, create nodes from it\r\n            // Note: In both Chrome 21 and Firefox 15, DOM error 12\r\n            // is thrown if the fragment doesn't begin with <\r\n            if (selector[0] == '<' && fragmentRE.test(selector)) {\r\n                dom = D.fragment(selector, RegExp.$1, context);\r\n                selector = null;\r\n            }\r\n            // If there's a context, create a collection on that context first, and select\r\n            // nodes from there\r\n            else if (context !== undefined) {\r\n                return D(context).find(selector)\r\n            }\r\n            // If it's a CSS selector, use it to select nodes.\r\n            else {\r\n                dom = D.qsa(document, selector)\r\n            }\r\n        }\r\n        // If a function is given, call it when the DOM is ready\r\n        else if (isFunction(selector)) {\r\n            return D(document).ready(selector)\r\n        }\r\n        // If a D collection is given, just return it\r\n        else if (D.isD(selector)) {\r\n            return selector\r\n        }\r\n        // normalize array if an array of nodes is given\r\n        else if (isArray(selector)) {\r\n            dom = compact(selector)\r\n        }\r\n        // Wrap DOM nodes.\r\n        else if (isObject(selector)) {\r\n            dom = [selector], selector = null\r\n        }\r\n        // If there's a context, create a collection on that context first, and select\r\n        // nodes from there\r\n        else if (context !== undefined) {\r\n            return D(context).find(selector)\r\n        }\r\n        // And last but no least, if it's a CSS selector, use it to select nodes.\r\n        else {\r\n            dom = D.qsa(document, selector)\r\n        }\r\n        // create a new D collection from the nodes found\r\n        return D.makeArray(dom, selector, this);\r\n    }\r\n}\r\n\r\nD.extend = D.fn.extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone,\r\n        target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false;\r\n\r\n    // Handle a deep copy situation\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n\r\n        // Skip the boolean and the target\r\n        target = arguments[i] || {};\r\n        i++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (typeof target !== \"object\" && !isFunction(target)) {\r\n        target = {};\r\n    }\r\n    // Extend D itself if only one argument is passed\r\n    if (i === length) {\r\n        target = this;\r\n        i--;\r\n    }\r\n    for (; i < length; i++) {\r\n        // Only deal with non-null/undefined values\r\n        if ((options = arguments[i]) != null) {\r\n            // Extend the base object\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                // Prevent never-ending loop\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                // Recurse if we're merging plain objects or arrays\r\n                if (deep && copy && (D.isPlainObject(copy) ||\r\n                    (copyIsArray = Array.isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && Array.isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && D.isPlainObject(src) ? src : {};\r\n                    }\r\n                    // Never move original objects, clone them\r\n                    target[name] = D.extend(deep, clone, copy);\r\n                    // Don't bring in undefined values\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Return the modified object\r\n    return target;\r\n}\r\n\r\nD.extend({\r\n    type: type,\r\n    isFunction: isFunction,\r\n    isWindow: isWindow,\r\n    isPlainObject: isPlainObject,\r\n    camelCase: camelize,\r\n    isArray: isArray,\r\n    isEmptyObject: function (obj) {\r\n        var name\r\n        for (name in obj) return false\r\n        return true\r\n    },\r\n    isNumeric: function (val) {\r\n        var num = Number(val),\r\n            type = typeof val\r\n        return val != null && type != 'boolean' &&\r\n            (type != 'string' || val.length) &&\r\n            !isNaN(num) && isFinite(num) || false\r\n    },\r\n    inArray: function (elem, array, i) {\r\n        return emptyArray.indexOf.call(array, elem, i)\r\n    },\r\n    trim: function (str) {\r\n        return str == null ? \"\" : String.prototype.trim.call(str)\r\n    },\r\n    noop: function () { },\r\n    map: function (elements, callback) {\r\n        var value, values = [],\r\n            i, key\r\n        if (likeArray(elements))\r\n            for (i = 0; i < elements.length; i++) {\r\n                value = callback(elements[i], i)\r\n                if (value != null) values.push(value)\r\n            }\r\n        else\r\n            for (key in elements) {\r\n                value = callback(elements[key], key)\r\n                if (value != null) values.push(value)\r\n            }\r\n        return flatten(values)\r\n    },\r\n    each: function (elements, callback) {\r\n        var i, key\r\n        if (likeArray(elements)) {\r\n            for (i = 0; i < elements.length; i++)\r\n                if (callback.call(elements[i], i, elements[i]) === false) return elements\r\n        } else {\r\n            for (key in elements)\r\n                if (callback.call(elements[key], key, elements[key]) === false) return elements\r\n        }\r\n\r\n        return elements\r\n    },\r\n    grep: function (elements, callback) {\r\n        return filter.call(elements, callback)\r\n    },\r\n    contains: function () {\r\n        return (document.documentElement.contains\r\n            ? function (parent, node) {\r\n                return parent !== node && parent.contains(node)\r\n            }\r\n            : function (parent, node) {\r\n                while (node && (node = node.parentNode))\r\n                    if (node === parent) return true\r\n                return false\r\n            });\r\n    },\r\n    // Make DOM Array\r\n    makeArray: function (dom, selector, me) {\r\n        var i, len = dom ? dom.length : 0\r\n        for (i = 0; i < len; i++) me[i] = dom[i]\r\n        me.length = len\r\n        me.selector = selector || ''\r\n        return me;\r\n    },\r\n    // Html -> Node\r\n    fragment: function (html, name, properties) {\r\n        var dom, nodes, container\r\n\r\n        // A special case optimization for a single tag\r\n        if (singleTagRE.test(html)) {\r\n            dom = D(document.createElement(RegExp.$1))\r\n        }\r\n\r\n        if (!dom) {\r\n\r\n            if (html.replace) {\r\n                html = html.replace(tagExpanderRE, \"<$1></$2>\")\r\n            }\r\n\r\n            if (name === undefined) {\r\n                name = fragmentRE.test(html) && RegExp.$1\r\n            }\r\n\r\n            if (!(name in containers)) {\r\n                name = '*'\r\n            }\r\n\r\n            container = containers[name]\r\n            container.innerHTML = '' + html\r\n            dom = D.each(slice.call(container.childNodes), function () {\r\n                container.removeChild(this)\r\n            })\r\n        }\r\n\r\n        if (isPlainObject(properties)) {\r\n            nodes = D(dom)\r\n            D.each(properties, function (key, value) {\r\n                if (methodAttributes.indexOf(key) > -1) nodes[key](value)\r\n                else nodes.attr(key, value)\r\n            })\r\n        }\r\n\r\n        return dom\r\n    },\r\n    // D's CSS selector\r\n    qsa: function (element, selector) {\r\n        var found,\r\n            maybeID = selector[0] == '#',\r\n            maybeClass = !maybeID && selector[0] == '.',\r\n            // Ensure that a 1 char tag name still gets checked\r\n            nameOnly = maybeID || maybeClass ? selector.slice(1) : selector,\r\n            isSimple = simpleSelectorRE.test(nameOnly)\r\n        return (\r\n            // Safari DocumentFragment doesn't have getElementById\r\n            element.getElementById && isSimple && maybeID)\r\n            ? (found = element.getElementById(nameOnly))\r\n                ? [found]\r\n                : []\r\n            : element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11\r\n                ? []\r\n                : slice.call(\r\n                    // DocumentFragment doesn't have getElementsByClassName/TagName\r\n                    isSimple && !maybeID && element.getElementsByClassName\r\n                        ? maybeClass\r\n                            // If it's simple, it could be a class\r\n                            ? element.getElementsByClassName(nameOnly)\r\n                            // Or a tag\r\n                            : element.getElementsByTagName(selector)\r\n                        // Or it's not simple, and we need to query all\r\n                        : element.querySelectorAll(selector)\r\n                )\r\n    },\r\n    isD: function (object) {\r\n        return object instanceof D\r\n    },\r\n    matches: function (element, selector) {\r\n        if (!selector || !element || element.nodeType !== 1) return false\r\n        var matchesSelector = element.matches || element.webkitMatchesSelector ||\r\n            element.mozMatchesSelector || element.oMatchesSelector ||\r\n            element.matchesSelector\r\n        if (matchesSelector) return matchesSelector.call(element, selector)\r\n        // fall back to performing a selector:\r\n        var match, parent = element.parentNode,\r\n            temp = !parent\r\n        if (temp) (parent = tempParent).appendChild(element)\r\n        match = ~D.qsa(parent, selector).indexOf(element)\r\n        temp && tempParent.removeChild(element)\r\n        return match\r\n    }\r\n});\r\n\r\n// Populate the class2type map\r\nD.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function (i, name) {\r\n    class2type[\"[object \" + name + \"]\"] = name.toLowerCase()\r\n});\r\n\r\n// Methods in Prototype\r\nD.fn.extend({\r\n    // Modify the collection by adding elements to it\r\n    concat: function () {\r\n        var i, value, args = []\r\n        for (i = 0; i < arguments.length; i++) {\r\n            value = arguments[i]\r\n            args[i] = D.isD(value) ? value.toArray() : value\r\n        }\r\n        return concat.apply(D.isD(this) ? this.toArray() : this, args)\r\n    },\r\n    // `pluck` is borrowed from Prototype.js\r\n    pluck: function (property) {\r\n        return D.map(this, function (el) { return el[property] })\r\n    },\r\n    // Filtering\r\n    eq: function (idx) {\r\n        return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1)\r\n    },\r\n    first: function () {\r\n        var el = this[0]\r\n        return el && !isObject(el) ? el : D(el)\r\n    },\r\n    last: function () {\r\n        var el = this[this.length - 1]\r\n        return el && !isObject(el) ? el : D(el)\r\n    },\r\n    slice: function () {\r\n        return D(slice.apply(this, arguments))\r\n    },\r\n    /* Miscellaneous */\r\n    toArray: function () {\r\n        return this.get()\r\n    },\r\n    each: function (callback) {\r\n        emptyArray.every.call(this, function (el, idx) {\r\n            return callback.call(el, idx, el) !== false\r\n        })\r\n        return this\r\n    },\r\n    map: function (fn) {\r\n        return D(\r\n            D.map(this, function (el, i) { return fn.call(el, i, el) })\r\n        )\r\n    },\r\n    get: function (idx) {\r\n        return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\r\n    },\r\n    size: function () {\r\n        return this.length\r\n    },\r\n    index: function (element) {\r\n        return element ? this.indexOf(D(element)[0]) : this.parent().children().indexOf(this[0])\r\n    },\r\n\r\n    /* Effects */\r\n    show: function () {\r\n        return this.each(function () {\r\n            this.style.display == \"none\" && (this.style.display = '')\r\n            if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\r\n                this.style.display = defaultDisplay(this.nodeName)\r\n        })\r\n    },\r\n    hide: function () {\r\n        return this.css(\"display\", \"none\")\r\n    },\r\n});\r\n\r\nD.fn.init.prototype = D.fn;\r\n","import D from './d-class';\r\nimport { isArray } from './vars';\r\nimport { camelize, dasherize, maybeAddPx, type } from './utils';\r\n\r\nD.fn.extend({\r\n    css: function (property, value) {\r\n        if (arguments.length < 2) {\r\n            var element = this[0]\r\n            if (typeof property == 'string') {\r\n                if (!element) return\r\n                return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property)\r\n            } else if (isArray(property)) {\r\n                if (!element) return\r\n                var props = {}\r\n                var computedStyle = getComputedStyle(element, '');\r\n                D.each(property, function (_, prop) {\r\n                    props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))\r\n                });\r\n                return props\r\n            }\r\n        }\r\n\r\n        var css = ''\r\n        if (type(property) == 'string') {\r\n            if (!value && value !== 0) {\r\n                this.each(function () {\r\n                    this.style.removeProperty(dasherize(property));\r\n                });\r\n            } else {\r\n                css = dasherize(property) + \":\" + maybeAddPx(property, value)\r\n            }\r\n        } else {\r\n            for (var key in property) {\r\n                if (!property[key] && property[key] !== 0) {\r\n                    this.each(function () { this.style.removeProperty(dasherize(key)) })\r\n                } else {\r\n                    css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.each(function () { this.style.cssText += ';' + css })\r\n    }\r\n});","import D from './d-class';\r\nimport { emptyArray } from './vars';\r\nimport { className, classRE, funcArg } from './utils';\r\n\r\nD.fn.extend({\r\n    hasClass: function (name) {\r\n        if (!name) return false\r\n        return emptyArray.some.call(this, function (el) {\r\n            return this.test(className(el))\r\n        }, classRE(name))\r\n    },\r\n    addClass: function (name) {\r\n        var classList = [];\r\n        if (!name) return this\r\n        return this.each(function (idx) {\r\n            if (!('className' in this)) return\r\n            classList = []\r\n            var cls = className(this),\r\n                newName = funcArg(this, name, idx, cls)\r\n            newName.split(/\\s+/g).forEach(function (klass) {\r\n                if (!D(this).hasClass(klass)) classList.push(klass)\r\n            }, this)\r\n            classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"))\r\n        })\r\n    },\r\n    removeClass: function (name) {\r\n        var classList = [];\r\n        return this.each(function (idx) {\r\n            if (!('className' in this)) return\r\n            if (name === undefined) return className(this, '')\r\n            classList = className(this)\r\n            funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function (klass) {\r\n                classList = classList.replace(classRE(klass), \" \")\r\n            })\r\n            className(this, classList.trim())\r\n        })\r\n    },\r\n    toggleClass: function (name, when) {\r\n        if (!name) return this\r\n        return this.each(function (idx) {\r\n            var $this = D(this),\r\n                names = funcArg(this, name, idx, className(this))\r\n            names.split(/\\s+/g).forEach(function (klass) {\r\n                (when === undefined ? !$this.hasClass(klass) : when) ?\r\n                    $this.addClass(klass) : $this.removeClass(klass)\r\n            })\r\n        })\r\n    }\r\n});","import D from './d-class';\r\nimport { document, rootNodeRE } from './vars';\r\nimport { funcArg } from './utils';\r\n\r\nD.fn.extend({\r\n    offset: function (coordinates) {\r\n        if (coordinates) return this.each(function (index) {\r\n            var $this = D(this),\r\n                coords = funcArg(this, coordinates, index, $this.offset()),\r\n                parentOffset = $this.offsetParent().offset(),\r\n                props = {\r\n                    top: coords.top - parentOffset.top,\r\n                    left: coords.left - parentOffset.left\r\n                }\r\n\r\n            if ($this.css('position') == 'static') props['position'] = 'relative'\r\n            $this.css(props)\r\n        })\r\n        if (!this.length) return null\r\n        if (document.documentElement !== this[0] && !D.contains(document.documentElement, this[0]))\r\n            return { top: 0, left: 0 }\r\n        var obj = this[0].getBoundingClientRect()\r\n        return {\r\n            left: obj.left + window.pageXOffset,\r\n            top: obj.top + window.pageYOffset,\r\n            width: Math.round(obj.width),\r\n            height: Math.round(obj.height)\r\n        }\r\n    },\r\n    position: function () {\r\n        if (!this.length) return\r\n\r\n        var elem = this[0],\r\n            // Get *real* offsetParent\r\n            offsetParent = this.offsetParent(),\r\n            // Get correct offsets\r\n            offset = this.offset(),\r\n            parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset()\r\n\r\n        // Subtract element margins\r\n        // note: when an element has margin: auto the offsetLeft and marginLeft\r\n        // are the same in Safari causing offset.left to incorrectly be 0\r\n        offset.top -= parseFloat(D(elem).css('margin-top')) || 0\r\n        offset.left -= parseFloat(D(elem).css('margin-left')) || 0\r\n\r\n        // Add offsetParent borders\r\n        parentOffset.top += parseFloat(D(offsetParent[0]).css('border-top-width')) || 0\r\n        parentOffset.left += parseFloat(D(offsetParent[0]).css('border-left-width')) || 0\r\n\r\n        // Subtract the two offsets\r\n        return {\r\n            top: offset.top - parentOffset.top,\r\n            left: offset.left - parentOffset.left\r\n        }\r\n    },\r\n    scrollTop: function (value) {\r\n        if (!this.length) return\r\n        var hasScrollTop = 'scrollTop' in this[0]\r\n        if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset\r\n        return this.each(hasScrollTop ?\r\n            function () { this.scrollTop = value } :\r\n            function () { this.scrollTo(this.scrollX, value) })\r\n    },\r\n    scrollLeft: function (value) {\r\n        if (!this.length) return\r\n        var hasScrollLeft = 'scrollLeft' in this[0]\r\n        if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset\r\n        return this.each(hasScrollLeft ?\r\n            function () { this.scrollLeft = value } :\r\n            function () { this.scrollTo(value, this.scrollY) })\r\n    },\r\n    offsetParent: function () {\r\n        return this.map(function () {\r\n            var parent = this.offsetParent || document.body\r\n            while (parent && !rootNodeRE.test(parent.nodeName) && D(parent).css(\"position\") == \"static\")\r\n                parent = parent.offsetParent\r\n            return parent\r\n        })\r\n    }\r\n});","import D from './d-class';\r\nimport { funcArg, isObject, setAttribute } from './utils';\r\n\r\nD.fn.extend({\r\n    attr: function (name, value) {\r\n        var result\r\n        return (typeof name == 'string' && !(1 in arguments)) ?\r\n            (0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined) :\r\n            this.each(function (idx) {\r\n                if (this.nodeType !== 1) return\r\n                if (isObject(name))\r\n                    for (var key in name) setAttribute(this, key, name[key])\r\n                else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))\r\n            })\r\n    },\r\n    removeAttr: function (name) {\r\n        return this.each(function () {\r\n            this.nodeType === 1 && name.split(' ').forEach(function (attribute) {\r\n                setAttribute(this, attribute)\r\n            }, this)\r\n        })\r\n    }\r\n});","import D from './d-class';\r\nimport { propMap } from './vars';\r\nimport { funcArg, isObject } from './utils';\r\n\r\nD.fn.extend({\r\n    prop: function (name, value) {\r\n        name = propMap[name] || name\r\n        return (typeof name == 'string' && !(1 in arguments)) ?\r\n            (this[0] && this[0][name]) :\r\n            this.each(function (idx) {\r\n                if (isObject(name))\r\n                    for (var key in name) this[propMap[key] || key] = name[key]\r\n                else this[name] = funcArg(this, value, idx, this[name])\r\n            })\r\n    },\r\n    removeProp: function (name) {\r\n        name = propMap[name] || name\r\n        return this.each(function () { delete this[name] })\r\n    }\r\n});","import D from './d-class';\r\nimport { funcArg } from './utils';\r\n\r\nD.fn.extend({\r\n    val: function (value) {\r\n        if (0 in arguments) {\r\n            if (value == null) value = \"\"\r\n            return this.each(function (idx) {\r\n                this.value = funcArg(this, value, idx, this.value)\r\n            })\r\n        } else {\r\n            return this[0] && (this[0].multiple ?\r\n                D(this[0]).find('option').filter(function () { return this.selected }).pluck('value') :\r\n                this[0].value)\r\n        }\r\n    },\r\n});","import D from './d-class';\r\nimport { isFunction } from './utils';\r\n\r\nD.fn.extend({\r\n    wrap: function (structure) {\r\n        var func = isFunction(structure)\r\n        if (this[0] && !func)\r\n            var dom = D(structure).get(0),\r\n                clone = dom.parentNode || this.length > 1\r\n\r\n        return this.each(function (index) {\r\n            D(this).wrapAll(\r\n                func ? structure.call(this, index) :\r\n                    clone ? dom.cloneNode(true) : dom\r\n            )\r\n        })\r\n    },\r\n    wrapAll: function (structure) {\r\n        if (this[0]) {\r\n            D(this[0]).before(structure = D(structure))\r\n            var children\r\n            // drill down to the inmost element\r\n            while ((children = structure.children()).length) structure = children.first()\r\n            D(structure).append(this)\r\n        }\r\n        return this\r\n    },\r\n    wrapInner: function (structure) {\r\n        var func = isFunction(structure)\r\n        return this.each(function (index) {\r\n            var self = D(this),\r\n                contents = self.contents(),\r\n                dom = func ? structure.call(this, index) : structure\r\n            contents.length ? contents.wrapAll(dom) : self.append(dom)\r\n        })\r\n    },\r\n    unwrap: function () {\r\n        this.parent().each(function () {\r\n            D(this).replaceWith(D(this).children())\r\n        })\r\n        return this\r\n    }\r\n});","import D from './d-class';\r\nimport { emptyArray, filter, slice } from './vars';\r\nimport { children, filtered, isDocument, isFunction, isObject, likeArray, uniq } from './utils';\r\n\r\nD.fn.extend({\r\n    find: function (selector) {\r\n        var result, $this = this\r\n        if (!selector) result = D()\r\n        else if (typeof selector == 'object')\r\n            result = D(selector).filter(function () {\r\n                var node = this\r\n                return emptyArray.some.call($this, function (parent) {\r\n                    return D.contains(parent, node)\r\n                })\r\n            })\r\n        else if (this.length == 1) result = D(D.qsa(this[0], selector))\r\n        else result = this.map(function () { return D.qsa(this, selector) })\r\n        return result\r\n    },\r\n    filter: function (selector) {\r\n        if (isFunction(selector)) return this.not(this.not(selector))\r\n        return D(filter.call(this, function (element) {\r\n            return D.matches(element, selector)\r\n        }))\r\n    },\r\n    has: function (selector) {\r\n        return this.filter(function () {\r\n            return isObject(selector) ?\r\n                D.contains(this, selector) :\r\n                D(this).find(selector).size()\r\n        })\r\n    },\r\n    not: function (selector) {\r\n        var nodes = []\r\n        if (isFunction(selector) && selector.call !== undefined)\r\n            this.each(function (idx) {\r\n                if (!selector.call(this, idx)) nodes.push(this)\r\n            })\r\n        else {\r\n            var excludes = typeof selector == 'string' ? this.filter(selector) :\r\n                (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : D(selector)\r\n            this.forEach(function (el) {\r\n                if (excludes.indexOf(el) < 0) nodes.push(el)\r\n            })\r\n        }\r\n        return D(nodes)\r\n    },\r\n    is: function (selector) {\r\n        return typeof selector == 'string'\r\n            ? this.length > 0 && D.matches(this[0], selector)\r\n            : selector && this.selector == selector.selector\r\n    },\r\n\r\n    add: function (selector, context) {\r\n        return D(uniq(this.concat(D(selector, context))))\r\n    },\r\n    contents: function () {\r\n        return this.map(function () { return this.contentDocument || slice.call(this.childNodes) })\r\n    },\r\n\r\n    closest: function (selector, context) {\r\n        var nodes = [],\r\n            collection = typeof selector == 'object' && D(selector)\r\n        this.each(function (_, node) {\r\n            while (node && !(collection ? collection.indexOf(node) >= 0 : D.matches(node, selector)))\r\n                node = node !== context && !isDocument(node) && node.parentNode\r\n            if (node && nodes.indexOf(node) < 0) nodes.push(node)\r\n        })\r\n        return D(nodes)\r\n    },\r\n    parents: function (selector) {\r\n        var ancestors = [],\r\n            nodes = this\r\n        while (nodes.length > 0)\r\n            nodes = D.map(nodes, function (node) {\r\n                if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\r\n                    ancestors.push(node)\r\n                    return node\r\n                }\r\n            })\r\n        return filtered(ancestors, selector)\r\n    },\r\n    parent: function (selector) {\r\n        return filtered(uniq(this.pluck('parentNode')), selector)\r\n    },\r\n    children: function (selector) {\r\n        return filtered(this.map(function () { return children(this) }), selector)\r\n    },\r\n    siblings: function (selector) {\r\n        return filtered(this.map(function (i, el) {\r\n            return filter.call(children(el.parentNode), function (child) { return child !== el })\r\n        }), selector)\r\n    },\r\n    prev: function (selector) {\r\n        return D(this.pluck('previousElementSibling')).filter(selector || '*')\r\n    },\r\n    next: function (selector) {\r\n        return D(this.pluck('nextElementSibling')).filter(selector || '*')\r\n    },\r\n});","import D from './d-class';\r\nimport { dimensions } from './vars';\r\nimport { funcArg, isDocument, isWindow } from './utils';\r\n\r\nfunction subtract(el, dimen) {\r\n    return el.css('box-sizing') === 'border-box'\r\n        ? dimen === 'width'\r\n            ? (parseFloat(el.css(dimen))\r\n                - parseFloat(el.css('padding-left'))\r\n                - parseFloat(el.css('padding-right'))\r\n                - parseFloat(el.css('border-left'))\r\n                - parseFloat(el.css('border-right')))\r\n            : (parseFloat(el.css(dimen))\r\n                - parseFloat(el.css('padding-top'))\r\n                - parseFloat(el.css('padding-bottom'))\r\n                - parseFloat(el.css('border-top'))\r\n                - parseFloat(el.css('border-bottom')))\r\n        : parseFloat(el.css(dimen))\r\n}\r\n\r\ndimensions.forEach(function (dimension) {\r\n    var dimensionProperty =\r\n        dimension.replace(/./, function (m) { return m[0].toUpperCase() })\r\n\r\n    D.fn[dimension] = function (value) {\r\n        var el = this[0]\r\n        if (value === undefined) return isWindow(el)\r\n            ? el['inner' + dimensionProperty]\r\n            : isDocument(el)\r\n                ? el.documentElement['scroll' + dimensionProperty]\r\n                : subtract(this, dimension)\r\n        else return this.each(function (idx) {\r\n            el = D(this)\r\n            el.css(dimension, funcArg(this, value, idx, el[dimension]()))\r\n        })\r\n    }\r\n});","import D from './d-class';\r\nimport { adjacencyOperators, document } from './vars';\r\nimport { funcArg, type } from './utils';\r\n\r\nD.fn.extend({\r\n    remove: function () {\r\n        return this.each(function () {\r\n            if (this.parentNode != null)\r\n                this.parentNode.removeChild(this)\r\n        })\r\n    },\r\n    empty: function () {\r\n        return this.each(function () { this.innerHTML = '' })\r\n    },\r\n    clone: function () {\r\n        return this.map(function () { return this.cloneNode(true) })\r\n    },\r\n\r\n    html: function (html) {\r\n        return 0 in arguments ?\r\n            this.each(function (idx) {\r\n                var originHtml = this.innerHTML\r\n                D(this).empty().append(funcArg(this, html, idx, originHtml))\r\n            }) :\r\n            (0 in this ? this[0].innerHTML : null)\r\n    },\r\n    text: function (text) {\r\n        return 0 in arguments ?\r\n            this.each(function (idx) {\r\n                var newText = funcArg(this, text, idx, this.textContent)\r\n                this.textContent = newText == null ? '' : '' + newText\r\n            }) :\r\n            (0 in this ? this.pluck('textContent').join(\"\") : null)\r\n    },\r\n\r\n    replaceWith: function (newContent) {\r\n        return this.before(newContent).remove()\r\n    },\r\n});\r\n\r\nfunction traverseNode(node, fn) {\r\n    fn(node)\r\n    for (var i = 0, len = node.childNodes.length; i < len; i++)\r\n        traverseNode(node.childNodes[i], fn)\r\n}\r\n\r\n// Generate the `after`, `prepend`, `before`, `append`,\r\n// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\r\nadjacencyOperators.forEach(function (operator, operatorIndex) {\r\n    var inside = operatorIndex % 2 //=> prepend, append\r\n\r\n    D.fn[operator] = function () {\r\n        // arguments can be nodes, arrays of nodes, D objects and HTML strings\r\n        var argType,\r\n            nodes = D.map(arguments, function (arg) {\r\n                var arr = []\r\n                argType = type(arg)\r\n                if (argType == \"array\") {\r\n                    arg.forEach(function (el) {\r\n                        if (el.nodeType !== undefined) return arr.push(el)\r\n                        else if (D.isD(el)) return arr = arr.concat(el.get())\r\n                        arr = arr.concat(D.fragment(el))\r\n                    })\r\n                    return arr\r\n                }\r\n\r\n                return argType == \"object\" || arg == null\r\n                    ? arg\r\n                    : D.fragment(arg)\r\n            }),\r\n            parent,\r\n            copyByClone = this.length > 1;\r\n\r\n        if (nodes.length < 1) return this\r\n\r\n        return this.each(function (_, target) {\r\n            parent = inside ? target : target.parentNode\r\n\r\n            // convert all methods to a \"before\" operation\r\n            target = operatorIndex == 0\r\n                ? target.nextSibling\r\n                : operatorIndex == 1\r\n                    ? target.firstChild\r\n                    : operatorIndex == 2\r\n                        ? target : null\r\n\r\n            var parentInDocument = D.contains(document.documentElement, parent)\r\n\r\n            nodes.forEach(function (node) {\r\n\r\n                if (copyByClone) {\r\n                    node = node.cloneNode(true)\r\n                } else if (!parent) {\r\n                    return D(node).remove()\r\n                }\r\n\r\n                parent.insertBefore(node, target)\r\n\r\n                if (parentInDocument) {\r\n                    traverseNode(node, function (el) {\r\n                        if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\r\n                            (!el.type || el.type === 'text/javascript') && !el.src) {\r\n                            var target = el.ownerDocument ? el.ownerDocument.defaultView : window\r\n                            target['eval'].call(target, el.innerHTML)\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    // after    => insertAfter\r\n    // prepend  => prependTo\r\n    // before   => insertBefore\r\n    // append   => appendTo\r\n    D.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {\r\n        D(html)[operator](this)\r\n        return this\r\n    }\r\n});","import D from './d-class';\r\nimport { isFunction } from './utils';\r\nimport { document, slice } from './vars';\r\n\r\nvar _zid = 1,\r\n  handlers = {},\r\n  specialEvents = {\r\n    click: 'MouseEvents',\r\n    mousedown: 'MouseEvents',\r\n    mouseup: 'MouseEvents',\r\n    mousemove: 'MouseEvents',\r\n  },\r\n  focusinSupported = 'onfocusin' in window,\r\n  focus = { focus: 'focusin', blur: 'focusout' },\r\n  hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' },\r\n  ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,\r\n  eventMethods = {\r\n    preventDefault: 'isDefaultPrevented',\r\n    stopImmediatePropagation: 'isImmediatePropagationStopped',\r\n    stopPropagation: 'isPropagationStopped'\r\n  };\r\n\r\nfunction isString(obj) {\r\n  return typeof obj == 'string'\r\n}\r\nfunction returnTrue() {\r\n  return true\r\n}\r\nfunction returnFalse() {\r\n  return false\r\n}\r\nfunction zid(element) {\r\n  return element._zid || (element._zid = _zid++)\r\n}\r\nfunction findHandlers(element, event, fn, selector) {\r\n  event = parse(event)\r\n  if (event.ns) var matcher = matcherFor(event.ns)\r\n  return (handlers[zid(element)] || []).filter(function (handler) {\r\n    return handler\r\n      && (!event.e || handler.e == event.e)\r\n      && (!event.ns || matcher.test(handler.ns))\r\n      && (!fn || zid(handler.fn) === zid(fn))\r\n      && (!selector || handler.sel == selector)\r\n  })\r\n}\r\nfunction parse(event) {\r\n  var parts = ('' + event).split('.')\r\n  return { e: parts[0], ns: parts.slice(1).sort().join(' ') }\r\n}\r\nfunction matcherFor(ns) {\r\n  return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')\r\n}\r\n\r\nfunction eventCapture(handler, captureSetting) {\r\n  return handler.del &&\r\n    (!focusinSupported && (handler.e in focus)) ||\r\n    !!captureSetting\r\n}\r\n\r\nfunction realEvent(type) {\r\n  return hover[type] || (focusinSupported && focus[type]) || type\r\n}\r\n\r\nfunction add(element, events, fn, data, selector, delegator, capture) {\r\n  var id = zid(element), set = (handlers[id] || (handlers[id] = []))\r\n  events.split(/\\s/).forEach(function (event) {\r\n    if (event == 'ready') return D(document).ready(fn)\r\n    var handler = parse(event)\r\n    handler.fn = fn\r\n    handler.sel = selector\r\n    // emulate mouseenter, mouseleave\r\n    if (handler.e in hover) fn = function (e) {\r\n      var related = e.relatedTarget\r\n      if (!related || (related !== this && !D.contains(this, related)))\r\n        return handler.fn.apply(this, arguments)\r\n    }\r\n    handler.del = delegator\r\n    var callback = delegator || fn\r\n    handler.proxy = function (e) {\r\n      e = compatible(e)\r\n      if (e.isImmediatePropagationStopped()) return\r\n      e.data = data\r\n      var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))\r\n      if (result === false) e.preventDefault(), e.stopPropagation()\r\n      return result\r\n    }\r\n    handler.i = set.length\r\n    set.push(handler)\r\n    if ('addEventListener' in element)\r\n      element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\r\n  })\r\n}\r\nfunction remove(element, events, fn, selector, capture) {\r\n  var id = zid(element)\r\n    ; (events || '').split(/\\s/).forEach(function (event) {\r\n      findHandlers(element, event, fn, selector).forEach(function (handler) {\r\n        delete handlers[id][handler.i]\r\n        if ('removeEventListener' in element)\r\n          element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\r\n      })\r\n    })\r\n}\r\n\r\nfunction compatible(event, source) {\r\n  if (source || !event.isDefaultPrevented) {\r\n    source || (source = event)\r\n\r\n    D.each(eventMethods, function (name, predicate) {\r\n      var sourceMethod = source[name]\r\n      event[name] = function () {\r\n        this[predicate] = returnTrue\r\n        return sourceMethod && sourceMethod.apply(source, arguments)\r\n      }\r\n      event[predicate] = returnFalse\r\n    })\r\n\r\n    try {\r\n      event.timeStamp || (event.timeStamp = Date.now())\r\n    } catch (ignored) { }\r\n\r\n    if (source.defaultPrevented !== undefined ? source.defaultPrevented :\r\n      'returnValue' in source ? source.returnValue === false :\r\n        source.getPreventDefault && source.getPreventDefault())\r\n      event.isDefaultPrevented = returnTrue\r\n  }\r\n  return event\r\n}\r\n\r\nfunction createProxy(event) {\r\n  var key, proxy = { originalEvent: event }\r\n  for (key in event)\r\n    if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]\r\n\r\n  return compatible(proxy, event)\r\n}\r\n\r\nD.event = { add: add, remove: remove }\r\n\r\nD.Event = function (type, props) {\r\n  if (!isString(type)) props = type, type = props.type\r\n  var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true\r\n  if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])\r\n  event.initEvent(type, bubbles, true)\r\n  return compatible(event)\r\n}\r\n\r\nD.proxy = function (fn, context) {\r\n  var args = (2 in arguments) && slice.call(arguments, 2)\r\n  if (isFunction(fn)) {\r\n    var proxyFn = function () { return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments) }\r\n    proxyFn._zid = zid(fn)\r\n    return proxyFn\r\n  } else if (isString(context)) {\r\n    if (args) {\r\n      args.unshift(fn[context], fn)\r\n      return D.proxy.apply(null, args)\r\n    } else {\r\n      return D.proxy(fn[context], fn)\r\n    }\r\n  } else {\r\n    throw new TypeError(\"expected function\")\r\n  }\r\n}\r\n\r\nD.fn.one = function (event, selector, data, callback) {\r\n  return this.on(event, selector, data, callback, 1)\r\n}\r\n\r\nD.fn.on = function (event, selector, data, callback, one) {\r\n  var autoRemove, delegator, $this = this\r\n  if (event && !isString(event)) {\r\n    D.each(event, function (type, fn) {\r\n      $this.on(type, selector, data, fn, one)\r\n    })\r\n    return $this\r\n  }\r\n\r\n  if (!isString(selector) && !isFunction(callback) && callback !== false)\r\n    callback = data, data = selector, selector = undefined\r\n  if (callback === undefined || data === false)\r\n    callback = data, data = undefined\r\n\r\n  if (callback === false) callback = returnFalse\r\n\r\n  return $this.each(function (_, element) {\r\n    if (one) autoRemove = function (e) {\r\n      remove(element, e.type, callback)\r\n      return callback.apply(this, arguments)\r\n    }\r\n\r\n    if (selector) delegator = function (e) {\r\n      var evt, match = D(e.target).closest(selector, element).get(0)\r\n      if (match && match !== element) {\r\n        evt = D.extend(createProxy(e), { currentTarget: match, liveFired: element })\r\n        return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))\r\n      }\r\n    }\r\n\r\n    add(element, event, callback, data, selector, delegator || autoRemove)\r\n  })\r\n}\r\n\r\nD.fn.off = function (event, selector, callback) {\r\n  var $this = this\r\n  if (event && !isString(event)) {\r\n    D.each(event, function (type, fn) {\r\n      $this.off(type, selector, fn)\r\n    })\r\n    return $this\r\n  }\r\n\r\n  if (!isString(selector) && !isFunction(callback) && callback !== false)\r\n    callback = selector, selector = undefined\r\n\r\n  if (callback === false) callback = returnFalse\r\n\r\n  return $this.each(function () {\r\n    remove(this, event, callback, selector)\r\n  })\r\n}\r\n\r\nD.fn.trigger = function (event, args) {\r\n  event = (isString(event) || D.isPlainObject(event)) ? D.Event(event) : compatible(event)\r\n  event._args = args\r\n  return this.each(function () {\r\n    // handle focus(), blur() by calling them directly\r\n    if (event.type in focus && typeof this[event.type] == \"function\") this[event.type]()\r\n    // items in the collection might not be DOM elements\r\n    else if ('dispatchEvent' in this) this.dispatchEvent(event)\r\n    else D(this).triggerHandler(event, args)\r\n  })\r\n}\r\n\r\n// triggers event handlers on current element just as if an event occurred,\r\n// doesn't trigger an actual event, doesn't bubble\r\nD.fn.triggerHandler = function (event, args) {\r\n  var e, result\r\n  this.each(function (i, element) {\r\n    e = createProxy(isString(event) ? D.Event(event) : event)\r\n    e._args = args\r\n    e.target = element\r\n    D.each(findHandlers(element, event.type || event), function (i, handler) {\r\n      result = handler.proxy(e)\r\n      if (e.isImmediatePropagationStopped()) return false\r\n    })\r\n  })\r\n  return result\r\n}\r\n\r\n  // shortcut methods for `.on(event, fn)` for each event type\r\n  ; ('focusin focusout focus blur load resize scroll unload click dblclick ' +\r\n    'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' +\r\n    'change select keydown keypress keyup error').split(' ').forEach(function (event) {\r\n      D.fn[event] = function (callback) {\r\n        return (0 in arguments) ?\r\n          this.on(event, callback) :\r\n          this.trigger(event)\r\n      }\r\n    })\r\n","import D from './d-class';\r\nimport { document } from './vars';\r\n\r\nvar prefix = '', eventPrefix,\r\n  vendors = { Webkit: 'webkit', Moz: '', O: 'o' },\r\n  testEl = document.createElement('div'),\r\n  supportedTransforms = /^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,\r\n  transform,\r\n  transitionProperty, transitionDuration, transitionTiming, transitionDelay,\r\n  animationName, animationDuration, animationTiming, animationDelay,\r\n  cssReset = {}\r\n\r\nfunction dasherize(str) { return str.replace(/([A-Z])/g, '-$1').toLowerCase() }\r\nfunction normalizeEvent(name) { return eventPrefix ? eventPrefix + name : name.toLowerCase() }\r\n\r\nif (testEl.style.transform === undefined) D.each(vendors, function (vendor, event) {\r\n  if (testEl.style[vendor + 'TransitionProperty'] !== undefined) {\r\n    prefix = '-' + vendor.toLowerCase() + '-'\r\n    eventPrefix = event\r\n    return false\r\n  }\r\n})\r\n\r\ntransform = prefix + 'transform'\r\ncssReset[transitionProperty = prefix + 'transition-property'] =\r\n  cssReset[transitionDuration = prefix + 'transition-duration'] =\r\n  cssReset[transitionDelay = prefix + 'transition-delay'] =\r\n  cssReset[transitionTiming = prefix + 'transition-timing-function'] =\r\n  cssReset[animationName = prefix + 'animation-name'] =\r\n  cssReset[animationDuration = prefix + 'animation-duration'] =\r\n  cssReset[animationDelay = prefix + 'animation-delay'] =\r\n  cssReset[animationTiming = prefix + 'animation-timing-function'] = ''\r\n\r\nD.fx = {\r\n  off: (eventPrefix === undefined && testEl.style.transitionProperty === undefined),\r\n  speeds: { _default: 400, fast: 200, slow: 600 },\r\n  cssPrefix: prefix,\r\n  transitionEnd: normalizeEvent('TransitionEnd'),\r\n  animationEnd: normalizeEvent('AnimationEnd')\r\n}\r\n\r\nD.fn.animate = function (properties, duration, ease, callback, delay) {\r\n  if (D.isFunction(duration))\r\n    callback = duration, ease = undefined, duration = undefined\r\n  if (D.isFunction(ease))\r\n    callback = ease, ease = undefined\r\n  if (D.isPlainObject(duration))\r\n    ease = duration.easing, callback = duration.complete, delay = duration.delay, duration = duration.duration\r\n  if (duration) duration = (typeof duration == 'number' ? duration :\r\n    (D.fx.speeds[duration] || D.fx.speeds._default)) / 1000\r\n  if (delay) delay = parseFloat(delay) / 1000\r\n  return this.anim(properties, duration, ease, callback, delay)\r\n}\r\n\r\nD.fn.anim = function (properties, duration, ease, callback, delay) {\r\n  var key, cssValues = {}, cssProperties, transforms = '',\r\n    that = this, wrappedCallback, endEvent = D.fx.transitionEnd,\r\n    fired = false\r\n\r\n  if (duration === undefined) duration = D.fx.speeds._default / 1000\r\n  if (delay === undefined) delay = 0\r\n  if (D.fx.off) duration = 0\r\n\r\n  if (typeof properties == 'string') {\r\n    // keyframe animation\r\n    cssValues[animationName] = properties\r\n    cssValues[animationDuration] = duration + 's'\r\n    cssValues[animationDelay] = delay + 's'\r\n    cssValues[animationTiming] = (ease || 'linear')\r\n    endEvent = D.fx.animationEnd\r\n  } else {\r\n    cssProperties = []\r\n    // CSS transitions\r\n    for (key in properties)\r\n      if (supportedTransforms.test(key)) transforms += key + '(' + properties[key] + ') '\r\n      else cssValues[key] = properties[key], cssProperties.push(dasherize(key))\r\n\r\n    if (transforms) cssValues[transform] = transforms, cssProperties.push(transform)\r\n    if (duration > 0 && typeof properties === 'object') {\r\n      cssValues[transitionProperty] = cssProperties.join(', ')\r\n      cssValues[transitionDuration] = duration + 's'\r\n      cssValues[transitionDelay] = delay + 's'\r\n      cssValues[transitionTiming] = (ease || 'linear')\r\n    }\r\n  }\r\n\r\n  wrappedCallback = function (event) {\r\n    if (typeof event !== 'undefined') {\r\n      if (event.target !== event.currentTarget) return // makes sure the event didn't bubble from \"below\"\r\n      D(event.target).off(endEvent, wrappedCallback)\r\n    } else\r\n      D(this).off(endEvent, wrappedCallback) // triggered by setTimeout\r\n\r\n    fired = true\r\n    D(this).css(cssReset)\r\n    callback && callback.call(this)\r\n  }\r\n  if (duration > 0) {\r\n    this.on(endEvent, wrappedCallback)\r\n    // transitionEnd is not always firing on older Android phones\r\n    // so make sure it gets fired\r\n    setTimeout(function () {\r\n      if (fired) return\r\n      wrappedCallback.call(that)\r\n    }, ((duration + delay) * 1000) + 25)\r\n  }\r\n\r\n  // trigger page reflow so new elements can animate\r\n  this.size() && this.get(0).clientLeft\r\n\r\n  this.css(cssValues)\r\n\r\n  if (duration <= 0) setTimeout(function () {\r\n    that.each(function () { wrappedCallback.call(this) })\r\n  }, 0)\r\n\r\n  return this\r\n}\r\n\r\ntestEl = null","import D from './d-class';\r\n\r\nD.fn.extend({\r\n  show: function () {\r\n    return this.each(function () {\r\n      this.style.display == \"none\" && (this.style.display = '')\r\n      if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\r\n        this.style.display = defaultDisplay(this.nodeName)\r\n    })\r\n  },\r\n  hide: function () {\r\n    return this.css(\"display\", \"none\")\r\n  }\r\n});\r\n\r\nvar origShow = D.fn.show, origHide = D.fn.hide, origToggle = D.fn.toggle\r\n\r\nfunction anim(el, speed, opacity, scale, callback) {\r\n  if (typeof speed == 'function' && !callback) callback = speed, speed = undefined\r\n  var props = { opacity: opacity }\r\n  if (scale) {\r\n    props.scale = scale\r\n    el.css(D.fx.cssPrefix + 'transform-origin', '0 0')\r\n  }\r\n  return el.animate(props, speed, null, callback)\r\n}\r\n\r\nfunction hide(el, speed, scale, callback) {\r\n  return anim(el, speed, 0, scale, function () {\r\n    origHide.call(D(this))\r\n    callback && callback.call(this)\r\n  })\r\n}\r\n\r\nD.fn.show = function (speed, callback) {\r\n  origShow.call(this)\r\n  if (speed === undefined) speed = 0\r\n  else this.css('opacity', 0)\r\n  return anim(this, speed, 1, '1,1', callback)\r\n}\r\n\r\nD.fn.hide = function (speed, callback) {\r\n  if (speed === undefined) return origHide.call(this)\r\n  else return hide(this, speed, '0,0', callback)\r\n}\r\n\r\nD.fn.toggle = function (speed, callback) {\r\n  if (speed === undefined || typeof speed == 'boolean')\r\n    return origToggle.call(this, speed)\r\n  else return this.each(function () {\r\n    var el = D(this)\r\n    el[el.css('display') == 'none' ? 'show' : 'hide'](speed, callback)\r\n  })\r\n}\r\n\r\nD.fn.fadeTo = function (speed, opacity, callback) {\r\n  return anim(this, speed, opacity, null, callback)\r\n}\r\n\r\nD.fn.fadeIn = function (speed, callback) {\r\n  var target = this.css('opacity')\r\n  if (target > 0) this.css('opacity', 0)\r\n  else target = 1\r\n  return origShow.call(this).fadeTo(speed, target, callback)\r\n}\r\n\r\nD.fn.fadeOut = function (speed, callback) {\r\n  return hide(this, speed, null, callback)\r\n}\r\n\r\nD.fn.fadeToggle = function (speed, callback) {\r\n  return this.each(function () {\r\n    var el = D(this)\r\n    el[\r\n      (el.css('opacity') == 0 || el.css('display') == 'none') ? 'fadeIn' : 'fadeOut'\r\n    ](speed, callback)\r\n  })\r\n}\r\n","import D from './d-class';\r\nimport './core';\r\nimport './css';\r\nimport './classes';\r\nimport './offset';\r\nimport './attr';\r\nimport './prop';\r\nimport './val';\r\nimport './wrap';\r\nimport './traversing';\r\nimport './dimensions';\r\nimport './manipulation';\r\nimport './event';\r\nimport './animate';\r\nimport './effects';\r\n\r\nwindow.D = D;\r\n\r\nconst $ = D;\r\n\r\nexport default $;","import $ from './domq/index';\r\nexport default {\r\n\r\n  // Enable modal to drag\r\n  draggable: true,\r\n\r\n  // Enable modal to resize\r\n  resizable: true,\r\n\r\n  // Enable image to move\r\n  movable: true,\r\n\r\n  // Enable keyboard navigation\r\n  keyboard: true,\r\n\r\n  // Shows the title\r\n  title: true,\r\n\r\n  // Min width of modal\r\n  modalWidth: 320,\r\n\r\n  // Min height of modal\r\n  modalHeight: 320,\r\n\r\n  // Enable the page content fixed\r\n  fixedContent: true,\r\n\r\n  // Disable the modal size fixed\r\n  fixedModalSize: false,\r\n\r\n  // Disable the image viewer maximized on init\r\n  initMaximized: false,\r\n\r\n  // Threshold of modal to browser window\r\n  gapThreshold: 0.02,\r\n\r\n  // Threshold of image ratio\r\n  ratioThreshold: 0.1,\r\n\r\n  // Min ratio of image when zoom out\r\n  minRatio: 0.05,\r\n\r\n  // Max ratio of image when zoom in\r\n  maxRatio: 16,\r\n\r\n  // Toolbar options in header\r\n  headToolbar: [\r\n    'maximize',\r\n    'close'\r\n  ],\r\n\r\n  // Toolbar options in footer\r\n  footToolbar: [\r\n    'zoomIn',\r\n    'zoomOut',\r\n    'prev',\r\n    'fullscreen',\r\n    'next',\r\n    'actualSize',\r\n    'rotateRight'\r\n  ],\r\n\r\n  // Customize button icon\r\n  icons: {\r\n    minimize: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n               <path fill=\"currentColor\" d=\"M20,14H4V10H20\"></path>\r\n               </svg>`,\r\n    maximize: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n               <path fill=\"currentColor\" d=\"M4,4H20V20H4V4M6,8V18H18V8H6Z\"></path>\r\n               </svg>`,\r\n    close: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n            <path fill=\"currentColor\" d=\"M13.46,12L19,17.54V19H17.54L12,13.46\r\n            L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46\r\n            L13.46,12Z\"></path>\r\n            </svg>`,\r\n    zoomIn: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n             <path fill=\"currentColor\" d=\"M15.5,14L20.5,19L19,20.5L14,15.5V14.71\r\n             L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,\r\n             6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,\r\n             13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5C7,5 5,\r\n             7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z\"></path>\r\n            </svg>`,\r\n    zoomOut: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n              <path fill=\"currentColor\" d=\"M15.5,14H14.71L14.43,13.73C15.41,\r\n              12.59 16,11.11 16,9.5A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,\r\n              6.5 0 0,0 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5\r\n              L19,20.5L20.5,19L15.5,14M9.5,14C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,\r\n              5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z\"></path>\r\n              </svg>`,\r\n    prev: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n           <path fill=\"currentColor\" d=\"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z\"></path>\r\n           </svg>`,\r\n    next: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n           <path fill=\"currentColor\" d=\"M16,18H18V6H16M6,18L14.5,12L6,6V18Z\"></path>\r\n           </svg>`,\r\n    fullscreen: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                 <path fill=\"currentColor\" d=\"M8.5,12.5L11,15.5L14.5,11L19,17H5\r\n                 M23,18V6A2,2 0 0,0 21,4H3A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,\r\n                 2 0 0,0 23,18Z\"></path>\r\n                 </svg>`,\r\n    actualSize: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                 <path fill=\"currentColor\" d=\"M9.5,13.09L10.91,14.5L6.41,19H10V21\r\n                 H3V14H5V17.59L9.5,13.09M10.91,9.5L9.5,10.91L5,6.41V10H3V3H10V5\r\n                 H6.41L10.91,9.5M14.5,13.09L19,17.59V14H21V21H14V19H17.59L13.09,\r\n                 14.5L14.5,13.09M13.09,9.5L17.59,5H14V3H21V10H19V6.41L14.5,10.91\r\n                 L13.09,9.5Z\"></path>\r\n                </svg>`,\r\n    rotateLeft: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                 <path fill=\"currentColor\" d=\"M13,4.07V1L8.45,5.55L13,10V6.09\r\n                 C15.84,6.57 18,9.03 18,12C18,14.97 15.84,17.43 13,17.91V19.93\r\n                 C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07M7.1,18.32\r\n                 C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,\r\n                 16.87L7.1,18.32M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89\r\n                 L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13M7.11,8.53L5.7,7.11C4.8,\r\n                 8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z\"></path>\r\n                 </svg>`,\r\n    rotateRight: `<svg viewBox=\"0 0 24 24\" class=\"svg-inline-icon\">\r\n                  <path fill=\"currentColor\" d=\"M16.89,15.5L18.31,16.89C19.21,\r\n                  15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,\r\n                  15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,\r\n                  16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,\r\n                  8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,\r\n                  5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93\r\n                  V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,\r\n                  5.55Z\"></path>\r\n                  </svg>`\r\n  },\r\n\r\n  // Customize language of button title\r\n  i18n: {\r\n    minimize: 'minimize',\r\n    maximize: 'maximize',\r\n    close: 'close',\r\n    zoomIn: 'zoom-in(+)',\r\n    zoomOut: 'zoom-out(-)',\r\n    prev: 'prev(←)',\r\n    next: 'next(→)',\r\n    fullscreen: 'fullscreen',\r\n    actualSize: 'actual-size(Ctrl+Alt+0)',\r\n    rotateLeft: 'rotate-left(Ctrl+,)',\r\n    rotateRight: 'rotate-right(Ctrl+.)'\r\n  },\r\n\r\n  // Enable multiple instances\r\n  multiInstances: true,\r\n\r\n  // Enable animation\r\n  initAnimation: true,\r\n\r\n  // Disable modal position fixed when change images\r\n  fixedModalPos: false,\r\n\r\n  // Modal z-index\r\n  zIndex: 1090,\r\n\r\n  // Selector of drag handler\r\n  dragHandle: false,\r\n\r\n  // Callback events\r\n  callbacks: {\r\n    beforeOpen: $.noop,\r\n    opened: $.noop,\r\n    beforeClose: $.noop,\r\n    closed: $.noop,\r\n    beforeChange: $.noop,\r\n    changed: $.noop\r\n  },\r\n\r\n  // Start images index\r\n  index: 0,\r\n\r\n  // Load the image progressively\r\n  progressiveLoading: true\r\n\r\n}\r\n","import $ from './domq/index';\r\n\r\n/**\r\n * [getImgSrc]\r\n * @param {[Object]}  el    [description]\r\n */\r\nexport function getImgSrc(el) {\r\n  // Get data-src as image src at first\r\n  let src = $(el).attr('data-src')\r\n    ? $(el).attr('data-src')\r\n    : $(el).attr('href');\r\n  return src;\r\n}\r\n\r\n/**\r\n * [throttle]\r\n * @param  {Function} fn    [description]\r\n * @param  {[Number]} delay [description]\r\n * @return {Function}       [description]\r\n */\r\nexport function throttle(fn, delay) {\r\n\r\n  let timer = null;\r\n\r\n  return function () {\r\n    let context = this,\r\n      args = arguments;\r\n\r\n    clearTimeout(timer);\r\n\r\n    timer = setTimeout(function () {\r\n      fn.apply(context, args);\r\n    }, delay);\r\n  };\r\n\r\n}\r\n\r\n/**\r\n * [preloadImg]\r\n * @param  {[String]}  src      [image src]\r\n * @param  {Function}  success  [callbacks]\r\n * @param  {Function}  error    [callbacks]\r\n */\r\nexport function preloadImg(src, success, error) {\r\n\r\n  let img = new Image();\r\n\r\n  img.onload = function () {\r\n    success(img);\r\n  };\r\n\r\n  img.onerror = function () {\r\n    error(img);\r\n  };\r\n\r\n  img.src = src;\r\n\r\n}\r\n\r\n/**\r\n * [requestFullscreen]\r\n * @param  {[type]} element [description]\r\n */\r\nexport function requestFullscreen(element) {\r\n  if (element.requestFullscreen) {\r\n    element.requestFullscreen();\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen();\r\n  } else if (element.webkitRequestFullscreen) {\r\n    element.webkitRequestFullscreen();\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * [exitFullscreen]\r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * [getImageNameFromUrl]\r\n * @param  {[String]} url [description]\r\n * @return {[String]}     [description]\r\n */\r\nexport function getImageNameFromUrl(url) {\r\n  let reg = /^.*?\\/*([^/?]*)\\.[a-z]+(\\?.+|$)/ig,\r\n    txt = url.replace(reg, '$1');\r\n  return txt;\r\n}\r\n\r\n/**\r\n * [getNumFromCSSValue]\r\n * @param  {[String]} value [description]\r\n * @return {[Number]}       [description]\r\n */\r\nexport function getNumFromCSSValue(value) {\r\n  let reg = /\\d+/g,\r\n    arr = value.match(reg),\r\n    num = parseFloat(arr[0]);\r\n  return num;\r\n}\r\n\r\n/**\r\n * [hasScrollbar]\r\n * @return {[Boolean]}       [description]\r\n */\r\nexport function hasScrollbar() {\r\n  return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight);\r\n}\r\n\r\n/**\r\n * [getScrollbarWidth]\r\n * @return {[Number]}       [description]\r\n */\r\nexport function getScrollbarWidth() {\r\n\r\n  let scrollDiv = document.createElement('div');\r\n  scrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';\r\n  document.body.appendChild(scrollDiv);\r\n  let scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n  document.body.removeChild(scrollDiv);\r\n\r\n  return scrollbarWidth;\r\n\r\n}\r\n\r\n/**\r\n * [setGrabCursor]\r\n * @param {[Object]}  imageData    [description]\r\n * @param {[Object]}  stageData    [description]\r\n * @param {[Object]}  stage        [description]\r\n * @param {[Boolean]} isRotate     [description]\r\n */\r\nexport function setGrabCursor(imageData, stageData, stage, isRotated) {\r\n\r\n  let imageWidth = !isRotated ? imageData.w : imageData.h,\r\n    imageHeight = !isRotated ? imageData.h : imageData.w;\r\n\r\n  if (imageHeight > stageData.h || imageWidth > stageData.w) {\r\n    stage.addClass('is-grab');\r\n  }\r\n  if (imageHeight <= stageData.h && imageWidth <= stageData.w) {\r\n    stage.removeClass('is-grab');\r\n  }\r\n}\r\n\r\n/**\r\n * [supportTouch]\r\n * @return {[Boolean]}     [description]\r\n */\r\nexport function supportTouch() {\r\n  return !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\r\n}\r\n\r\n/**\r\n * [fadeIn]\r\n */\r\nexport function fadeIn(el) {\r\n  let opacity = 0;\r\n\r\n  el.style.opacity = 0;\r\n  el.style.filter = '';\r\n\r\n  let last = +new Date();\r\n  let tick = function () {\r\n    opacity += (new Date() - last) / 400;\r\n    el.style.opacity = opacity;\r\n    el.style.filter = 'alpha(opacity=' + (100 * opacity) | 0 + ')';\r\n\r\n    last = +new Date();\r\n\r\n    if (opacity < 1) {\r\n      (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16);\r\n    }\r\n  };\r\n\r\n  tick();\r\n}\r\n","import $ from './domq/index';\r\nimport defaults from './defaults';\r\nimport { supportTouch } from './utilities';\r\n\r\nexport const $W = $(window);\r\nexport const $D = $(document);\r\n\r\nexport const CLICK_EVENT = 'click';\r\nexport const RESIZE_EVENT = 'resize';\r\nexport const KEYDOWN_EVENT = 'keydown';\r\nexport const WHEEL_EVENT = 'wheel mousewheel DOMMouseScroll';\r\n\r\nexport const TOUCH_START_EVENT = supportTouch() ? 'touchstart' : 'mousedown';\r\nexport const TOUCH_MOVE_EVENT = supportTouch() ? 'touchmove' : 'mousemove';\r\nexport const TOUCH_END_EVENT = supportTouch() ? 'touchend' : 'mouseup';\r\n\r\nexport const NS = 'photoviewer';\r\nexport const CLASS_NS = '.' + NS;\r\nexport const EVENT_NS = '.' + NS;\r\n\r\nexport const PUBLIC_VARS = {\r\n  // image moving flag\r\n  isMoving: false,\r\n  // modal resizing flag\r\n  isResizing: false,\r\n  // modal z-index setting\r\n  zIndex: defaults.zIndex,\r\n};\r\n","import $ from './domq/index';\r\nimport {\r\n  $D,\r\n  TOUCH_START_EVENT,\r\n  TOUCH_MOVE_EVENT,\r\n  TOUCH_END_EVENT,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nexport default {\r\n\r\n  /**\r\n   * [draggable]\r\n   * @param  {[Object]} modal       [the modal element]\r\n   * @param  {[Object]} dragHandle  [the handle element when dragging]\r\n   * @param  {[Object]} dragCancel  [the cancel element when dragging]\r\n   */\r\n  draggable(modal, dragHandle, dragCancel) {\r\n\r\n    let isDragging = false;\r\n\r\n    let startX = 0,\r\n      startY = 0,\r\n\r\n      left = 0,\r\n      top = 0;\r\n\r\n    let dragStart = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      // Must be removed\r\n      // e.preventDefault();\r\n\r\n      if (this.options.multiInstances) {\r\n        modal.css('z-index', ++PUBLIC_VARS['zIndex']);\r\n      }\r\n\r\n      // Get clicked button\r\n      let elemCancel = $(e.target).closest(dragCancel);\r\n      // Stop modal moving when click buttons\r\n      if (elemCancel.length) {\r\n        return true;\r\n      }\r\n\r\n      isDragging = true;\r\n\r\n      startX = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageX\r\n        : e.clientX;\r\n      startY = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageY\r\n        : e.clientY;\r\n\r\n      left = $(modal).offset().left;\r\n      top = $(modal).offset().top;\r\n\r\n      $D.on(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .on(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n    };\r\n\r\n    let dragMove = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      if (isDragging && !PUBLIC_VARS['isMoving'] && !PUBLIC_VARS['isResizing'] && !this.isMaximized) {\r\n\r\n        let endX = e.type === 'touchmove'\r\n          ? e.targetTouches[0].pageX\r\n          : e.clientX,\r\n          endY = e.type === 'touchmove'\r\n            ? e.targetTouches[0].pageY\r\n            : e.clientY,\r\n\r\n          relativeX = endX - startX,\r\n          relativeY = endY - startY;\r\n\r\n        $(modal).css({\r\n          left: relativeX + left + 'px',\r\n          top: relativeY + top + 'px'\r\n        });\r\n\r\n      }\r\n\r\n    };\r\n\r\n    let dragEnd = () => {\r\n\r\n      $D.off(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .off(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n      isDragging = false;\r\n\r\n    };\r\n\r\n    $(dragHandle).on(TOUCH_START_EVENT + EVENT_NS, dragStart);\r\n\r\n  }\r\n\r\n}\r\n","import $ from './domq/index';\r\nimport {\r\n  $D,\r\n  TOUCH_START_EVENT,\r\n  TOUCH_MOVE_EVENT,\r\n  TOUCH_END_EVENT,\r\n  NS,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nconst ELEMS_WITH_GRABBING_CURSOR = `html,body,.${NS}-modal,.${NS}-stage,.${NS}-button,.${NS}-resizable-handle`;\r\n\r\nexport default {\r\n\r\n  /**\r\n   * --------------------------------------\r\n   * 1.no movable\r\n   * 2.vertical movable\r\n   * 3.horizontal movable\r\n   * 4.vertical & horizontal movable\r\n   * --------------------------------------\r\n   *\r\n   * [image movable]\r\n   * @param  {[Object]} stage   [the stage element]\r\n   * @param  {[Object]} image   [the image element]\r\n   */\r\n  movable(stage, image) {\r\n\r\n    let isDragging = false;\r\n\r\n    let startX = 0,\r\n      startY = 0,\r\n\r\n      left = 0,\r\n      top = 0,\r\n\r\n      widthDiff = 0,\r\n      heightDiff = 0,\r\n\r\n      δ = 0;\r\n\r\n    let dragStart = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      let imageWidth = $(image).width(),\r\n        imageHeight = $(image).height(),\r\n        stageWidth = $(stage).width(),\r\n        stageHeight = $(stage).height();\r\n\r\n      startX = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageX\r\n        : e.clientX;\r\n      startY = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageY\r\n        : e.clientY;\r\n\r\n      // δ is the difference between image width and height\r\n      δ = !this.isRotated ? 0 : (imageWidth - imageHeight) / 2;\r\n\r\n      // Width or height difference can be use to limit image right or top position\r\n      widthDiff = !this.isRotated\r\n        ? (imageWidth - stageWidth)\r\n        : (imageHeight - stageWidth);\r\n      heightDiff = !this.isRotated\r\n        ? (imageHeight - stageHeight)\r\n        : (imageWidth - stageHeight);\r\n\r\n      // Modal can be dragging if image is smaller to stage\r\n      isDragging = (widthDiff > 0 || heightDiff > 0) ? true : false;\r\n      PUBLIC_VARS['isMoving'] = (widthDiff > 0 || heightDiff > 0) ? true : false;\r\n\r\n      // Reclac the element position when mousedown\r\n      // Fixed the issue of stage with a border\r\n      left = $(image).position().left - δ;\r\n      top = $(image).position().top + δ;\r\n\r\n      // Add grabbing cursor\r\n      if (stage.hasClass('is-grab')) {\r\n        $(ELEMS_WITH_GRABBING_CURSOR).addClass('is-grabbing');\r\n      }\r\n\r\n      $D.on(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .on(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n    };\r\n\r\n    let dragMove = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      if (isDragging) {\r\n\r\n        let endX = e.type === 'touchmove'\r\n          ? e.targetTouches[0].pageX\r\n          : e.clientX,\r\n          endY = e.type === 'touchmove'\r\n            ? e.targetTouches[0].pageY\r\n            : e.clientY,\r\n\r\n          relativeX = endX - startX,\r\n          relativeY = endY - startY,\r\n\r\n          newLeft = relativeX + left,\r\n          newTop = relativeY + top;\r\n\r\n        // vertical limit\r\n        if (heightDiff > 0) {\r\n\r\n          if ((relativeY + top) > δ) {\r\n            newTop = δ;\r\n          } else if ((relativeY + top) < -heightDiff + δ) {\r\n            newTop = -heightDiff + δ;\r\n          }\r\n\r\n        } else {\r\n          newTop = top;\r\n        }\r\n        // horizontal limit\r\n        if (widthDiff > 0) {\r\n\r\n          if ((relativeX + left) > -δ) {\r\n            newLeft = -δ;\r\n          } else if ((relativeX + left) < -widthDiff - δ) {\r\n            newLeft = -widthDiff - δ;\r\n          }\r\n\r\n        } else {\r\n          newLeft = left;\r\n        }\r\n\r\n        $(image).css({\r\n          left: newLeft + 'px',\r\n          top: newTop + 'px'\r\n        });\r\n\r\n        // Update image initial data\r\n        $.extend(this.imageData, {\r\n          left: newLeft,\r\n          top: newTop\r\n        });\r\n\r\n      }\r\n\r\n    };\r\n\r\n    let dragEnd = () => {\r\n\r\n      $D.off(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .off(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n      isDragging = false;\r\n      PUBLIC_VARS['isMoving'] = false;\r\n\r\n      // Remove grabbing cursor\r\n      $(ELEMS_WITH_GRABBING_CURSOR).removeClass('is-grabbing');\r\n\r\n    };\r\n\r\n    $(stage).on(TOUCH_START_EVENT + EVENT_NS, dragStart);\r\n\r\n  }\r\n\r\n}\r\n","import $ from './domq/index';\r\nimport {\r\n  $D,\r\n  TOUCH_START_EVENT,\r\n  TOUCH_MOVE_EVENT,\r\n  TOUCH_END_EVENT,\r\n  NS,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nimport {\r\n  setGrabCursor\r\n} from './utilities';\r\n\r\nconst ELEMS_WITH_RESIZE_CURSOR = `html,body,.${NS}-modal,.${NS}-stage,.${NS}-button`;\r\n\r\nexport default {\r\n\r\n  /**\r\n   * ------------------------------\r\n   * 1.modal resizable\r\n   * 2.keep image in stage center\r\n   * 3.other image limitations\r\n   * ------------------------------\r\n   *\r\n   * [resizable]\r\n   * @param  {[Object]} modal       [the modal element]\r\n   * @param  {[Object]} stage       [the stage element]\r\n   * @param  {[Object]} image       [the image element]\r\n   * @param  {[Number]} minWidth    [the option of modalWidth]\r\n   * @param  {[Number]} minHeight   [the option of modalHeight]\r\n   */\r\n  resizable(modal, stage, image, minWidth, minHeight) {\r\n\r\n    let resizableHandleE = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-e\"></div>`),\r\n      resizableHandleW = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-w\"></div>`),\r\n      resizableHandleS = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-s\"></div>`),\r\n      resizableHandleN = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-n\"></div>`),\r\n      resizableHandleSE = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-se\"></div>`),\r\n      resizableHandleSW = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-sw\"></div>`),\r\n      resizableHandleNE = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-ne\"></div>`),\r\n      resizableHandleNW = $(`<div class=\"${NS}-resizable-handle ${NS}-resizable-handle-nw\"></div>`);\r\n\r\n    let resizableHandles = {\r\n      'e': resizableHandleE,\r\n      's': resizableHandleS,\r\n      'se': resizableHandleSE,\r\n      'n': resizableHandleN,\r\n      'w': resizableHandleW,\r\n      'nw': resizableHandleNW,\r\n      'ne': resizableHandleNE,\r\n      'sw': resizableHandleSW\r\n    };\r\n\r\n    $(modal).append(\r\n      resizableHandleE, resizableHandleW, resizableHandleS, resizableHandleN,\r\n      resizableHandleSE, resizableHandleSW, resizableHandleNE, resizableHandleNW\r\n    );\r\n\r\n    let isDragging = false;\r\n\r\n    let startX = 0,\r\n      startY = 0,\r\n\r\n      modalData = {\r\n        w: 0,\r\n        h: 0,\r\n        l: 0,\r\n        t: 0\r\n      },\r\n      stageData = {\r\n        w: 0,\r\n        h: 0,\r\n        l: 0,\r\n        t: 0\r\n      },\r\n      imageData = {\r\n        w: 0,\r\n        h: 0,\r\n        l: 0,\r\n        t: 0\r\n      },\r\n\r\n      // δ is the difference between image width and height\r\n      δ = 0,\r\n      imgWidth = 0,\r\n      imgHeight = 0,\r\n\r\n      direction = '';\r\n\r\n    // modal CSS options\r\n    let getModalOpts = function (dir, offsetX, offsetY) {\r\n\r\n      // Modal should not move when its width to the minwidth\r\n      let modalLeft = (-offsetX + modalData.w) > minWidth\r\n        ? (offsetX + modalData.l)\r\n        : (modalData.l + modalData.w - minWidth),\r\n        modalTop = (-offsetY + modalData.h) > minHeight\r\n          ? (offsetY + modalData.t)\r\n          : (modalData.t + modalData.h - minHeight);\r\n\r\n      let opts = {\r\n        'e': {\r\n          width: Math.max((offsetX + modalData.w), minWidth) + 'px'\r\n        },\r\n        's': {\r\n          height: Math.max((offsetY + modalData.h), minHeight) + 'px'\r\n        },\r\n        'se': {\r\n          width: Math.max((offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((offsetY + modalData.h), minHeight) + 'px'\r\n        },\r\n        'w': {\r\n          width: Math.max((-offsetX + modalData.w), minWidth) + 'px',\r\n          left: modalLeft + 'px'\r\n        },\r\n        'n': {\r\n          height: Math.max((-offsetY + modalData.h), minHeight) + 'px',\r\n          top: modalTop + 'px'\r\n        },\r\n        'nw': {\r\n          width: Math.max((-offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((-offsetY + modalData.h), minHeight) + 'px',\r\n          top: modalTop + 'px',\r\n          left: modalLeft + 'px'\r\n        },\r\n        'ne': {\r\n          width: Math.max((offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((-offsetY + modalData.h), minHeight) + 'px',\r\n          top: modalTop + 'px'\r\n        },\r\n        'sw': {\r\n          width: Math.max((-offsetX + modalData.w), minWidth) + 'px',\r\n          height: Math.max((offsetY + modalData.h), minHeight) + 'px',\r\n          left: modalLeft + 'px'\r\n        }\r\n      };\r\n\r\n      return opts[dir];\r\n    };\r\n\r\n    // image CSS options\r\n    let getImageOpts = function (dir, offsetX, offsetY) {\r\n\r\n      // Image should not move when modal width to the min width\r\n      // The minwidth is modal width, so we should clac the stage minwidth\r\n      let widthDiff = (offsetX + modalData.w) > minWidth\r\n        ? (stageData.w - imgWidth + offsetX - δ)\r\n        : (minWidth - (modalData.w - stageData.w) - imgWidth - δ),\r\n        heightDiff = (offsetY + modalData.h) > minHeight\r\n          ? (stageData.h - imgHeight + offsetY + δ)\r\n          : (minHeight - (modalData.h - stageData.h) - imgHeight + δ),\r\n\r\n        widthDiff2 = (-offsetX + modalData.w) > minWidth\r\n          ? (stageData.w - imgWidth - offsetX - δ)\r\n          : (minWidth - (modalData.w - stageData.w) - imgWidth - δ),\r\n        heightDiff2 = (-offsetY + modalData.h) > minHeight\r\n          ? (stageData.h - imgHeight - offsetY + δ)\r\n          : (minHeight - (modalData.h - stageData.h) - imgHeight + δ);\r\n\r\n      // Get image position in dragging\r\n      let imgLeft = (widthDiff > 0\r\n        ? $(image).position().left\r\n        : ($(image).position().left < 0\r\n          ? $(image).position().left\r\n          : 0)) - δ,\r\n        imgTop = (heightDiff > 0\r\n          ? $(image).position().top\r\n          : ($(image).position().top < 0\r\n            ? $(image).position().top\r\n            : 0)) + δ,\r\n\r\n        imgLeft2 = (widthDiff2 > 0\r\n          ? $(image).position().left\r\n          : ($(image).position().left < 0\r\n            ? $(image).position().left\r\n            : 0)) - δ,\r\n        imgTop2 = (heightDiff2 > 0\r\n          ? $(image).position().top\r\n          : ($(image).position().top < 0\r\n            ? $(image).position().top\r\n            : 0)) + δ;\r\n\r\n      let opts = {\r\n        'e': {\r\n          left: widthDiff >= -δ\r\n            ? ((widthDiff - δ) / 2 + 'px')\r\n            : (imgLeft > widthDiff\r\n              ? (imgLeft + 'px')\r\n              : (widthDiff + 'px'))\r\n        },\r\n        's': {\r\n          top: heightDiff >= δ\r\n            ? ((heightDiff + δ) / 2 + 'px')\r\n            : (imgTop > heightDiff\r\n              ? (imgTop + 'px')\r\n              : (heightDiff + 'px'))\r\n        },\r\n        'se': {\r\n          top: heightDiff >= δ\r\n            ? ((heightDiff + δ) / 2 + 'px')\r\n            : (imgTop > heightDiff\r\n              ? (imgTop + 'px')\r\n              : (heightDiff + 'px')),\r\n          left: widthDiff >= -δ\r\n            ? ((widthDiff - δ) / 2 + 'px')\r\n            : (imgLeft > widthDiff\r\n              ? (imgLeft + 'px')\r\n              : (widthDiff + 'px'))\r\n        },\r\n        'w': {\r\n          left: widthDiff2 >= -δ\r\n            ? ((widthDiff2 - δ) / 2 + 'px')\r\n            : (imgLeft2 > widthDiff2\r\n              ? (imgLeft2 + 'px')\r\n              : (widthDiff2 + 'px'))\r\n        },\r\n        'n': {\r\n          top: heightDiff2 >= δ\r\n            ? ((heightDiff2 + δ) / 2 + 'px')\r\n            : (imgTop2 > heightDiff2\r\n              ? (imgTop2 + 'px')\r\n              : (heightDiff2 + 'px'))\r\n        },\r\n        'nw': {\r\n          top: heightDiff2 >= δ\r\n            ? ((heightDiff2 + δ) / 2 + 'px')\r\n            : (imgTop2 > heightDiff2\r\n              ? (imgTop2 + 'px')\r\n              : (heightDiff2 + 'px')),\r\n          left: widthDiff2 >= -δ\r\n            ? ((widthDiff2 - δ) / 2 + 'px')\r\n            : (imgLeft2 > widthDiff2\r\n              ? (imgLeft2 + 'px')\r\n              : (widthDiff2 + 'px'))\r\n        },\r\n        'ne': {\r\n          top: heightDiff2 >= δ\r\n            ? ((heightDiff2 + δ) / 2 + 'px')\r\n            : (imgTop2 > heightDiff2\r\n              ? (imgTop2 + 'px')\r\n              : (heightDiff2 + 'px')),\r\n          left: widthDiff >= -δ\r\n            ? ((widthDiff - δ) / 2 + 'px')\r\n            : (imgLeft > widthDiff\r\n              ? (imgLeft + 'px')\r\n              : (widthDiff + 'px'))\r\n        },\r\n        'sw': {\r\n          top: heightDiff >= δ\r\n            ? ((heightDiff + δ) / 2 + 'px')\r\n            : (imgTop > heightDiff\r\n              ? (imgTop + 'px')\r\n              : (heightDiff + 'px')),\r\n          left: widthDiff2 >= -δ\r\n            ? ((widthDiff2 - δ) / 2 + 'px')\r\n            : (imgLeft2 > widthDiff2\r\n              ? (imgLeft2 + 'px')\r\n              : (widthDiff2 + 'px'))\r\n        }\r\n      };\r\n\r\n      return opts[dir];\r\n    };\r\n\r\n    let dragStart = (dir, e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      isDragging = true;\r\n      PUBLIC_VARS['isResizing'] = true;\r\n\r\n      startX = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageX\r\n        : e.clientX;\r\n      startY = e.type === 'touchstart'\r\n        ? e.targetTouches[0].pageY\r\n        : e.clientY;\r\n\r\n      // Reclac the modal data when mousedown\r\n      modalData = {\r\n        w: $(modal).width(),\r\n        h: $(modal).height(),\r\n        l: $(modal).offset().left,\r\n        t: $(modal).offset().top\r\n      };\r\n\r\n      stageData = {\r\n        w: $(stage).width(),\r\n        h: $(stage).height(),\r\n        l: $(stage).offset().left,\r\n        t: $(stage).offset().top\r\n      };\r\n\r\n      imageData = {\r\n        w: $(image).width(),\r\n        h: $(image).height(),\r\n        l: $(image).position().left,\r\n        t: $(image).position().top\r\n      };\r\n\r\n      // δ is the difference between image width and height\r\n      δ = !this.isRotated\r\n        ? 0\r\n        : (imageData.w - imageData.h) / 2;\r\n      imgWidth = !this.isRotated\r\n        ? imageData.w\r\n        : imageData.h;\r\n      imgHeight = !this.isRotated\r\n        ? imageData.h\r\n        : imageData.w;\r\n\r\n      direction = dir;\r\n\r\n      // Add resizable cursor\r\n      $(ELEMS_WITH_RESIZE_CURSOR).css('cursor', dir + '-resize');\r\n\r\n      $D.on(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .on(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n    };\r\n\r\n    let dragMove = (e) => {\r\n\r\n      e = e || window.event;\r\n\r\n      e.preventDefault();\r\n\r\n      if (isDragging && !this.isMaximized) {\r\n\r\n        let endX = e.type === 'touchmove'\r\n          ? e.targetTouches[0].pageX\r\n          : e.clientX,\r\n          endY = e.type === 'touchmove'\r\n            ? e.targetTouches[0].pageY\r\n            : e.clientY,\r\n\r\n          relativeX = endX - startX,\r\n          relativeY = endY - startY;\r\n\r\n        let modalOpts = getModalOpts(direction, relativeX, relativeY);\r\n\r\n        $(modal).css(modalOpts);\r\n\r\n        let imageOpts = getImageOpts(direction, relativeX, relativeY);\r\n\r\n        $(image).css(imageOpts);\r\n\r\n        this.isDoResize = true;\r\n\r\n      }\r\n\r\n    };\r\n\r\n    let dragEnd = () => {\r\n\r\n      $D.off(TOUCH_MOVE_EVENT + EVENT_NS, dragMove)\r\n        .off(TOUCH_END_EVENT + EVENT_NS, dragEnd);\r\n\r\n      // Set grab cursor\r\n      if (PUBLIC_VARS['isResizing']) {\r\n        setGrabCursor(\r\n          {\r\n            w: imgWidth,\r\n            h: imgHeight\r\n          },\r\n          {\r\n            w: $(stage).width(),\r\n            h: $(stage).height()\r\n          },\r\n          stage\r\n        );\r\n      }\r\n\r\n      isDragging = false;\r\n      PUBLIC_VARS['isResizing'] = false;\r\n\r\n      // Remove resizable cursor\r\n      $(ELEMS_WITH_RESIZE_CURSOR).css('cursor', '');\r\n\r\n      // Update image initial data\r\n      let scale = this.getImageScaleToStage(\r\n        $(stage).width(),\r\n        $(stage).height()\r\n      );\r\n\r\n      $.extend(this.imageData, {\r\n        initWidth: this.img.width * scale,\r\n        initHeight: this.img.height * scale,\r\n        initLeft: ($(stage).width() - this.img.width * scale) / 2,\r\n        initTop: ($(stage).height() - this.img.height * scale) / 2\r\n      });\r\n\r\n    };\r\n\r\n    $.each(resizableHandles, function (dir, handle) {\r\n      handle.on(TOUCH_START_EVENT + EVENT_NS, function (e) {\r\n        dragStart(dir, e);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n}\r\n","import $ from './domq/index';\r\nimport DEFAULTS from './defaults';\r\nimport {\r\n  $W,\r\n  $D,\r\n  CLICK_EVENT,\r\n  RESIZE_EVENT,\r\n  KEYDOWN_EVENT,\r\n  WHEEL_EVENT,\r\n  NS,\r\n  CLASS_NS,\r\n  EVENT_NS,\r\n  PUBLIC_VARS\r\n} from './constants';\r\n\r\nimport {\r\n  getImgSrc,\r\n  throttle,\r\n  preloadImg,\r\n  requestFullscreen,\r\n  getImageNameFromUrl,\r\n  getNumFromCSSValue,\r\n  hasScrollbar,\r\n  getScrollbarWidth,\r\n  setGrabCursor,\r\n  fadeIn\r\n} from './utilities';\r\n\r\nimport draggable from './draggable';\r\nimport movable from './movable';\r\nimport resizable from './resizable';\r\n\r\n/**\r\n * PhotoViewer Class\r\n */\r\nclass PhotoViewer {\r\n\r\n  constructor(items, options, el) {\r\n\r\n    this.options = $.extend(true, {}, DEFAULTS, options);\r\n\r\n    if (options && $.isArray(options.footToolbar)) {\r\n      this.options.footToolbar = options.footToolbar;\r\n    }\r\n\r\n    if (options && $.isArray(options.headToolbar)) {\r\n      this.options.headToolbar = options.headToolbar;\r\n    }\r\n\r\n    // Store element of clicked\r\n    this.$el = $(el);\r\n\r\n    // As we have multiple instances,\r\n    // so every instance has following variables.\r\n\r\n    // modal open flag\r\n    this.isOpened = false;\r\n    // modal maximize flag\r\n    this.isMaximized = false;\r\n    // image rotate 90*(2n+1) flag\r\n    this.isRotated = false;\r\n    // image rotate angle\r\n    this.rotateAngle = 0;\r\n\r\n    // if modal do resize\r\n    this.isDoResize = false;\r\n\r\n    // Store image data in every instance\r\n    this.imageData = {};\r\n    // Store modal data in every instance\r\n    this.modalData = {\r\n      width: null,\r\n      height: null,\r\n      left: null,\r\n      top: null\r\n    };\r\n\r\n    this.init(items, this.options, el);\r\n\r\n  }\r\n\r\n  init(items, opts, el) {\r\n\r\n    this.groupData = items;\r\n    this.groupIndex = opts['index'];\r\n\r\n    // Get image src\r\n    let imgSrc = items[this.groupIndex]['src'];\r\n\r\n    this.open();\r\n\r\n    this.loadImg(imgSrc);\r\n\r\n    // draggable & movable & resizable\r\n    if (opts.draggable) {\r\n      this.draggable(this.$photoviewer, this.dragHandle, CLASS_NS + '-button');\r\n    }\r\n    if (opts.movable) {\r\n      this.movable(this.$stage, this.$image);\r\n    }\r\n    if (opts.resizable) {\r\n      this.resizable(\r\n        this.$photoviewer,\r\n        this.$stage,\r\n        this.$image,\r\n        opts.modalWidth,\r\n        opts.modalHeight\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  _creatBtns(toolbar, btns) {\r\n\r\n    let btnsStr = '';\r\n\r\n    $.each(toolbar, function (index, item) {\r\n      btnsStr += btns[item];\r\n    });\r\n\r\n    return btnsStr;\r\n\r\n  }\r\n\r\n  _creatTitle() {\r\n    return (this.options.title ? `<div class=\"${NS}-title\"></div>` : '');\r\n  }\r\n\r\n  _creatDOM() {\r\n\r\n    let btnsTpl = {\r\n      minimize: `<button class=\"${NS}-button ${NS}-button-minimize\"\r\n                  title=\"${this.options.i18n.minimize}\">\r\n                    ${this.options.icons.minimize}\r\n                  </button>`,\r\n      maximize: `<button class=\"${NS}-button ${NS}-button-maximize\"\r\n                  title=\"${this.options.i18n.maximize}\">\r\n                    ${this.options.icons.maximize}\r\n                  </button>`,\r\n      close: `<button class=\"${NS}-button ${NS}-button-close\"\r\n              title=\"${this.options.i18n.close}\">\r\n                ${this.options.icons.close}\r\n              </button>`,\r\n      zoomIn: `<button class=\"${NS}-button ${NS}-button-zoom-in\"\r\n                title=\"${this.options.i18n.zoomIn}\">\r\n                  ${this.options.icons.zoomIn}\r\n                </button>`,\r\n      zoomOut: `<button class=\"${NS}-button ${NS}-button-zoom-out\"\r\n                title=\"${this.options.i18n.zoomOut}\">\r\n                  ${this.options.icons.zoomOut}\r\n                </button>`,\r\n      prev: `<button class=\"${NS}-button ${NS}-button-prev\"\r\n              title=\"${this.options.i18n.prev}\">\r\n                ${this.options.icons.prev}\r\n              </button>`,\r\n      next: `<button class=\"${NS}-button ${NS}-button-next\"\r\n              title=\"${this.options.i18n.next}\">\r\n                ${this.options.icons.next}\r\n              </button>`,\r\n      fullscreen: `<button class=\"${NS}-button ${NS}-button-fullscreen\"\r\n                    title=\"${this.options.i18n.fullscreen}\">\r\n                    ${this.options.icons.fullscreen}\r\n                  </button>`,\r\n      actualSize: `<button class=\"${NS}-button ${NS}-button-actual-size\"\r\n                    title=\"${this.options.i18n.actualSize}\">\r\n                      ${this.options.icons.actualSize}\r\n                    </button>`,\r\n      rotateLeft: `<button class=\"${NS}-button ${NS}-button-rotate-left\"\r\n                    title=\"${this.options.i18n.rotateLeft}\">\r\n                      ${this.options.icons.rotateLeft}\r\n                    </button>`,\r\n      rotateRight: `<button class=\"${NS}-button ${NS}-button-rotate-right\"\r\n                      title=\"${this.options.i18n.rotateRight}\">\r\n                      ${this.options.icons.rotateRight}\r\n                    </button>`\r\n    };\r\n\r\n    // photoviewer base HTML\r\n    let photoviewerHTML =\r\n      `<div class=\"${NS}-modal\">\r\n        <div class=\"${NS}-inner\">\r\n          <div class=\"${NS}-header\">\r\n            <div class=\"${NS}-toolbar ${NS}-toolbar-head\">\r\n              ${this._creatBtns(this.options.headToolbar, btnsTpl)}\r\n            </div>\r\n            ${this._creatTitle()}\r\n          </div>\r\n          <div class=\"${NS}-stage\">\r\n            <img class=\"${NS}-image\" src=\"\" alt=\"\" />\r\n          </div>\r\n          <div class=\"${NS}-footer\">\r\n            <div class=\"${NS}-toolbar ${NS}-toolbar-foot\">\r\n              ${this._creatBtns(this.options.footToolbar, btnsTpl)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>`;\r\n\r\n    return photoviewerHTML;\r\n\r\n  }\r\n\r\n  build() {\r\n\r\n    // Create photoviewer HTML string\r\n    let photoviewerHTML = this._creatDOM();\r\n\r\n    // Make photoviewer HTML string to jQuery element\r\n    let $photoviewer = $(photoviewerHTML);\r\n\r\n    // Get all photoviewer element\r\n    this.$photoviewer = $photoviewer;\r\n    this.$header = $photoviewer.find(CLASS_NS + '-header');\r\n    this.$headToolbar = $photoviewer.find(CLASS_NS + '-toolbar-head');\r\n    this.$footer = $photoviewer.find(CLASS_NS + '-footer');\r\n    this.$footToolbar = $photoviewer.find(CLASS_NS + '-toolbar-foot');\r\n    this.$stage = $photoviewer.find(CLASS_NS + '-stage');\r\n    this.$title = $photoviewer.find(CLASS_NS + '-title');\r\n    this.$image = $photoviewer.find(CLASS_NS + '-image');\r\n    this.$close = $photoviewer.find(CLASS_NS + '-button-close');\r\n    this.$maximize = $photoviewer.find(CLASS_NS + '-button-maximize');\r\n    this.$minimize = $photoviewer.find(CLASS_NS + '-button-minimize');\r\n    this.$zoomIn = $photoviewer.find(CLASS_NS + '-button-zoom-in');\r\n    this.$zoomOut = $photoviewer.find(CLASS_NS + '-button-zoom-out');\r\n    this.$actualSize = $photoviewer.find(CLASS_NS + '-button-actual-size');\r\n    this.$fullscreen = $photoviewer.find(CLASS_NS + '-button-fullscreen');\r\n    this.$rotateLeft = $photoviewer.find(CLASS_NS + '-button-rotate-left');\r\n    this.$rotateRight = $photoviewer.find(CLASS_NS + '-button-rotate-right');\r\n    this.$prev = $photoviewer.find(CLASS_NS + '-button-prev');\r\n    this.$next = $photoviewer.find(CLASS_NS + '-button-next');\r\n\r\n    // Add class before image loaded\r\n    this.$stage.addClass('stage-ready');\r\n    this.$image.addClass('image-ready');\r\n\r\n    // Reset modal z-index with multiple instances\r\n    this.$photoviewer.css('z-index', PUBLIC_VARS['zIndex']);\r\n\r\n    // Set handle element of draggable\r\n    if (!this.options.dragHandle || this.options.dragHandle === CLASS_NS + '-modal') {\r\n      this.dragHandle = this.$photoviewer;\r\n    } else {\r\n      this.dragHandle = this.$photoviewer.find(this.options.dragHandle);\r\n    }\r\n\r\n  }\r\n\r\n  open() {\r\n\r\n    if (!this.options.multiInstances) {\r\n      $(CLASS_NS + '-modal').eq(0).remove();\r\n    }\r\n\r\n    // Fixed modal position bug\r\n    if (!$(CLASS_NS + '-modal').length && this.options.fixedContent) {\r\n\r\n      $('html').css({ 'overflow': 'hidden' });\r\n\r\n      if (hasScrollbar()) {\r\n        let scrollbarWidth = getScrollbarWidth();\r\n        if (scrollbarWidth) {\r\n          $('html').css({ 'padding-right': scrollbarWidth });\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    this.build();\r\n\r\n    this._triggerHook('beforeOpen', this.$el);\r\n\r\n    // Add PhotoViewer to DOM\r\n    $('body').append(this.$photoviewer);\r\n\r\n    this.addEvents();\r\n\r\n    this.setModalPos(this.$photoviewer);\r\n\r\n    this._triggerHook('opened', this.$el);\r\n\r\n  }\r\n\r\n  close() {\r\n\r\n    this._triggerHook('beforeClose', this.$el);\r\n\r\n    // Remove instance\r\n    this.$photoviewer.remove();\r\n\r\n    this.isOpened = false;\r\n    this.isMaximized = false;\r\n    this.isRotated = false;\r\n    this.rotateAngle = 0;\r\n\r\n    let zeroModal = !$(CLASS_NS + '-modal').length;\r\n\r\n    // Fixed modal position bug\r\n    if (zeroModal && this.options.fixedContent) {\r\n      $('html').css({ 'overflow': '', 'padding-right': '' });\r\n    }\r\n\r\n    // Reset zIndex after close\r\n    if (zeroModal && this.options.multiInstances) {\r\n      PUBLIC_VARS['zIndex'] = this.options.zIndex;\r\n    }\r\n\r\n    // off events\r\n    if (!$(CLASS_NS + '-modal').length) {\r\n      $D.off(KEYDOWN_EVENT + EVENT_NS);\r\n      $W.off(RESIZE_EVENT + EVENT_NS);\r\n    }\r\n\r\n    this._triggerHook('closed', this.$el);\r\n\r\n  }\r\n\r\n  setModalPos(modal) {\r\n\r\n    let winWidth = $W.width(),\r\n      winHeight = $W.height(),\r\n      scrollLeft = document.documentElement.scrollLeft,\r\n      scrollTop = document.documentElement.scrollTop;\r\n\r\n    let modalWidth = this.options.modalWidth,\r\n      modalHeight = this.options.modalHeight;\r\n\r\n    // Set modal maximized when init\r\n    if (this.options.initMaximized) {\r\n\r\n      modal.addClass(NS + '-maximize');\r\n\r\n      modal.css({\r\n        width: '100%',\r\n        height: '100%',\r\n        left: 0,\r\n        top: 0\r\n      });\r\n\r\n      this.isOpened = true;\r\n      this.isMaximized = true;\r\n\r\n    } else {\r\n\r\n      // Make the modal in windows center\r\n      modal.css({\r\n        width: modalWidth,\r\n        height: modalHeight,\r\n        left: (winWidth - modalWidth) / 2 + scrollLeft + 'px',\r\n        top: (winHeight - modalHeight) / 2 + scrollTop + 'px'\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  setModalSize(img) {\r\n\r\n    let winWidth = $W.width(),\r\n      winHeight = $W.height(),\r\n      scrollLeft = document.documentElement.scrollLeft,\r\n      scrollTop = document.documentElement.scrollTop;\r\n\r\n    // stage css value\r\n    let stageCSS = {\r\n      left: this.$stage.css('left'),\r\n      right: this.$stage.css('right'),\r\n      top: this.$stage.css('top'),\r\n      bottom: this.$stage.css('bottom'),\r\n      borderLeft: this.$stage.css('border-left-width'),\r\n      borderRight: this.$stage.css('border-right-width'),\r\n      borderTop: this.$stage.css('border-top-width'),\r\n      borderBottom: this.$stage.css('border-bottom-width')\r\n    };\r\n\r\n    // Modal size should calc with stage css value\r\n    let modalWidth = img.width +\r\n      getNumFromCSSValue(stageCSS.left) +\r\n      getNumFromCSSValue(stageCSS.right) +\r\n      getNumFromCSSValue(stageCSS.borderLeft) +\r\n      getNumFromCSSValue(stageCSS.borderRight),\r\n      modalHeight = img.height +\r\n        getNumFromCSSValue(stageCSS.top) +\r\n        getNumFromCSSValue(stageCSS.bottom) +\r\n        getNumFromCSSValue(stageCSS.borderTop) +\r\n        getNumFromCSSValue(stageCSS.borderBottom);\r\n\r\n    let gapThreshold = (this.options.gapThreshold > 0 ? this.options.gapThreshold : 0) + 1,\r\n      // modal scale to window\r\n      scale = Math.min(\r\n        winWidth / (modalWidth * gapThreshold),\r\n        winHeight / (modalHeight * gapThreshold),\r\n        1\r\n      );\r\n\r\n    let minWidth = Math.max(modalWidth * scale, this.options.modalWidth),\r\n      minHeight = Math.max(modalHeight * scale, this.options.modalHeight);\r\n\r\n    minWidth = this.options.fixedModalSize\r\n      ? this.options.modalWidth\r\n      : Math.round(minWidth);\r\n    minHeight = this.options.fixedModalSize\r\n      ? this.options.modalHeight\r\n      : Math.round(minHeight);\r\n\r\n    let modalCSSObj = {\r\n      width: minWidth + 'px',\r\n      height: minHeight + 'px',\r\n      left: (winWidth - minWidth) / 2 + scrollLeft + 'px',\r\n      top: (winHeight - minHeight) / 2 + scrollTop + 'px'\r\n    };\r\n\r\n    // Add modal init animation\r\n    if (this.options.initAnimation) {\r\n      this.$photoviewer.animate(modalCSSObj, () => {\r\n        this.setImageSize(img);\r\n      }, 300, 'ease-in-out');\r\n    } else {\r\n      this.$photoviewer.css(modalCSSObj);\r\n      this.setImageSize(img);\r\n    }\r\n\r\n    this.isOpened = true;\r\n\r\n  }\r\n\r\n  getImageScaleToStage(stageWidth, stageHeight) {\r\n\r\n    var scale = 1;\r\n\r\n    if (!this.isRotated) {\r\n      scale = Math.min(stageWidth / this.img.width, stageHeight / this.img.height, 1);\r\n    } else {\r\n      scale = Math.min(stageWidth / this.img.height, stageHeight / this.img.width, 1);\r\n    }\r\n\r\n    return scale;\r\n  }\r\n\r\n  setImageSize(img) {\r\n\r\n    let stageData = {\r\n      w: this.$stage.width(),\r\n      h: this.$stage.height()\r\n    };\r\n\r\n    let scale = this.getImageScaleToStage(\r\n      stageData.w,\r\n      stageData.h\r\n    );\r\n\r\n    this.$image.css({\r\n      width: Math.ceil(img.width * scale) + 'px',\r\n      height: Math.ceil(img.height * scale) + 'px',\r\n      left: (stageData.w - Math.ceil(img.width * scale)) / 2 + 'px',\r\n      top: (stageData.h - Math.ceil(img.height * scale)) / 2 + 'px'\r\n    });\r\n\r\n    // Store image initial data\r\n    $.extend(this.imageData, {\r\n      initWidth: img.width * scale,\r\n      initHeight: img.height * scale,\r\n      initLeft: (stageData.w - img.width * scale) / 2,\r\n      initTop: (stageData.h - img.height * scale) / 2,\r\n      width: img.width * scale,\r\n      height: img.height * scale,\r\n      left: (stageData.w - img.width * scale) / 2,\r\n      top: (stageData.h - img.height * scale) / 2\r\n    });\r\n\r\n    // Set grab cursor\r\n    setGrabCursor(\r\n      {\r\n        w: this.$image.width(),\r\n        h: this.$image.height()\r\n      },\r\n      {\r\n        w: this.$stage.width(),\r\n        h: this.$stage.height()\r\n      },\r\n      this.$stage,\r\n      this.isRotated\r\n    );\r\n\r\n    this.$stage.removeClass('stage-ready');\r\n    this.$image.removeClass('image-ready');\r\n\r\n    // loader end\r\n    this.$photoviewer.find(CLASS_NS + '-loader').remove();\r\n\r\n    // Add image init animation\r\n    if (\r\n      this.options.initAnimation\r\n      && !this.options.progressiveLoading\r\n      && this.$image.css('display') === 'none'\r\n    ) {\r\n      this.$image.fadeIn();\r\n    }\r\n\r\n  }\r\n\r\n  loadImg(imgSrc, fn, err) {\r\n\r\n    let loaderHTML = `<div class=\"${NS}-loader\"></div>`;\r\n\r\n    // loader start\r\n    this.$photoviewer.append(loaderHTML);\r\n\r\n    // Add class before image loaded\r\n    this.$stage.addClass('stage-ready');\r\n    this.$image.addClass('image-ready');\r\n\r\n    // Reset image\r\n    this.$image.removeAttr('style').attr('src', '');\r\n    this.isRotated = false;\r\n    this.rotateAngle = 0;\r\n\r\n    if (this.options.initAnimation && !this.options.progressiveLoading) {\r\n      this.$image.hide();\r\n    }\r\n\r\n    this.$image.attr('src', imgSrc);\r\n\r\n    preloadImg(imgSrc, (img) => {\r\n      // Store HTMLImageElement\r\n      this.img = img;\r\n\r\n      // Store original data\r\n      this.imageData = {\r\n        originalWidth: img.width,\r\n        originalHeight: img.height\r\n      };\r\n\r\n      if (this.isMaximized || (this.isOpened && this.options.fixedModalPos)) {\r\n        this.setImageSize(img);\r\n      } else {\r\n        this.setModalSize(img);\r\n      }\r\n\r\n      // callback of image loaded successfully\r\n      if (fn) {\r\n        fn.call();\r\n      }\r\n\r\n    }, () => {\r\n      // loader end\r\n      this.$photoviewer.find(CLASS_NS + '-loader').remove();\r\n\r\n      // callback of image loading failed\r\n      if (err) {\r\n        err.call();\r\n      }\r\n    });\r\n\r\n    if (this.options.title) {\r\n      this.setImgTitle(imgSrc);\r\n    }\r\n\r\n  }\r\n\r\n  setImgTitle(url) {\r\n\r\n    let title = this.groupData[this.groupIndex].title\r\n      ? this.groupData[this.groupIndex].title\r\n      : getImageNameFromUrl(url);\r\n\r\n    this.$title.html(title);\r\n\r\n  }\r\n\r\n  jump(step) {\r\n\r\n    this._triggerHook('beforeChange', this.groupIndex);\r\n\r\n    this.groupIndex = this.groupIndex + step;\r\n\r\n    this.jumpTo(this.groupIndex);\r\n\r\n  }\r\n\r\n  jumpTo(index) {\r\n\r\n    index = index % this.groupData.length;\r\n\r\n    if (index >= 0) {\r\n      index = index % this.groupData.length;\r\n    } else if (index < 0) {\r\n      index = (this.groupData.length + index) % this.groupData.length;\r\n    }\r\n\r\n    this.groupIndex = index;\r\n\r\n    this.loadImg(this.groupData[index].src, () => {\r\n      this._triggerHook('changed', index);\r\n    }, () => {\r\n      this._triggerHook('changed', index);\r\n    });\r\n\r\n  }\r\n\r\n  wheel(e) {\r\n\r\n    e.preventDefault();\r\n\r\n    let delta = 1;\r\n\r\n    if (e.deltaY) {\r\n      delta = e.deltaY > 0 ? 1 : -1;\r\n    } else if (e.wheelDelta) {\r\n      delta = -e.wheelDelta / 120;\r\n    } else if (e.detail) {\r\n      delta = e.detail > 0 ? 1 : -1;\r\n    }\r\n\r\n    // ratio threshold\r\n    let ratio = -delta * this.options.ratioThreshold;\r\n\r\n    // mouse point position relative to stage\r\n    let pointer = {\r\n      x: e.clientX - this.$stage.offset().left + document.documentElement.scrollLeft,\r\n      y: e.clientY - this.$stage.offset().top + document.documentElement.scrollTop\r\n    };\r\n\r\n    this.zoom(ratio, pointer, e);\r\n\r\n  }\r\n\r\n  zoom(ratio, origin, e) {\r\n\r\n    // zoom out ratio & zoom in ratio\r\n    ratio = ratio < 0 ? (1 / (1 - ratio)) : (1 + ratio);\r\n\r\n    // image ratio\r\n    ratio = this.$image.width() / this.imageData.originalWidth * ratio;\r\n\r\n    // Fixed digital error\r\n    // if (ratio > 0.95 && ratio < 1.05) {\r\n    //   ratio = 1;\r\n    // }\r\n\r\n    if (ratio > this.options.maxRatio || ratio < this.options.minRatio) {\r\n      return;\r\n    }\r\n\r\n    this.zoomTo(ratio, origin, e);\r\n\r\n  }\r\n\r\n  zoomTo(ratio, origin, e) {\r\n\r\n    let $image = this.$image,\r\n      $stage = this.$stage,\r\n      imgData = {\r\n        w: this.imageData.width,\r\n        h: this.imageData.height,\r\n        x: this.imageData.left,\r\n        y: this.imageData.top\r\n      };\r\n\r\n    // image stage position\r\n    // We will use it to calc the relative position of image\r\n    let stageData = {\r\n      w: $stage.width(),\r\n      h: $stage.height(),\r\n      x: $stage.offset().left,\r\n      y: $stage.offset().top\r\n    };\r\n\r\n    let newWidth = this.imageData.originalWidth * ratio,\r\n      newHeight = this.imageData.originalHeight * ratio,\r\n      // Think about it for a while\r\n      newLeft = origin.x - (origin.x - imgData.x) / imgData.w * newWidth,\r\n      newTop = origin.y - (origin.y - imgData.y) / imgData.h * newHeight;\r\n\r\n    // δ is the difference between image new width and new height\r\n    let δ = !this.isRotated ? 0 : (newWidth - newHeight) / 2,\r\n      imgNewWidth = !this.isRotated ? newWidth : newHeight,\r\n      imgNewHeight = !this.isRotated ? newHeight : newWidth;\r\n\r\n    let offsetX = stageData.w - newWidth,\r\n      offsetY = stageData.h - newHeight;\r\n\r\n    // zoom out & zoom in condition\r\n    // It's important and it takes me a lot of time to get it\r\n    // The conditions with image rotate 90 degree drive me crazy alomst!\r\n    if (imgNewHeight <= stageData.h) {\r\n      newTop = (stageData.h - newHeight) / 2;\r\n    } else {\r\n      newTop = newTop > δ\r\n        ? δ\r\n        : (newTop > (offsetY - δ)\r\n          ? newTop\r\n          : (offsetY - δ));\r\n    }\r\n\r\n    if (imgNewWidth <= stageData.w) {\r\n      newLeft = (stageData.w - newWidth) / 2;\r\n    } else {\r\n      newLeft = newLeft > -δ\r\n        ? -δ\r\n        : (newLeft > (offsetX + δ)\r\n          ? newLeft\r\n          : (offsetX + δ));\r\n    }\r\n\r\n    // if the image scale get to the critical point\r\n    if (Math.abs(this.imageData.initWidth - newWidth) < this.imageData.initWidth * 0.05) {\r\n      this.setImageSize(this.img);\r\n    } else {\r\n      $image.css({\r\n        width: Math.round(newWidth) + 'px',\r\n        height: Math.round(newHeight) + 'px',\r\n        left: Math.round(newLeft) + 'px',\r\n        top: Math.round(newTop) + 'px'\r\n      });\r\n\r\n      // Set grab cursor\r\n      setGrabCursor(\r\n        {\r\n          w: Math.round(imgNewWidth),\r\n          h: Math.round(imgNewHeight)\r\n        },\r\n        {\r\n          w: stageData.w,\r\n          h: stageData.h\r\n        },\r\n        this.$stage\r\n      );\r\n    }\r\n\r\n\r\n    // Update image initial data\r\n    $.extend(this.imageData, {\r\n      width: newWidth,\r\n      height: newHeight,\r\n      left: newLeft,\r\n      top: newTop\r\n    });\r\n\r\n  }\r\n\r\n  rotate(angle) {\r\n\r\n    this.rotateAngle = this.rotateAngle + angle;\r\n\r\n    if ((this.rotateAngle / 90) % 2 === 0) {\r\n      this.isRotated = false;\r\n    } else {\r\n      this.isRotated = true;\r\n    }\r\n\r\n    this.rotateTo(this.rotateAngle);\r\n\r\n  }\r\n\r\n  rotateTo(angle) {\r\n\r\n    this.$image.css({\r\n      transform: 'rotate(' + angle + 'deg)'\r\n    });\r\n\r\n    this.setImageSize({\r\n      width: this.imageData.originalWidth,\r\n      height: this.imageData.originalHeight\r\n    });\r\n\r\n    // Remove grab cursor when rotate\r\n    this.$stage.removeClass('is-grab');\r\n\r\n  }\r\n\r\n  resize() {\r\n\r\n    let resizeHandler = throttle(() => {\r\n\r\n      if (this.isOpened) {\r\n        if (this.isMaximized) {\r\n          this.setImageSize({\r\n            width: this.imageData.originalWidth,\r\n            height: this.imageData.originalHeight\r\n          });\r\n        } else {\r\n          this.setModalSize({\r\n            width: this.imageData.originalWidth,\r\n            height: this.imageData.originalHeight\r\n          });\r\n        }\r\n      }\r\n\r\n    }, 500);\r\n\r\n    return resizeHandler;\r\n\r\n  }\r\n\r\n  maximize() {\r\n\r\n    if (!this.isMaximized) {\r\n      // Store modal data before maximize\r\n      this.modalData = {\r\n        width: this.$photoviewer.width(),\r\n        height: this.$photoviewer.height(),\r\n        left: this.$photoviewer.offset().left,\r\n        top: this.$photoviewer.offset().top\r\n      };\r\n\r\n      this.$photoviewer.addClass(NS + '-maximize');\r\n\r\n      this.$photoviewer.css({\r\n        width: '100%',\r\n        height: '100%',\r\n        left: 0,\r\n        top: 0\r\n      });\r\n\r\n      this.isMaximized = true;\r\n\r\n    } else {\r\n\r\n      this.$photoviewer.removeClass(NS + '-maximize');\r\n\r\n      this.$photoviewer.css({\r\n        width: this.modalData.width\r\n          ? this.modalData.width\r\n          : this.options.modalWidth,\r\n        height: this.modalData.height\r\n          ? this.modalData.height\r\n          : this.options.modalHeight,\r\n        left: this.modalData.left\r\n          ? this.modalData.left\r\n          : ($W.width() - this.options.modalWidth) / 2 + document.documentElement.scrollLeft,\r\n        top: this.modalData.top\r\n          ? this.modalData.top\r\n          : ($W.height() - this.options.modalHeight) / 2 + document.documentElement.scrollTop\r\n      });\r\n\r\n      this.isMaximized = false;\r\n    }\r\n\r\n    this.setImageSize({\r\n      width: this.imageData.originalWidth,\r\n      height: this.imageData.originalHeight\r\n    });\r\n\r\n  }\r\n\r\n  fullscreen() {\r\n\r\n    requestFullscreen(this.$photoviewer[0]);\r\n\r\n  }\r\n\r\n  keydown(e) {\r\n\r\n    if (!this.options.keyboard) {\r\n      return false;\r\n    }\r\n\r\n    let keyCode = e.keyCode || e.which || e.charCode,\r\n      ctrlKey = e.ctrlKey || e.metaKey,\r\n      altKey = e.altKey || e.metaKey;\r\n\r\n    switch (keyCode) {\r\n      // ←\r\n      case 37:\r\n        this.jump(-1);\r\n        break;\r\n      // →\r\n      case 39:\r\n        this.jump(1);\r\n        break;\r\n      // +\r\n      case 187:\r\n        this.zoom(\r\n          this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // -\r\n      case 189:\r\n        this.zoom(\r\n          -this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // + Firefox\r\n      case 61:\r\n        this.zoom(\r\n          this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // - Firefox\r\n      case 173:\r\n        this.zoom(\r\n          -this.options.ratioThreshold * 3,\r\n          { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n          e\r\n        );\r\n        break;\r\n      // ctrl + alt + 0\r\n      case 48:\r\n        if (ctrlKey && altKey) {\r\n          this.zoomTo(\r\n            1,\r\n            { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n            e\r\n          );\r\n        }\r\n        break;\r\n      // ctrl + ,\r\n      case 188:\r\n        if (ctrlKey) {\r\n          this.rotate(-90);\r\n        }\r\n        break;\r\n      // ctrl + .\r\n      case 190:\r\n        if (ctrlKey) {\r\n          this.rotate(90);\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n\r\n  }\r\n\r\n  addEvents() {\r\n\r\n    this.$close.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.close();\r\n    });\r\n\r\n    this.$stage.off(WHEEL_EVENT + EVENT_NS).on(WHEEL_EVENT + EVENT_NS, (e) => {\r\n      this.wheel(e);\r\n    });\r\n\r\n    this.$zoomIn.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.zoom(\r\n        this.options.ratioThreshold * 3,\r\n        { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n        e\r\n      );\r\n    });\r\n\r\n    this.$zoomOut.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.zoom(\r\n        -this.options.ratioThreshold * 3,\r\n        { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n        e\r\n      );\r\n    });\r\n\r\n    this.$actualSize.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, (e) => {\r\n      this.zoomTo(\r\n        1,\r\n        { x: this.$stage.width() / 2, y: this.$stage.height() / 2 },\r\n        e\r\n      );\r\n    });\r\n\r\n    this.$prev.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.jump(-1);\r\n    });\r\n\r\n    this.$fullscreen.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.fullscreen();\r\n    });\r\n\r\n    this.$next.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.jump(1);\r\n    });\r\n\r\n    this.$rotateLeft.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.rotate(-90);\r\n    });\r\n\r\n    this.$rotateRight.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.rotate(90);\r\n    });\r\n\r\n    this.$maximize.off(CLICK_EVENT + EVENT_NS).on(CLICK_EVENT + EVENT_NS, () => {\r\n      this.maximize();\r\n    });\r\n\r\n    $D.off(KEYDOWN_EVENT + EVENT_NS).on(KEYDOWN_EVENT + EVENT_NS, (e) => {\r\n      this.keydown(e);\r\n    });\r\n\r\n    $W.on(RESIZE_EVENT + EVENT_NS, this.resize());\r\n\r\n  }\r\n\r\n  _triggerHook(e, data) {\r\n    if (this.options.callbacks[e]) {\r\n      this.options.callbacks[e].apply(this, $.isArray(data) ? data : [data]);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * Add methods to PhotoViewer\r\n */\r\n$.extend(PhotoViewer.prototype, draggable, movable, resizable);\r\n\r\n/**\r\n * Add PhotoViewer to globle\r\n */\r\nwindow.PhotoViewer = PhotoViewer;\r\n\r\nexport default PhotoViewer;\r\n"],"names":["D","selector","context","fn","init","emptyArray","concat","filter","slice","document","window","elementDisplay","classCache","cssNumber","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","adjacencyOperators","dimensions","table","createElement","tableRow","containers","simpleSelectorRE","class2type","toString","tempParent","propMap","isArray","Array","arg","Object","prototype","call","type","obj","String","isFunction","value","isWindow","isDocument","nodeType","DOCUMENT_NODE","isObject","isPlainObject","getPrototypeOf","likeArray","length","typeRes","compact","array","item","flatten","apply","dasherize","str","replace","toLowerCase","maybeAddPx","name","uniq","idx","indexOf","camelize","match","chr","toUpperCase","classRE","RegExp","defaultDisplay","nodeName","element","display","body","appendChild","getComputedStyle","getPropertyValue","parentNode","removeChild","children","map","childNodes","node","filtered","nodes","funcArg","payload","setAttribute","removeAttribute","className","klass","svg","baseVal","undefined","constuctor","forEach","reduce","push","sort","splice","dom","trim","test","fragment","$1","find","qsa","ready","isD","makeArray","extend","options","src","copy","copyIsArray","clone","target","arguments","i","deep","camelCase","isEmptyObject","isNumeric","val","num","Number","isNaN","isFinite","inArray","elem","noop","elements","callback","values","key","each","grep","contains","documentElement","parent","me","len","html","properties","container","innerHTML","attr","found","maybeID","maybeClass","nameOnly","isSimple","getElementById","getElementsByClassName","getElementsByTagName","querySelectorAll","object","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","temp","split","args","toArray","pluck","property","el","eq","first","last","get","every","size","index","show","style","hide","css","props","computedStyle","_","prop","removeProperty","cssText","hasClass","some","addClass","classList","cls","newName","join","removeClass","toggleClass","when","$this","names","offset","coordinates","coords","parentOffset","offsetParent","top","left","getBoundingClientRect","pageXOffset","pageYOffset","width","Math","round","height","position","parseFloat","scrollTop","hasScrollTop","scrollTo","scrollX","scrollLeft","hasScrollLeft","scrollY","result","getAttribute","removeAttr","attribute","removeProp","multiple","selected","wrap","structure","func","wrapAll","cloneNode","before","append","wrapInner","self","contents","unwrap","replaceWith","not","has","excludes","is","add","contentDocument","closest","collection","parents","ancestors","siblings","child","prev","next","subtract","dimen","dimension","dimensionProperty","m","remove","empty","originHtml","text","newText","textContent","newContent","traverseNode","operator","operatorIndex","inside","argType","arr","copyByClone","nextSibling","firstChild","parentInDocument","insertBefore","ownerDocument","defaultView","_zid","handlers","specialEvents","click","mousedown","mouseup","mousemove","focusinSupported","focus","blur","hover","mouseenter","mouseleave","ignoreProperties","eventMethods","preventDefault","stopImmediatePropagation","stopPropagation","isString","returnTrue","returnFalse","zid","findHandlers","event","parse","ns","matcher","matcherFor","handler","e","sel","parts","eventCapture","captureSetting","del","realEvent","events","data","delegator","capture","id","set","related","relatedTarget","proxy","compatible","isImmediatePropagationStopped","_args","addEventListener","removeEventListener","source","isDefaultPrevented","predicate","sourceMethod","timeStamp","Date","now","ignored","defaultPrevented","returnValue","getPreventDefault","createProxy","originalEvent","Event","createEvent","bubbles","initEvent","proxyFn","unshift","TypeError","one","on","autoRemove","evt","currentTarget","liveFired","off","trigger","dispatchEvent","triggerHandler","prefix","eventPrefix","vendors","Webkit","Moz","O","testEl","supportedTransforms","transform","transitionProperty","transitionDuration","transitionTiming","transitionDelay","animationName","animationDuration","animationTiming","animationDelay","cssReset","normalizeEvent","vendor","fx","speeds","_default","fast","slow","cssPrefix","transitionEnd","animationEnd","animate","duration","ease","delay","easing","complete","anim","cssValues","cssProperties","transforms","that","wrappedCallback","endEvent","fired","setTimeout","clientLeft","origShow","origHide","origToggle","toggle","speed","opacity","scale","fadeTo","fadeIn","fadeOut","fadeToggle","$","draggable","resizable","movable","keyboard","title","modalWidth","modalHeight","fixedContent","fixedModalSize","initMaximized","gapThreshold","ratioThreshold","minRatio","maxRatio","headToolbar","footToolbar","icons","minimize","maximize","close","zoomIn","zoomOut","fullscreen","actualSize","rotateLeft","rotateRight","i18n","multiInstances","initAnimation","fixedModalPos","zIndex","dragHandle","callbacks","beforeOpen","opened","beforeClose","closed","beforeChange","changed","progressiveLoading","throttle","timer","clearTimeout","preloadImg","success","error","img","Image","onload","onerror","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","getImageNameFromUrl","url","reg","txt","getNumFromCSSValue","hasScrollbar","scrollHeight","innerHeight","clientHeight","getScrollbarWidth","scrollDiv","scrollbarWidth","offsetWidth","clientWidth","setGrabCursor","imageData","stageData","stage","isRotated","imageWidth","w","h","imageHeight","supportTouch","DocumentTouch","$W","$D","CLICK_EVENT","RESIZE_EVENT","KEYDOWN_EVENT","WHEEL_EVENT","TOUCH_START_EVENT","TOUCH_MOVE_EVENT","TOUCH_END_EVENT","NS","CLASS_NS","EVENT_NS","PUBLIC_VARS","isMoving","isResizing","defaults","modal","dragCancel","isDragging","startX","startY","dragStart","elemCancel","targetTouches","pageX","clientX","pageY","clientY","dragMove","dragEnd","isMaximized","endX","endY","relativeX","relativeY","ELEMS_WITH_GRABBING_CURSOR","image","widthDiff","heightDiff","δ","stageWidth","stageHeight","newLeft","newTop","ELEMS_WITH_RESIZE_CURSOR","minWidth","minHeight","resizableHandleE","resizableHandleW","resizableHandleS","resizableHandleN","resizableHandleSE","resizableHandleSW","resizableHandleNE","resizableHandleNW","resizableHandles","modalData","l","t","imgWidth","imgHeight","direction","getModalOpts","dir","offsetX","offsetY","modalLeft","modalTop","opts","max","getImageOpts","widthDiff2","heightDiff2","imgLeft","imgTop","imgLeft2","imgTop2","modalOpts","imageOpts","isDoResize","getImageScaleToStage","initWidth","initHeight","initLeft","initTop","handle","PhotoViewer","items","DEFAULTS","$el","isOpened","rotateAngle","groupData","groupIndex","imgSrc","open","loadImg","$photoviewer","$stage","$image","_creatBtns","toolbar","btns","btnsStr","_creatTitle","_creatDOM","btnsTpl","photoviewerHTML","build","$header","$headToolbar","$footer","$footToolbar","$title","$close","$maximize","$minimize","$zoomIn","$zoomOut","$actualSize","$fullscreen","$rotateLeft","$rotateRight","$prev","$next","_triggerHook","addEvents","setModalPos","zeroModal","winWidth","winHeight","setModalSize","stageCSS","right","bottom","borderLeft","borderRight","borderTop","borderBottom","min","modalCSSObj","setImageSize","ceil","err","loaderHTML","originalWidth","originalHeight","setImgTitle","jump","step","jumpTo","wheel","delta","deltaY","wheelDelta","detail","ratio","pointer","x","y","zoom","origin","zoomTo","imgData","newWidth","newHeight","imgNewWidth","imgNewHeight","abs","rotate","angle","rotateTo","resize","resizeHandler","keydown","keyCode","which","charCode","ctrlKey","metaKey","altKey"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAAA;IACA,IAAIA,CAAC,GAAG,SAAJA,CAAI,CAAUC,QAAV,EAAoBC,OAApB,EAA6B;IACjC,SAAO,IAAIF,CAAC,CAACG,EAAF,CAAKC,IAAT,CAAcH,QAAd,EAAwBC,OAAxB,CAAP;IACH,CAFD;;QCDIG,UAAU,GAAG,EAAjB;IAAA,IACEC,MAAM,GAAGD,UAAU,CAACC,MADtB;IAAA,IAEEC,MAAM,GAAGF,UAAU,CAACE,MAFtB;IAAA,IAGEC,KAAK,GAAGH,UAAU,CAACG,KAHrB;IAAA,IAIEC,UAAQ,GAAGC,MAAM,CAACD,QAJpB;IAAA,IAKEE,cAAc,GAAG,EALnB;IAAA,IAMEC,UAAU,GAAG,EANf;IAAA,IAOEC,SAAS,GAAG;IACV,kBAAgB,CADN;IAEV,aAAW,CAFD;IAGV,iBAAe,CAHL;IAIV,iBAAe,CAJL;IAKV,aAAW,CALD;IAMV,aAAW,CAND;IAOV,UAAQ;IAPE,CAPd;IAAA,IAgBEC,UAAU,GAAG,oBAhBf;IAAA,IAiBEC,WAAW,GAAG,4BAjBhB;IAAA,IAkBEC,aAAa,GAAG,yEAlBlB;IAAA,IAmBEC,UAAU,GAAG,kBAnBf;IAAA,IAoBEC,AAEA;IACAC,gBAAgB,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,MAAf,EAAuB,MAAvB,EAA+B,MAA/B,EAAuC,OAAvC,EAAgD,QAAhD,EAA0D,QAA1D,CAvBrB;IAAA,IAyBEC,kBAAkB,GAAG,CAAC,OAAD,EAAU,SAAV,EAAqB,QAArB,EAA+B,QAA/B,CAzBvB;IAAA,IA0BEC,UAAU,GAAE,CAAC,OAAD,EAAU,QAAV,CA1Bd;IAAA,IA4BEC,KAAK,GAAGb,UAAQ,CAACc,aAAT,CAAuB,OAAvB,CA5BV;IAAA,IA6BEC,QAAQ,GAAGf,UAAQ,CAACc,aAAT,CAAuB,IAAvB,CA7Bb;IAAA,IA8BEE,UAAU,GAAG;IACX,QAAMhB,UAAQ,CAACc,aAAT,CAAuB,OAAvB,CADK;IAEX,WAASD,KAFE;IAGX,WAASA,KAHE;IAIX,WAASA,KAJE;IAKX,QAAME,QALK;IAMX,QAAMA,QANK;IAOX,OAAKf,UAAQ,CAACc,aAAT,CAAuB,KAAvB;IAPM,CA9Bf;IAAA,IAuCEG,gBAAgB,GAAG,UAvCrB;IAAA,IAwCEC,UAAU,GAAG,EAxCf;IAAA,IAyCEC,QAAQ,GAAGD,UAAU,CAACC,QAzCxB;IAAA,IA0CEC,UAAU,GAAGpB,UAAQ,CAACc,aAAT,CAAuB,KAAvB,CA1Cf;IAAA,IA2CEO,OAAO,GAAG;IACR,cAAY,UADJ;IAER,cAAY,UAFJ;IAGR,SAAO,SAHC;IAIR,WAAS,WAJD;IAKR,eAAa,WALL;IAMR,iBAAe,aANP;IAOR,iBAAe,aAPP;IAQR,aAAW,SARH;IASR,aAAW,SATH;IAUR,YAAU,QAVF;IAWR,iBAAe,aAXP;IAYR,qBAAmB;IAZX,CA3CZ;IAAA,IAyDEC,OAAO,GAAGC,KAAK,CAACD,OAAN,IAAiB,UAAUE,GAAV,EAAe;IACxC,SAAOC,MAAM,CAACC,SAAP,CAAiBP,QAAjB,CAA0BQ,IAA1B,CAA+BH,GAA/B,MAAwC,gBAA/C;IACD,CA3DH;;ICYA,SAASI,IAAT,CAAcC,GAAd,EAAmB;IACjB,SAAOA,GAAG,IAAI,IAAP,GACHC,MAAM,CAACD,GAAD,CADH,GAEHX,UAAU,CAACC,QAAQ,CAACQ,IAAT,CAAcE,GAAd,CAAD,CAAV,IAAkC,QAFtC;IAGD;;IAED,SAASE,UAAT,CAAoBC,KAApB,EAA2B;IACzB,SAAOJ,IAAI,CAACI,KAAD,CAAJ,IAAe,UAAtB;IACD;;IAED,SAASC,QAAT,CAAkBJ,GAAlB,EAAuB;IACrB,SAAOA,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAIA,GAAG,CAAC5B,MAAjC;IACD;;IAED,SAASiC,UAAT,CAAoBL,GAApB,EAAyB;IACvB,SAAOA,GAAG,IAAI,IAAP,IAAeA,GAAG,CAACM,QAAJ,IAAgBN,GAAG,CAACO,aAA1C;IACD;;IAED,SAASC,QAAT,CAAkBR,GAAlB,EAAuB;IACrB,SAAOD,IAAI,CAACC,GAAD,CAAJ,IAAa,QAApB;IACD;;IAED,SAASS,aAAT,CAAuBT,GAAvB,EAA4B;IAC1B,SAAOQ,QAAQ,CAACR,GAAD,CAAR,IAAiB,CAACI,QAAQ,CAACJ,GAAD,CAA1B,IAAmCJ,MAAM,CAACc,cAAP,CAAsBV,GAAtB,KAA8BJ,MAAM,CAACC,SAA/E;IACD;;IAED,SAASc,SAAT,CAAmBX,GAAnB,EAAwB;IACtB,MAAIY,MAAM,GAAG,CAAC,CAACZ,GAAF,IAAS,YAAYA,GAArB,IAA4BA,GAAG,CAACY,MAA7C;IAAA,MACEC,OAAO,GAAGd,IAAI,CAACC,GAAD,CADhB;IAGA,SAAO,cAAca,OAAd,IAAyB,CAACT,QAAQ,CAACJ,GAAD,CAAlC,KACL,WAAWa,OAAX,IAAsBD,MAAM,KAAK,CAAjC,IACC,OAAOA,MAAP,IAAiB,QAAjB,IAA6BA,MAAM,GAAG,CAAtC,IAA4CA,MAAM,GAAG,CAAV,IAAgBZ,GAFvD,CAAP;IAID;;IAED,SAASc,OAAT,CAAiBC,KAAjB,EAAwB;IACtB,SAAO9C,MAAM,CAAC6B,IAAP,CAAYiB,KAAZ,EAAmB,UAAUC,IAAV,EAAgB;IACxC,WAAOA,IAAI,IAAI,IAAf;IACD,GAFM,CAAP;IAGD;;IAED,SAASC,OAAT,CAAiBF,KAAjB,EAAwB;IACtB,SAAOA,KAAK,CAACH,MAAN,GAAe,CAAf,GAAmBlD,CAAC,CAACG,EAAF,CAAKG,MAAL,CAAYkD,KAAZ,CAAkB,EAAlB,EAAsBH,KAAtB,CAAnB,GAAkDA,KAAzD;IACD;;IAED,SAASI,SAAT,CAAmBC,GAAnB,EAAwB;IACtB,SAAOA,GAAG,CAACC,OAAJ,CAAY,KAAZ,EAAmB,GAAnB,EACJA,OADI,CACI,uBADJ,EAC6B,OAD7B,EAEJA,OAFI,CAEI,mBAFJ,EAEyB,OAFzB,EAGJA,OAHI,CAGI,IAHJ,EAGU,GAHV,EAIJC,WAJI,EAAP;IAKD;;IAED,SAASC,UAAT,CAAoBC,IAApB,EAA0BrB,KAA1B,EAAiC;IAC/B,SAAQ,OAAOA,KAAP,IAAgB,QAAhB,IAA4B,CAAC5B,SAAS,CAAC4C,SAAS,CAACK,IAAD,CAAV,CAAvC,GAA4DrB,KAAK,GAAG,IAApE,GAA2EA,KAAlF;IACD;;IAED,SAASsB,IAAT,CAAcV,KAAd,EAAqB;IACnB,SAAO9C,MAAM,CAAC6B,IAAP,CAAYiB,KAAZ,EAAmB,UAAUC,IAAV,EAAgBU,GAAhB,EAAqB;IAC7C,WAAOX,KAAK,CAACY,OAAN,CAAcX,IAAd,KAAuBU,GAA9B;IACD,GAFM,CAAP;IAGD;;IAED,SAASE,QAAT,CAAkBR,GAAlB,EAAuB;IACrB,SAAOA,GAAG,CAACC,OAAJ,CAAY,SAAZ,EAAuB,UAAUQ,KAAV,EAAiBC,GAAjB,EAAsB;IAClD,WAAOA,GAAG,GAAGA,GAAG,CAACC,WAAJ,EAAH,GAAuB,EAAjC;IACD,GAFM,CAAP;IAGD;;IAED,SAASC,OAAT,CAAiBR,IAAjB,EAAuB;IACrB,SAAOA,IAAI,IAAIlD,UAAR,GACLA,UAAU,CAACkD,IAAD,CADL,GACelD,UAAU,CAACkD,IAAD,CAAV,GAAmB,IAAIS,MAAJ,CAAW,YAAYT,IAAZ,GAAmB,SAA9B,CADzC;IAED;;IAED,SAASU,gBAAT,CAAwBC,QAAxB,EAAkC;IAChC,MAAIC,OAAJ,EAAaC,OAAb;;IACA,MAAI,CAAChE,cAAc,CAAC8D,QAAD,CAAnB,EAA+B;IAC7BC,IAAAA,OAAO,GAAGjE,UAAQ,CAACc,aAAT,CAAuBkD,QAAvB,CAAV;IACAhE,IAAAA,UAAQ,CAACmE,IAAT,CAAcC,WAAd,CAA0BH,OAA1B;IACAC,IAAAA,OAAO,GAAGG,gBAAgB,CAACJ,OAAD,EAAU,EAAV,CAAhB,CAA8BK,gBAA9B,CAA+C,SAA/C,CAAV;IACAL,IAAAA,OAAO,CAACM,UAAR,CAAmBC,WAAnB,CAA+BP,OAA/B;IACAC,IAAAA,OAAO,IAAI,MAAX,KAAsBA,OAAO,GAAG,OAAhC;IACAhE,IAAAA,cAAc,CAAC8D,QAAD,CAAd,GAA2BE,OAA3B;IACD;;IACD,SAAOhE,cAAc,CAAC8D,QAAD,CAArB;IACD;;IAED,SAASS,QAAT,CAAkBR,OAAlB,EAA2B;IACzB,SAAO,cAAcA,OAAd,GACLlE,KAAK,CAAC4B,IAAN,CAAWsC,OAAO,CAACQ,QAAnB,CADK,GAELlF,CAAC,CAACmF,GAAF,CAAMT,OAAO,CAACU,UAAd,EAA0B,UAAUC,IAAV,EAAgB;IACxC,QAAIA,IAAI,CAACzC,QAAL,IAAiB,CAArB,EAAwB,OAAOyC,IAAP;IACzB,GAFD,CAFF;IAKD;AAGD;IAqBA,SAASC,QAAT,CAAkBC,KAAlB,EAAyBtF,QAAzB,EAAmC;IACjC,SAAOA,QAAQ,IAAI,IAAZ,GAAmBD,CAAC,CAACuF,KAAD,CAApB,GAA8BvF,CAAC,CAACuF,KAAD,CAAD,CAAShF,MAAT,CAAgBN,QAAhB,CAArC;IACD;;IAED,SAASuF,OAAT,CAAiBtF,OAAjB,EAA0B+B,GAA1B,EAA+B+B,GAA/B,EAAoCyB,OAApC,EAA6C;IAC3C,SAAOjD,UAAU,CAACP,GAAD,CAAV,GAAkBA,GAAG,CAACG,IAAJ,CAASlC,OAAT,EAAkB8D,GAAlB,EAAuByB,OAAvB,CAAlB,GAAoDxD,GAA3D;IACD;;IAED,SAASyD,YAAT,CAAsBL,IAAtB,EAA4BvB,IAA5B,EAAkCrB,KAAlC,EAAyC;IACvCA,EAAAA,KAAK,IAAI,IAAT,GAAgB4C,IAAI,CAACM,eAAL,CAAqB7B,IAArB,CAAhB,GAA6CuB,IAAI,CAACK,YAAL,CAAkB5B,IAAlB,EAAwBrB,KAAxB,CAA7C;IACD;;;IAGD,SAASmD,SAAT,CAAmBP,IAAnB,EAAyB5C,KAAzB,EAAgC;IAC9B,MAAIoD,KAAK,GAAGR,IAAI,CAACO,SAAL,IAAkB,EAA9B;IAAA,MACEE,GAAG,GAAGD,KAAK,IAAIA,KAAK,CAACE,OAAN,KAAkBC,SADnC;IAGA,MAAIvD,KAAK,KAAKuD,SAAd,EAAyB,OAAOF,GAAG,GAAGD,KAAK,CAACE,OAAT,GAAmBF,KAA7B;IACzBC,EAAAA,GAAG,GAAID,KAAK,CAACE,OAAN,GAAgBtD,KAApB,GAA8B4C,IAAI,CAACO,SAAL,GAAiBnD,KAAlD;IACD;;ICxGDzC,CAAC,CAACG,EAAF,GAAOH,CAAC,CAACmC,SAAF,GAAc;IACjB8D,EAAAA,UAAU,EAAEjG,CADK;IAEjBkD,EAAAA,MAAM,EAAE,CAFS;IAGjB;IACA;IACAgD,EAAAA,OAAO,EAAE7F,UAAU,CAAC6F,OALH;IAMjBC,EAAAA,MAAM,EAAE9F,UAAU,CAAC8F,MANF;IAOjBC,EAAAA,IAAI,EAAE/F,UAAU,CAAC+F,IAPA;IAQjBC,EAAAA,IAAI,EAAEhG,UAAU,CAACgG,IARA;IASjBC,EAAAA,MAAM,EAAEjG,UAAU,CAACiG,MATF;IAUjBrC,EAAAA,OAAO,EAAE5D,UAAU,CAAC4D,OAVH;IAWjB;IACA;IACA;IACA7D,EAAAA,IAAI,EAAE,cAAUH,QAAV,EAAoBC,OAApB,EAA6B;IAC/B,QAAIqG,GAAJ,CAD+B;;IAG/B,QAAI,CAACtG,QAAL,EAAe;IACX,aAAO,IAAP;IACH,KAFD;IAAA,SAIK,IAAI,OAAOA,QAAP,IAAmB,QAAvB,EAAiC;IAClCA,QAAAA,QAAQ,GAAGA,QAAQ,CAACuG,IAAT,EAAX,CADkC;IAGlC;IACA;;IACA,YAAIvG,QAAQ,CAAC,CAAD,CAAR,IAAe,GAAf,IAAsBa,UAAU,CAAC2F,IAAX,CAAgBxG,QAAhB,CAA1B,EAAqD;IACjDsG,UAAAA,GAAG,GAAGvG,CAAC,CAAC0G,QAAF,CAAWzG,QAAX,EAAqBsE,MAAM,CAACoC,EAA5B,EAAgCzG,OAAhC,CAAN;IACAD,UAAAA,QAAQ,GAAG,IAAX;IACH,SAHD;IAKA;IALA,aAMK,IAAIC,OAAO,KAAK8F,SAAhB,EAA2B;IAC5B,mBAAOhG,CAAC,CAACE,OAAD,CAAD,CAAW0G,IAAX,CAAgB3G,QAAhB,CAAP;IACH,WAFI;IAAA,eAIA;IACDsG,cAAAA,GAAG,GAAGvG,CAAC,CAAC6G,GAAF,CAAMpG,UAAN,EAAgBR,QAAhB,CAAN;IACH;IACJ,OAlBI;IAAA,WAoBA,IAAIuC,UAAU,CAACvC,QAAD,CAAd,EAA0B;IAC3B,iBAAOD,CAAC,CAACS,UAAD,CAAD,CAAYqG,KAAZ,CAAkB7G,QAAlB,CAAP;IACH,SAFI;IAAA,aAIA,IAAID,CAAC,CAAC+G,GAAF,CAAM9G,QAAN,CAAJ,EAAqB;IACtB,mBAAOA,QAAP;IACH,WAFI;IAAA,eAIA,IAAI8B,OAAO,CAAC9B,QAAD,CAAX,EAAuB;IACxBsG,cAAAA,GAAG,GAAGnD,OAAO,CAACnD,QAAD,CAAb;IACH,aAFI;IAAA,iBAIA,IAAI6C,QAAQ,CAAC7C,QAAD,CAAZ,EAAwB;IACzBsG,gBAAAA,GAAG,GAAG,CAACtG,QAAD,CAAN,EAAkBA,QAAQ,GAAG,IAA7B;IACH,eAFI;IAIL;IAJK,mBAKA,IAAIC,OAAO,KAAK8F,SAAhB,EAA2B;IAC5B,yBAAOhG,CAAC,CAACE,OAAD,CAAD,CAAW0G,IAAX,CAAgB3G,QAAhB,CAAP;IACH,iBAFI;IAAA,qBAIA;IACDsG,oBAAAA,GAAG,GAAGvG,CAAC,CAAC6G,GAAF,CAAMpG,UAAN,EAAgBR,QAAhB,CAAN;IACH,mBAlD8B;;;IAoD/B,WAAOD,CAAC,CAACgH,SAAF,CAAYT,GAAZ,EAAiBtG,QAAjB,EAA2B,IAA3B,CAAP;IACH;IAnEgB,CAArB;;IAsEAD,CAAC,CAACiH,MAAF,GAAWjH,CAAC,CAACG,EAAF,CAAK8G,MAAL,GAAc,YAAY;IACjC,MAAIC,OAAJ;IAAA,MAAapD,IAAb;IAAA,MAAmBqD,GAAnB;IAAA,MAAwBC,IAAxB;IAAA,MAA8BC,WAA9B;IAAA,MAA2CC,KAA3C;IAAA,MACIC,MAAM,GAAGC,SAAS,CAAC,CAAD,CAAT,IAAgB,EAD7B;IAAA,MAEIC,CAAC,GAAG,CAFR;IAAA,MAGIvE,MAAM,GAAGsE,SAAS,CAACtE,MAHvB;IAAA,MAIIwE,IAAI,GAAG,KAJX,CADiC;;IAQjC,MAAI,OAAOH,MAAP,KAAkB,SAAtB,EAAiC;IAC7BG,IAAAA,IAAI,GAAGH,MAAP,CAD6B;;IAI7BA,IAAAA,MAAM,GAAGC,SAAS,CAACC,CAAD,CAAT,IAAgB,EAAzB;IACAA,IAAAA,CAAC;IACJ,GAdgC;;;IAgBjC,MAAI,OAAOF,MAAP,KAAkB,QAAlB,IAA8B,CAAC/E,UAAU,CAAC+E,MAAD,CAA7C,EAAuD;IACnDA,IAAAA,MAAM,GAAG,EAAT;IACH,GAlBgC;;;IAoBjC,MAAIE,CAAC,KAAKvE,MAAV,EAAkB;IACdqE,IAAAA,MAAM,GAAG,IAAT;IACAE,IAAAA,CAAC;IACJ;;IACD,SAAOA,CAAC,GAAGvE,MAAX,EAAmBuE,CAAC,EAApB,EAAwB;IACpB;IACA,QAAI,CAACP,OAAO,GAAGM,SAAS,CAACC,CAAD,CAApB,KAA4B,IAAhC,EAAsC;IAClC;IACA,WAAK3D,IAAL,IAAaoD,OAAb,EAAsB;IAClBC,QAAAA,GAAG,GAAGI,MAAM,CAACzD,IAAD,CAAZ;IACAsD,QAAAA,IAAI,GAAGF,OAAO,CAACpD,IAAD,CAAd,CAFkB;;IAIlB,YAAIyD,MAAM,KAAKH,IAAf,EAAqB;IACjB;IACH,SANiB;;;IAQlB,YAAIM,IAAI,IAAIN,IAAR,KAAiBpH,CAAC,CAAC+C,aAAF,CAAgBqE,IAAhB,MAChBC,WAAW,GAAGrF,KAAK,CAACD,OAAN,CAAcqF,IAAd,CADE,CAAjB,CAAJ,EAC0C;IACtC,cAAIC,WAAJ,EAAiB;IACbA,YAAAA,WAAW,GAAG,KAAd;IACAC,YAAAA,KAAK,GAAGH,GAAG,IAAInF,KAAK,CAACD,OAAN,CAAcoF,GAAd,CAAP,GAA4BA,GAA5B,GAAkC,EAA1C;IACH,WAHD,MAGO;IACHG,YAAAA,KAAK,GAAGH,GAAG,IAAInH,CAAC,CAAC+C,aAAF,CAAgBoE,GAAhB,CAAP,GAA8BA,GAA9B,GAAoC,EAA5C;IACH,WANqC;;;IAQtCI,UAAAA,MAAM,CAACzD,IAAD,CAAN,GAAe9D,CAAC,CAACiH,MAAF,CAASS,IAAT,EAAeJ,KAAf,EAAsBF,IAAtB,CAAf,CARsC;IAUzC,SAXD,MAWO,IAAIA,IAAI,KAAKpB,SAAb,EAAwB;IAC3BuB,UAAAA,MAAM,CAACzD,IAAD,CAAN,GAAesD,IAAf;IACH;IACJ;IACJ;IACJ,GApDgC;;;IAsDjC,SAAOG,MAAP;IACH,CAvDD;;IAyDAvH,CAAC,CAACiH,MAAF,CAAS;IACL5E,EAAAA,IAAI,EAAEA,IADD;IAELG,EAAAA,UAAU,EAAEA,UAFP;IAGLE,EAAAA,QAAQ,EAAEA,QAHL;IAILK,EAAAA,aAAa,EAAEA,aAJV;IAKL4E,EAAAA,SAAS,EAAEzD,QALN;IAMLnC,EAAAA,OAAO,EAAEA,OANJ;IAOL6F,EAAAA,aAAa,EAAE,uBAAUtF,GAAV,EAAe;IAC1B,QAAIwB,IAAJ;;IACA,SAAKA,IAAL,IAAaxB,GAAb;IAAkB,aAAO,KAAP;IAAlB;;IACA,WAAO,IAAP;IACH,GAXI;IAYLuF,EAAAA,SAAS,EAAE,mBAAUC,GAAV,EAAe;IACtB,QAAIC,GAAG,GAAGC,MAAM,CAACF,GAAD,CAAhB;IAAA,QACIzF,OAAI,GAAG,OAAOyF,GADlB;IAEA,WAAOA,GAAG,IAAI,IAAP,IAAezF,OAAI,IAAI,SAAvB,KACFA,OAAI,IAAI,QAAR,IAAoByF,GAAG,CAAC5E,MADtB,KAEH,CAAC+E,KAAK,CAACF,GAAD,CAFH,IAEYG,QAAQ,CAACH,GAAD,CAFpB,IAE6B,KAFpC;IAGH,GAlBI;IAmBLI,EAAAA,OAAO,EAAE,iBAAUC,IAAV,EAAgB/E,KAAhB,EAAuBoE,CAAvB,EAA0B;IAC/B,WAAOpH,UAAU,CAAC4D,OAAX,CAAmB7B,IAAnB,CAAwBiB,KAAxB,EAA+B+E,IAA/B,EAAqCX,CAArC,CAAP;IACH,GArBI;IAsBLjB,EAAAA,IAAI,EAAE,cAAU9C,GAAV,EAAe;IACjB,WAAOA,GAAG,IAAI,IAAP,GAAc,EAAd,GAAmBnB,MAAM,CAACJ,SAAP,CAAiBqE,IAAjB,CAAsBpE,IAAtB,CAA2BsB,GAA3B,CAA1B;IACH,GAxBI;IAyBL2E,EAAAA,IAAI,EAAE,gBAAY,EAzBb;IA0BLlD,EAAAA,GAAG,EAAE,aAAUmD,QAAV,EAAoBC,QAApB,EAA8B;IAC/B,QAAI9F,KAAJ;IAAA,QAAW+F,MAAM,GAAG,EAApB;IAAA,QACIf,CADJ;IAAA,QACOgB,GADP;IAEA,QAAIxF,SAAS,CAACqF,QAAD,CAAb,EACI,KAAKb,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGa,QAAQ,CAACpF,MAAzB,EAAiCuE,CAAC,EAAlC,EAAsC;IAClChF,MAAAA,KAAK,GAAG8F,QAAQ,CAACD,QAAQ,CAACb,CAAD,CAAT,EAAcA,CAAd,CAAhB;IACA,UAAIhF,KAAK,IAAI,IAAb,EAAmB+F,MAAM,CAACpC,IAAP,CAAY3D,KAAZ;IACtB,KAJL,MAMI,KAAKgG,GAAL,IAAYH,QAAZ,EAAsB;IAClB7F,MAAAA,KAAK,GAAG8F,QAAQ,CAACD,QAAQ,CAACG,GAAD,CAAT,EAAgBA,GAAhB,CAAhB;IACA,UAAIhG,KAAK,IAAI,IAAb,EAAmB+F,MAAM,CAACpC,IAAP,CAAY3D,KAAZ;IACtB;IACL,WAAOc,OAAO,CAACiF,MAAD,CAAd;IACH,GAxCI;IAyCLE,EAAAA,IAAI,EAAE,cAAUJ,QAAV,EAAoBC,QAApB,EAA8B;IAChC,QAAId,CAAJ,EAAOgB,GAAP;;IACA,QAAIxF,SAAS,CAACqF,QAAD,CAAb,EAAyB;IACrB,WAAKb,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGa,QAAQ,CAACpF,MAAzB,EAAiCuE,CAAC,EAAlC;IACI,YAAIc,QAAQ,CAACnG,IAAT,CAAckG,QAAQ,CAACb,CAAD,CAAtB,EAA2BA,CAA3B,EAA8Ba,QAAQ,CAACb,CAAD,CAAtC,MAA+C,KAAnD,EAA0D,OAAOa,QAAP;IAD9D;IAEH,KAHD,MAGO;IACH,WAAKG,GAAL,IAAYH,QAAZ;IACI,YAAIC,QAAQ,CAACnG,IAAT,CAAckG,QAAQ,CAACG,GAAD,CAAtB,EAA6BA,GAA7B,EAAkCH,QAAQ,CAACG,GAAD,CAA1C,MAAqD,KAAzD,EAAgE,OAAOH,QAAP;IADpE;IAEH;;IAED,WAAOA,QAAP;IACH,GApDI;IAqDLK,EAAAA,IAAI,EAAE,cAAUL,QAAV,EAAoBC,QAApB,EAA8B;IAChC,WAAOhI,MAAM,CAAC6B,IAAP,CAAYkG,QAAZ,EAAsBC,QAAtB,CAAP;IACH,GAvDI;IAwDLK,EAAAA,QAAQ,EAAE,oBAAY;IAClB,WAAQnI,UAAQ,CAACoI,eAAT,CAAyBD,QAAzB,GACF,UAAUE,MAAV,EAAkBzD,IAAlB,EAAwB;IACtB,aAAOyD,MAAM,KAAKzD,IAAX,IAAmByD,MAAM,CAACF,QAAP,CAAgBvD,IAAhB,CAA1B;IACH,KAHG,GAIF,UAAUyD,MAAV,EAAkBzD,IAAlB,EAAwB;IACtB,aAAOA,IAAI,KAAKA,IAAI,GAAGA,IAAI,CAACL,UAAjB,CAAX;IACI,YAAIK,IAAI,KAAKyD,MAAb,EAAqB,OAAO,IAAP;IADzB;;IAEA,aAAO,KAAP;IACH,KARL;IASH,GAlEI;IAmEL;IACA9B,EAAAA,SAAS,EAAE,mBAAUT,GAAV,EAAetG,QAAf,EAAyB8I,EAAzB,EAA6B;IACpC,QAAItB,CAAJ;IAAA,QAAOuB,GAAG,GAAGzC,GAAG,GAAGA,GAAG,CAACrD,MAAP,GAAgB,CAAhC;;IACA,SAAKuE,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuB,GAAhB,EAAqBvB,CAAC,EAAtB;IAA0BsB,MAAAA,EAAE,CAACtB,CAAD,CAAF,GAAQlB,GAAG,CAACkB,CAAD,CAAX;IAA1B;;IACAsB,IAAAA,EAAE,CAAC7F,MAAH,GAAY8F,GAAZ;IACAD,IAAAA,EAAE,CAAC9I,QAAH,GAAcA,QAAQ,IAAI,EAA1B;IACA,WAAO8I,EAAP;IACH,GA1EI;IA2EL;IACArC,EAAAA,QAAQ,EAAE,kBAAUuC,IAAV,EAAgBnF,IAAhB,EAAsBoF,UAAtB,EAAkC;IACxC,QAAI3C,GAAJ,EAAShB,KAAT,EAAgB4D,SAAhB,CADwC;;IAIxC,QAAIpI,WAAW,CAAC0F,IAAZ,CAAiBwC,IAAjB,CAAJ,EAA4B;IACxB1C,MAAAA,GAAG,GAAGvG,CAAC,CAACS,UAAQ,CAACc,aAAT,CAAuBgD,MAAM,CAACoC,EAA9B,CAAD,CAAP;IACH;;IAED,QAAI,CAACJ,GAAL,EAAU;IAEN,UAAI0C,IAAI,CAACtF,OAAT,EAAkB;IACdsF,QAAAA,IAAI,GAAGA,IAAI,CAACtF,OAAL,CAAa3C,aAAb,EAA4B,WAA5B,CAAP;IACH;;IAED,UAAI8C,IAAI,KAAKkC,SAAb,EAAwB;IACpBlC,QAAAA,IAAI,GAAGhD,UAAU,CAAC2F,IAAX,CAAgBwC,IAAhB,KAAyB1E,MAAM,CAACoC,EAAvC;IACH;;IAED,UAAI,EAAE7C,IAAI,IAAIrC,UAAV,CAAJ,EAA2B;IACvBqC,QAAAA,IAAI,GAAG,GAAP;IACH;;IAEDqF,MAAAA,SAAS,GAAG1H,UAAU,CAACqC,IAAD,CAAtB;IACAqF,MAAAA,SAAS,CAACC,SAAV,GAAsB,KAAKH,IAA3B;IACA1C,MAAAA,GAAG,GAAGvG,CAAC,CAAC0I,IAAF,CAAOlI,KAAK,CAAC4B,IAAN,CAAW+G,SAAS,CAAC/D,UAArB,CAAP,EAAyC,YAAY;IACvD+D,QAAAA,SAAS,CAAClE,WAAV,CAAsB,IAAtB;IACH,OAFK,CAAN;IAGH;;IAED,QAAIlC,aAAa,CAACmG,UAAD,CAAjB,EAA+B;IAC3B3D,MAAAA,KAAK,GAAGvF,CAAC,CAACuG,GAAD,CAAT;IACAvG,MAAAA,CAAC,CAAC0I,IAAF,CAAOQ,UAAP,EAAmB,UAAUT,GAAV,EAAehG,KAAf,EAAsB;IACrC,YAAItB,gBAAgB,CAAC8C,OAAjB,CAAyBwE,GAAzB,IAAgC,CAAC,CAArC,EAAwClD,KAAK,CAACkD,GAAD,CAAL,CAAWhG,KAAX,EAAxC,KACK8C,KAAK,CAAC8D,IAAN,CAAWZ,GAAX,EAAgBhG,KAAhB;IACR,OAHD;IAIH;;IAED,WAAO8D,GAAP;IACH,GAlHI;IAmHL;IACAM,EAAAA,GAAG,EAAE,aAAUnC,OAAV,EAAmBzE,QAAnB,EAA6B;IAC9B,QAAIqJ,KAAJ;IAAA,QACIC,OAAO,GAAGtJ,QAAQ,CAAC,CAAD,CAAR,IAAe,GAD7B;IAAA,QAEIuJ,UAAU,GAAG,CAACD,OAAD,IAAYtJ,QAAQ,CAAC,CAAD,CAAR,IAAe,GAF5C;IAAA;IAIIwJ,IAAAA,QAAQ,GAAGF,OAAO,IAAIC,UAAX,GAAwBvJ,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAxB,GAA4CP,QAJ3D;IAAA,QAKIyJ,QAAQ,GAAGhI,gBAAgB,CAAC+E,IAAjB,CAAsBgD,QAAtB,CALf;IAMA;IAEI/E,MAAAA,OAAO,CAACiF,cAAR,IAA0BD,QAA1B,IAAsCH,OAFnC,GAGD,CAACD,KAAK,GAAG5E,OAAO,CAACiF,cAAR,CAAuBF,QAAvB,CAAT,IACI,CAACH,KAAD,CADJ,GAEI,EALH,GAMD5E,OAAO,CAAC9B,QAAR,KAAqB,CAArB,IAA0B8B,OAAO,CAAC9B,QAAR,KAAqB,CAA/C,IAAoD8B,OAAO,CAAC9B,QAAR,KAAqB,EAAzE,GACI,EADJ,GAEIpC,KAAK,CAAC4B,IAAN;IAEEsH,MAAAA,QAAQ,IAAI,CAACH,OAAb,IAAwB7E,OAAO,CAACkF,sBAAhC,GACMJ,UAAU;IAAA,QAEN9E,OAAO,CAACkF,sBAAR,CAA+BH,QAA/B,CAFM;IAAA,QAIN/E,OAAO,CAACmF,oBAAR,CAA6B5J,QAA7B,CALV;IAAA,QAOMyE,OAAO,CAACoF,gBAAR,CAAyB7J,QAAzB,CATR;IARV;IAmBH,GA9II;IA+IL8G,EAAAA,GAAG,EAAE,aAAUgD,MAAV,EAAkB;IACnB,WAAOA,MAAM,YAAY/J,CAAzB;IACH,GAjJI;IAkJLgK,EAAAA,OAAO,EAAE,iBAAUtF,OAAV,EAAmBzE,QAAnB,EAA6B;IAClC,QAAI,CAACA,QAAD,IAAa,CAACyE,OAAd,IAAyBA,OAAO,CAAC9B,QAAR,KAAqB,CAAlD,EAAqD,OAAO,KAAP;IACrD,QAAIqH,eAAe,GAAGvF,OAAO,CAACsF,OAAR,IAAmBtF,OAAO,CAACwF,qBAA3B,IAClBxF,OAAO,CAACyF,kBADU,IACYzF,OAAO,CAAC0F,gBADpB,IAElB1F,OAAO,CAACuF,eAFZ;IAGA,QAAIA,eAAJ,EAAqB,OAAOA,eAAe,CAAC7H,IAAhB,CAAqBsC,OAArB,EAA8BzE,QAA9B,CAAP,CALa;;IAOlC,QAAIkE,KAAJ;IAAA,QAAW2E,MAAM,GAAGpE,OAAO,CAACM,UAA5B;IAAA,QACIqF,IAAI,GAAG,CAACvB,MADZ;IAEA,QAAIuB,IAAJ,EAAU,CAACvB,MAAM,GAAGjH,UAAV,EAAsBgD,WAAtB,CAAkCH,OAAlC;IACVP,IAAAA,KAAK,GAAG,CAACnE,CAAC,CAAC6G,GAAF,CAAMiC,MAAN,EAAc7I,QAAd,EAAwBgE,OAAxB,CAAgCS,OAAhC,CAAT;IACA2F,IAAAA,IAAI,IAAIxI,UAAU,CAACoD,WAAX,CAAuBP,OAAvB,CAAR;IACA,WAAOP,KAAP;IACH;IA/JI,CAAT;;IAmKAnE,CAAC,CAAC0I,IAAF,CAAO,gEAAgE4B,KAAhE,CAAsE,GAAtE,CAAP,EAAmF,UAAU7C,CAAV,EAAa3D,IAAb,EAAmB;IAClGnC,EAAAA,UAAU,CAAC,aAAamC,IAAb,GAAoB,GAArB,CAAV,GAAsCA,IAAI,CAACF,WAAL,EAAtC;IACH,CAFD;;IAKA5D,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACR;IACA3G,EAAAA,MAAM,EAAE,qBAAY;IAChB,QAAImH,CAAJ;IAAA,QAAOhF,KAAP;IAAA,QAAc8H,IAAI,GAAG,EAArB;;IACA,SAAK9C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGD,SAAS,CAACtE,MAA1B,EAAkCuE,CAAC,EAAnC,EAAuC;IACnChF,MAAAA,KAAK,GAAG+E,SAAS,CAACC,CAAD,CAAjB;IACA8C,MAAAA,IAAI,CAAC9C,CAAD,CAAJ,GAAUzH,CAAC,CAAC+G,GAAF,CAAMtE,KAAN,IAAeA,KAAK,CAAC+H,OAAN,EAAf,GAAiC/H,KAA3C;IACH;;IACD,WAAOnC,MAAM,CAACkD,KAAP,CAAaxD,CAAC,CAAC+G,GAAF,CAAM,IAAN,IAAc,KAAKyD,OAAL,EAAd,GAA+B,IAA5C,EAAkDD,IAAlD,CAAP;IACH,GATO;IAUR;IACAE,EAAAA,KAAK,EAAE,eAAUC,QAAV,EAAoB;IACvB,WAAO1K,CAAC,CAACmF,GAAF,CAAM,IAAN,EAAY,UAAUwF,EAAV,EAAc;IAAE,aAAOA,EAAE,CAACD,QAAD,CAAT;IAAqB,KAAjD,CAAP;IACH,GAbO;IAcR;IACAE,EAAAA,EAAE,EAAE,YAAU5G,GAAV,EAAe;IACf,WAAOA,GAAG,KAAK,CAAC,CAAT,GAAa,KAAKxD,KAAL,CAAWwD,GAAX,CAAb,GAA+B,KAAKxD,KAAL,CAAWwD,GAAX,EAAgB,CAACA,GAAD,GAAO,CAAvB,CAAtC;IACH,GAjBO;IAkBR6G,EAAAA,KAAK,EAAE,iBAAY;IACf,QAAIF,EAAE,GAAG,KAAK,CAAL,CAAT;IACA,WAAOA,EAAE,IAAI,CAAC7H,QAAQ,CAAC6H,EAAD,CAAf,GAAsBA,EAAtB,GAA2B3K,CAAC,CAAC2K,EAAD,CAAnC;IACH,GArBO;IAsBRG,EAAAA,IAAI,EAAE,gBAAY;IACd,QAAIH,EAAE,GAAG,KAAK,KAAKzH,MAAL,GAAc,CAAnB,CAAT;IACA,WAAOyH,EAAE,IAAI,CAAC7H,QAAQ,CAAC6H,EAAD,CAAf,GAAsBA,EAAtB,GAA2B3K,CAAC,CAAC2K,EAAD,CAAnC;IACH,GAzBO;IA0BRnK,EAAAA,KAAK,EAAE,oBAAY;IACf,WAAOR,CAAC,CAACQ,KAAK,CAACgD,KAAN,CAAY,IAAZ,EAAkBgE,SAAlB,CAAD,CAAR;IACH,GA5BO;;IA6BR;IACAgD,EAAAA,OAAO,EAAE,mBAAY;IACjB,WAAO,KAAKO,GAAL,EAAP;IACH,GAhCO;IAiCRrC,EAAAA,IAAI,EAAE,cAAUH,QAAV,EAAoB;IACtBlI,IAAAA,UAAU,CAAC2K,KAAX,CAAiB5I,IAAjB,CAAsB,IAAtB,EAA4B,UAAUuI,EAAV,EAAc3G,GAAd,EAAmB;IAC3C,aAAOuE,QAAQ,CAACnG,IAAT,CAAcuI,EAAd,EAAkB3G,GAAlB,EAAuB2G,EAAvB,MAA+B,KAAtC;IACH,KAFD;IAGA,WAAO,IAAP;IACH,GAtCO;IAuCRxF,EAAAA,GAAG,EAAE,aAAUhF,EAAV,EAAc;IACf,WAAOH,CAAC,CACJA,CAAC,CAACmF,GAAF,CAAM,IAAN,EAAY,UAAUwF,EAAV,EAAclD,CAAd,EAAiB;IAAE,aAAOtH,EAAE,CAACiC,IAAH,CAAQuI,EAAR,EAAYlD,CAAZ,EAAekD,EAAf,CAAP;IAA2B,KAA1D,CADI,CAAR;IAGH,GA3CO;IA4CRI,EAAAA,GAAG,EAAE,aAAU/G,GAAV,EAAe;IAChB,WAAOA,GAAG,KAAKgC,SAAR,GAAoBxF,KAAK,CAAC4B,IAAN,CAAW,IAAX,CAApB,GAAuC,KAAK4B,GAAG,IAAI,CAAP,GAAWA,GAAX,GAAiBA,GAAG,GAAG,KAAKd,MAAjC,CAA9C;IACH,GA9CO;IA+CR+H,EAAAA,IAAI,EAAE,gBAAY;IACd,WAAO,KAAK/H,MAAZ;IACH,GAjDO;IAkDRgI,EAAAA,KAAK,EAAE,eAAUxG,OAAV,EAAmB;IACtB,WAAOA,OAAO,GAAG,KAAKT,OAAL,CAAajE,CAAC,CAAC0E,OAAD,CAAD,CAAW,CAAX,CAAb,CAAH,GAAiC,KAAKoE,MAAL,GAAc5D,QAAd,GAAyBjB,OAAzB,CAAiC,KAAK,CAAL,CAAjC,CAA/C;IACH,GApDO;;IAsDR;IACAkH,EAAAA,IAAI,EAAE,gBAAY;IACd,WAAO,KAAKzC,IAAL,CAAU,YAAY;IACzB,WAAK0C,KAAL,CAAWzG,OAAX,IAAsB,MAAtB,KAAiC,KAAKyG,KAAL,CAAWzG,OAAX,GAAqB,EAAtD;IACA,UAAIG,gBAAgB,CAAC,IAAD,EAAO,EAAP,CAAhB,CAA2BC,gBAA3B,CAA4C,SAA5C,KAA0D,MAA9D,EACI,KAAKqG,KAAL,CAAWzG,OAAX,GAAqBH,gBAAc,CAAC,KAAKC,QAAN,CAAnC;IACP,KAJM,CAAP;IAKH,GA7DO;IA8DR4G,EAAAA,IAAI,EAAE,gBAAY;IACd,WAAO,KAAKC,GAAL,CAAS,SAAT,EAAoB,MAApB,CAAP;IACH;IAhEO,CAAZ;IAmEAtL,CAAC,CAACG,EAAF,CAAKC,IAAL,CAAU+B,SAAV,GAAsBnC,CAAC,CAACG,EAAxB;;ICnZAH,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRqE,EAAAA,GAAG,EAAE,aAAUZ,QAAV,EAAoBjI,KAApB,EAA2B;IAC5B,QAAI+E,SAAS,CAACtE,MAAV,GAAmB,CAAvB,EAA0B;IACtB,UAAIwB,OAAO,GAAG,KAAK,CAAL,CAAd;;IACA,UAAI,OAAOgG,QAAP,IAAmB,QAAvB,EAAiC;IAC7B,YAAI,CAAChG,OAAL,EAAc;IACd,eAAOA,OAAO,CAAC0G,KAAR,CAAclH,QAAQ,CAACwG,QAAD,CAAtB,KAAqC5F,gBAAgB,CAACJ,OAAD,EAAU,EAAV,CAAhB,CAA8BK,gBAA9B,CAA+C2F,QAA/C,CAA5C;IACH,OAHD,MAGO,IAAI3I,OAAO,CAAC2I,QAAD,CAAX,EAAuB;IAC1B,YAAI,CAAChG,OAAL,EAAc;IACd,YAAI6G,KAAK,GAAG,EAAZ;IACA,YAAIC,aAAa,GAAG1G,gBAAgB,CAACJ,OAAD,EAAU,EAAV,CAApC;IACA1E,QAAAA,CAAC,CAAC0I,IAAF,CAAOgC,QAAP,EAAiB,UAAUe,CAAV,EAAaC,IAAb,EAAmB;IAChCH,UAAAA,KAAK,CAACG,IAAD,CAAL,GAAehH,OAAO,CAAC0G,KAAR,CAAclH,QAAQ,CAACwH,IAAD,CAAtB,KAAiCF,aAAa,CAACzG,gBAAd,CAA+B2G,IAA/B,CAAhD;IACH,SAFD;IAGA,eAAOH,KAAP;IACH;IACJ;;IAED,QAAID,GAAG,GAAG,EAAV;;IACA,QAAIjJ,IAAI,CAACqI,QAAD,CAAJ,IAAkB,QAAtB,EAAgC;IAC5B,UAAI,CAACjI,KAAD,IAAUA,KAAK,KAAK,CAAxB,EAA2B;IACvB,aAAKiG,IAAL,CAAU,YAAY;IAClB,eAAK0C,KAAL,CAAWO,cAAX,CAA0BlI,SAAS,CAACiH,QAAD,CAAnC;IACH,SAFD;IAGH,OAJD,MAIO;IACHY,QAAAA,GAAG,GAAG7H,SAAS,CAACiH,QAAD,CAAT,GAAsB,GAAtB,GAA4B7G,UAAU,CAAC6G,QAAD,EAAWjI,KAAX,CAA5C;IACH;IACJ,KARD,MAQO;IACH,WAAK,IAAIgG,GAAT,IAAgBiC,QAAhB,EAA0B;IACtB,YAAI,CAACA,QAAQ,CAACjC,GAAD,CAAT,IAAkBiC,QAAQ,CAACjC,GAAD,CAAR,KAAkB,CAAxC,EAA2C;IACvC,eAAKC,IAAL,CAAU,YAAY;IAAE,iBAAK0C,KAAL,CAAWO,cAAX,CAA0BlI,SAAS,CAACgF,GAAD,CAAnC;IAA2C,WAAnE;IACH,SAFD,MAEO;IACH6C,UAAAA,GAAG,IAAI7H,SAAS,CAACgF,GAAD,CAAT,GAAiB,GAAjB,GAAuB5E,UAAU,CAAC4E,GAAD,EAAMiC,QAAQ,CAACjC,GAAD,CAAd,CAAjC,GAAwD,GAA/D;IACH;IACJ;IACJ;;IAED,WAAO,KAAKC,IAAL,CAAU,YAAY;IAAE,WAAK0C,KAAL,CAAWQ,OAAX,IAAsB,MAAMN,GAA5B;IAAiC,KAAzD,CAAP;IACH;IAtCO,CAAZ;;ICAAtL,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACR4E,EAAAA,QAAQ,EAAE,kBAAU/H,IAAV,EAAgB;IACtB,QAAI,CAACA,IAAL,EAAW,OAAO,KAAP;IACX,WAAOzD,UAAU,CAACyL,IAAX,CAAgB1J,IAAhB,CAAqB,IAArB,EAA2B,UAAUuI,EAAV,EAAc;IAC5C,aAAO,KAAKlE,IAAL,CAAUb,SAAS,CAAC+E,EAAD,CAAnB,CAAP;IACH,KAFM,EAEJrG,OAAO,CAACR,IAAD,CAFH,CAAP;IAGH,GANO;IAORiI,EAAAA,QAAQ,EAAE,kBAAUjI,IAAV,EAAgB;IACtB,QAAIkI,SAAS,GAAG,EAAhB;IACA,QAAI,CAAClI,IAAL,EAAW,OAAO,IAAP;IACX,WAAO,KAAK4E,IAAL,CAAU,UAAU1E,GAAV,EAAe;IAC5B,UAAI,EAAE,eAAe,IAAjB,CAAJ,EAA4B;IAC5BgI,MAAAA,SAAS,GAAG,EAAZ;IACA,UAAIC,GAAG,GAAGrG,SAAS,CAAC,IAAD,CAAnB;IAAA,UACIsG,OAAO,GAAG1G,OAAO,CAAC,IAAD,EAAO1B,IAAP,EAAaE,GAAb,EAAkBiI,GAAlB,CADrB;IAEAC,MAAAA,OAAO,CAAC5B,KAAR,CAAc,MAAd,EAAsBpE,OAAtB,CAA8B,UAAUL,KAAV,EAAiB;IAC3C,YAAI,CAAC7F,CAAC,CAAC,IAAD,CAAD,CAAQ6L,QAAR,CAAiBhG,KAAjB,CAAL,EAA8BmG,SAAS,CAAC5F,IAAV,CAAeP,KAAf;IACjC,OAFD,EAEG,IAFH;IAGAmG,MAAAA,SAAS,CAAC9I,MAAV,IAAoB0C,SAAS,CAAC,IAAD,EAAOqG,GAAG,IAAIA,GAAG,GAAG,GAAH,GAAS,EAAhB,CAAH,GAAyBD,SAAS,CAACG,IAAV,CAAe,GAAf,CAAhC,CAA7B;IACH,KATM,CAAP;IAUH,GApBO;IAqBRC,EAAAA,WAAW,EAAE,qBAAUtI,IAAV,EAAgB;IACzB,QAAIkI,SAAS,GAAG,EAAhB;IACA,WAAO,KAAKtD,IAAL,CAAU,UAAU1E,GAAV,EAAe;IAC5B,UAAI,EAAE,eAAe,IAAjB,CAAJ,EAA4B;IAC5B,UAAIF,IAAI,KAAKkC,SAAb,EAAwB,OAAOJ,SAAS,CAAC,IAAD,EAAO,EAAP,CAAhB;IACxBoG,MAAAA,SAAS,GAAGpG,SAAS,CAAC,IAAD,CAArB;IACAJ,MAAAA,OAAO,CAAC,IAAD,EAAO1B,IAAP,EAAaE,GAAb,EAAkBgI,SAAlB,CAAP,CAAoC1B,KAApC,CAA0C,MAA1C,EAAkDpE,OAAlD,CAA0D,UAAUL,KAAV,EAAiB;IACvEmG,QAAAA,SAAS,GAAGA,SAAS,CAACrI,OAAV,CAAkBW,OAAO,CAACuB,KAAD,CAAzB,EAAkC,GAAlC,CAAZ;IACH,OAFD;IAGAD,MAAAA,SAAS,CAAC,IAAD,EAAOoG,SAAS,CAACxF,IAAV,EAAP,CAAT;IACH,KARM,CAAP;IASH,GAhCO;IAiCR6F,EAAAA,WAAW,EAAE,qBAAUvI,IAAV,EAAgBwI,IAAhB,EAAsB;IAC/B,QAAI,CAACxI,IAAL,EAAW,OAAO,IAAP;IACX,WAAO,KAAK4E,IAAL,CAAU,UAAU1E,GAAV,EAAe;IAC5B,UAAIuI,KAAK,GAAGvM,CAAC,CAAC,IAAD,CAAb;IAAA,UACIwM,KAAK,GAAGhH,OAAO,CAAC,IAAD,EAAO1B,IAAP,EAAaE,GAAb,EAAkB4B,SAAS,CAAC,IAAD,CAA3B,CADnB;IAEA4G,MAAAA,KAAK,CAAClC,KAAN,CAAY,MAAZ,EAAoBpE,OAApB,CAA4B,UAAUL,KAAV,EAAiB;IACzC,SAACyG,IAAI,KAAKtG,SAAT,GAAqB,CAACuG,KAAK,CAACV,QAAN,CAAehG,KAAf,CAAtB,GAA8CyG,IAA/C,IACIC,KAAK,CAACR,QAAN,CAAelG,KAAf,CADJ,GAC4B0G,KAAK,CAACH,WAAN,CAAkBvG,KAAlB,CAD5B;IAEH,OAHD;IAIH,KAPM,CAAP;IAQH;IA3CO,CAAZ;;ICAA7F,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRwF,EAAAA,MAAM,EAAE,gBAAUC,WAAV,EAAuB;IAC3B,QAAIA,WAAJ,EAAiB,OAAO,KAAKhE,IAAL,CAAU,UAAUwC,KAAV,EAAiB;IAC/C,UAAIqB,KAAK,GAAGvM,CAAC,CAAC,IAAD,CAAb;IAAA,UACI2M,MAAM,GAAGnH,OAAO,CAAC,IAAD,EAAOkH,WAAP,EAAoBxB,KAApB,EAA2BqB,KAAK,CAACE,MAAN,EAA3B,CADpB;IAAA,UAEIG,YAAY,GAAGL,KAAK,CAACM,YAAN,GAAqBJ,MAArB,EAFnB;IAAA,UAGIlB,KAAK,GAAG;IACJuB,QAAAA,GAAG,EAAEH,MAAM,CAACG,GAAP,GAAaF,YAAY,CAACE,GAD3B;IAEJC,QAAAA,IAAI,EAAEJ,MAAM,CAACI,IAAP,GAAcH,YAAY,CAACG;IAF7B,OAHZ;IAQA,UAAIR,KAAK,CAACjB,GAAN,CAAU,UAAV,KAAyB,QAA7B,EAAuCC,KAAK,CAAC,UAAD,CAAL,GAAoB,UAApB;IACvCgB,MAAAA,KAAK,CAACjB,GAAN,CAAUC,KAAV;IACH,KAXuB,CAAP;IAYjB,QAAI,CAAC,KAAKrI,MAAV,EAAkB,OAAO,IAAP;IAClB,QAAIzC,UAAQ,CAACoI,eAAT,KAA6B,KAAK,CAAL,CAA7B,IAAwC,CAAC7I,CAAC,CAAC4I,QAAF,CAAWnI,UAAQ,CAACoI,eAApB,EAAqC,KAAK,CAAL,CAArC,CAA7C,EACI,OAAO;IAAEiE,MAAAA,GAAG,EAAE,CAAP;IAAUC,MAAAA,IAAI,EAAE;IAAhB,KAAP;IACJ,QAAIzK,GAAG,GAAG,KAAK,CAAL,EAAQ0K,qBAAR,EAAV;IACA,WAAO;IACHD,MAAAA,IAAI,EAAEzK,GAAG,CAACyK,IAAJ,GAAWrM,MAAM,CAACuM,WADrB;IAEHH,MAAAA,GAAG,EAAExK,GAAG,CAACwK,GAAJ,GAAUpM,MAAM,CAACwM,WAFnB;IAGHC,MAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAW/K,GAAG,CAAC6K,KAAf,CAHJ;IAIHG,MAAAA,MAAM,EAAEF,IAAI,CAACC,KAAL,CAAW/K,GAAG,CAACgL,MAAf;IAJL,KAAP;IAMH,GAxBO;IAyBRC,EAAAA,QAAQ,EAAE,oBAAY;IAClB,QAAI,CAAC,KAAKrK,MAAV,EAAkB;IAElB,QAAIkF,IAAI,GAAG,KAAK,CAAL,CAAX;IAAA;IAEIyE,IAAAA,YAAY,GAAG,KAAKA,YAAL,EAFnB;IAAA;IAIIJ,IAAAA,MAAM,GAAG,KAAKA,MAAL,EAJb;IAAA,QAKIG,YAAY,GAAG3L,UAAU,CAACwF,IAAX,CAAgBoG,YAAY,CAAC,CAAD,CAAZ,CAAgBpI,QAAhC,IAA4C;IAAEqI,MAAAA,GAAG,EAAE,CAAP;IAAUC,MAAAA,IAAI,EAAE;IAAhB,KAA5C,GAAkEF,YAAY,CAACJ,MAAb,EALrF,CAHkB;IAWlB;IACA;;IACAA,IAAAA,MAAM,CAACK,GAAP,IAAcU,UAAU,CAACxN,CAAC,CAACoI,IAAD,CAAD,CAAQkD,GAAR,CAAY,YAAZ,CAAD,CAAV,IAAyC,CAAvD;IACAmB,IAAAA,MAAM,CAACM,IAAP,IAAeS,UAAU,CAACxN,CAAC,CAACoI,IAAD,CAAD,CAAQkD,GAAR,CAAY,aAAZ,CAAD,CAAV,IAA0C,CAAzD,CAdkB;;IAiBlBsB,IAAAA,YAAY,CAACE,GAAb,IAAoBU,UAAU,CAACxN,CAAC,CAAC6M,YAAY,CAAC,CAAD,CAAb,CAAD,CAAmBvB,GAAnB,CAAuB,kBAAvB,CAAD,CAAV,IAA0D,CAA9E;IACAsB,IAAAA,YAAY,CAACG,IAAb,IAAqBS,UAAU,CAACxN,CAAC,CAAC6M,YAAY,CAAC,CAAD,CAAb,CAAD,CAAmBvB,GAAnB,CAAuB,mBAAvB,CAAD,CAAV,IAA2D,CAAhF,CAlBkB;;IAqBlB,WAAO;IACHwB,MAAAA,GAAG,EAAEL,MAAM,CAACK,GAAP,GAAaF,YAAY,CAACE,GAD5B;IAEHC,MAAAA,IAAI,EAAEN,MAAM,CAACM,IAAP,GAAcH,YAAY,CAACG;IAF9B,KAAP;IAIH,GAlDO;IAmDRU,EAAAA,SAAS,EAAE,mBAAUhL,KAAV,EAAiB;IACxB,QAAI,CAAC,KAAKS,MAAV,EAAkB;IAClB,QAAIwK,YAAY,GAAG,eAAe,KAAK,CAAL,CAAlC;IACA,QAAIjL,KAAK,KAAKuD,SAAd,EAAyB,OAAO0H,YAAY,GAAG,KAAK,CAAL,EAAQD,SAAX,GAAuB,KAAK,CAAL,EAAQP,WAAlD;IACzB,WAAO,KAAKxE,IAAL,CAAUgF,YAAY,GACzB,YAAY;IAAE,WAAKD,SAAL,GAAiBhL,KAAjB;IAAwB,KADb,GAEzB,YAAY;IAAE,WAAKkL,QAAL,CAAc,KAAKC,OAAnB,EAA4BnL,KAA5B;IAAoC,KAF/C,CAAP;IAGH,GA1DO;IA2DRoL,EAAAA,UAAU,EAAE,oBAAUpL,KAAV,EAAiB;IACzB,QAAI,CAAC,KAAKS,MAAV,EAAkB;IAClB,QAAI4K,aAAa,GAAG,gBAAgB,KAAK,CAAL,CAApC;IACA,QAAIrL,KAAK,KAAKuD,SAAd,EAAyB,OAAO8H,aAAa,GAAG,KAAK,CAAL,EAAQD,UAAX,GAAwB,KAAK,CAAL,EAAQZ,WAApD;IACzB,WAAO,KAAKvE,IAAL,CAAUoF,aAAa,GAC1B,YAAY;IAAE,WAAKD,UAAL,GAAkBpL,KAAlB;IAAyB,KADb,GAE1B,YAAY;IAAE,WAAKkL,QAAL,CAAclL,KAAd,EAAqB,KAAKsL,OAA1B;IAAoC,KAF/C,CAAP;IAGH,GAlEO;IAmERlB,EAAAA,YAAY,EAAE,wBAAY;IACtB,WAAO,KAAK1H,GAAL,CAAS,YAAY;IACxB,UAAI2D,MAAM,GAAG,KAAK+D,YAAL,IAAqBpM,UAAQ,CAACmE,IAA3C;;IACA,aAAOkE,MAAM,IAAI,CAAC7H,UAAU,CAACwF,IAAX,CAAgBqC,MAAM,CAACrE,QAAvB,CAAX,IAA+CzE,CAAC,CAAC8I,MAAD,CAAD,CAAUwC,GAAV,CAAc,UAAd,KAA6B,QAAnF;IACIxC,QAAAA,MAAM,GAAGA,MAAM,CAAC+D,YAAhB;IADJ;;IAEA,aAAO/D,MAAP;IACH,KALM,CAAP;IAMH;IA1EO,CAAZ;;ICDA9I,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRoC,EAAAA,IAAI,EAAE,cAAUvF,IAAV,EAAgBrB,KAAhB,EAAuB;IACzB,QAAIuL,MAAJ;IACA,WAAQ,OAAOlK,IAAP,IAAe,QAAf,IAA2B,EAAE,KAAK0D,SAAP,CAA5B,GACF,KAAK,IAAL,IAAa,KAAK,CAAL,EAAQ5E,QAAR,IAAoB,CAAjC,IAAsC,CAACoL,MAAM,GAAG,KAAK,CAAL,EAAQC,YAAR,CAAqBnK,IAArB,CAAV,KAAyC,IAA/E,GAAsFkK,MAAtF,GAA+FhI,SAD7F,GAEH,KAAK0C,IAAL,CAAU,UAAU1E,GAAV,EAAe;IACrB,UAAI,KAAKpB,QAAL,KAAkB,CAAtB,EAAyB;IACzB,UAAIE,QAAQ,CAACgB,IAAD,CAAZ,EACI,KAAK,IAAI2E,GAAT,IAAgB3E,IAAhB;IAAsB4B,QAAAA,YAAY,CAAC,IAAD,EAAO+C,GAAP,EAAY3E,IAAI,CAAC2E,GAAD,CAAhB,CAAZ;IAAtB,OADJ,MAEK/C,YAAY,CAAC,IAAD,EAAO5B,IAAP,EAAa0B,OAAO,CAAC,IAAD,EAAO/C,KAAP,EAAcuB,GAAd,EAAmB,KAAKiK,YAAL,CAAkBnK,IAAlB,CAAnB,CAApB,CAAZ;IACR,KALD,CAFJ;IAQH,GAXO;IAYRoK,EAAAA,UAAU,EAAE,oBAAUpK,IAAV,EAAgB;IACxB,WAAO,KAAK4E,IAAL,CAAU,YAAY;IACzB,WAAK9F,QAAL,KAAkB,CAAlB,IAAuBkB,IAAI,CAACwG,KAAL,CAAW,GAAX,EAAgBpE,OAAhB,CAAwB,UAAUiI,SAAV,EAAqB;IAChEzI,QAAAA,YAAY,CAAC,IAAD,EAAOyI,SAAP,CAAZ;IACH,OAFsB,EAEpB,IAFoB,CAAvB;IAGH,KAJM,CAAP;IAKH;IAlBO,CAAZ;;ICCAnO,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRyE,EAAAA,IAAI,EAAE,cAAU5H,IAAV,EAAgBrB,KAAhB,EAAuB;IACzBqB,IAAAA,IAAI,GAAGhC,OAAO,CAACgC,IAAD,CAAP,IAAiBA,IAAxB;IACA,WAAQ,OAAOA,IAAP,IAAe,QAAf,IAA2B,EAAE,KAAK0D,SAAP,CAA5B,GACF,KAAK,CAAL,KAAW,KAAK,CAAL,EAAQ1D,IAAR,CADT,GAEH,KAAK4E,IAAL,CAAU,UAAU1E,GAAV,EAAe;IACrB,UAAIlB,QAAQ,CAACgB,IAAD,CAAZ,EACI,KAAK,IAAI2E,GAAT,IAAgB3E,IAAhB;IAAsB,aAAKhC,OAAO,CAAC2G,GAAD,CAAP,IAAgBA,GAArB,IAA4B3E,IAAI,CAAC2E,GAAD,CAAhC;IAAtB,OADJ,MAEK,KAAK3E,IAAL,IAAa0B,OAAO,CAAC,IAAD,EAAO/C,KAAP,EAAcuB,GAAd,EAAmB,KAAKF,IAAL,CAAnB,CAApB;IACR,KAJD,CAFJ;IAOH,GAVO;IAWRsK,EAAAA,UAAU,EAAE,oBAAUtK,IAAV,EAAgB;IACxBA,IAAAA,IAAI,GAAGhC,OAAO,CAACgC,IAAD,CAAP,IAAiBA,IAAxB;IACA,WAAO,KAAK4E,IAAL,CAAU,YAAY;IAAE,aAAO,KAAK5E,IAAL,CAAP;IAAmB,KAA3C,CAAP;IACH;IAdO,CAAZ;;ICDA9D,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRa,EAAAA,GAAG,EAAE,aAAUrF,KAAV,EAAiB;IAClB,QAAI,KAAK+E,SAAT,EAAoB;IAChB,UAAI/E,KAAK,IAAI,IAAb,EAAmBA,KAAK,GAAG,EAAR;IACnB,aAAO,KAAKiG,IAAL,CAAU,UAAU1E,GAAV,EAAe;IAC5B,aAAKvB,KAAL,GAAa+C,OAAO,CAAC,IAAD,EAAO/C,KAAP,EAAcuB,GAAd,EAAmB,KAAKvB,KAAxB,CAApB;IACH,OAFM,CAAP;IAGH,KALD,MAKO;IACH,aAAO,KAAK,CAAL,MAAY,KAAK,CAAL,EAAQ4L,QAAR,GACfrO,CAAC,CAAC,KAAK,CAAL,CAAD,CAAD,CAAW4G,IAAX,CAAgB,QAAhB,EAA0BrG,MAA1B,CAAiC,YAAY;IAAE,eAAO,KAAK+N,QAAZ;IAAsB,OAArE,EAAuE7D,KAAvE,CAA6E,OAA7E,CADe,GAEf,KAAK,CAAL,EAAQhI,KAFL,CAAP;IAGH;IACJ;IAZO,CAAZ;;ICAAzC,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRsH,EAAAA,IAAI,EAAE,cAAUC,SAAV,EAAqB;IACvB,QAAIC,IAAI,GAAGjM,UAAU,CAACgM,SAAD,CAArB;IACA,QAAI,KAAK,CAAL,KAAW,CAACC,IAAhB,EACI,IAAIlI,GAAG,GAAGvG,CAAC,CAACwO,SAAD,CAAD,CAAazD,GAAb,CAAiB,CAAjB,CAAV;IAAA,QACIzD,KAAK,GAAGf,GAAG,CAACvB,UAAJ,IAAkB,KAAK9B,MAAL,GAAc,CAD5C;IAGJ,WAAO,KAAKwF,IAAL,CAAU,UAAUwC,KAAV,EAAiB;IAC9BlL,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ0O,OAAR,CACID,IAAI,GAAGD,SAAS,CAACpM,IAAV,CAAe,IAAf,EAAqB8I,KAArB,CAAH,GACA5D,KAAK,GAAGf,GAAG,CAACoI,SAAJ,CAAc,IAAd,CAAH,GAAyBpI,GAFtC;IAIH,KALM,CAAP;IAMH,GAbO;IAcRmI,EAAAA,OAAO,EAAE,iBAAUF,SAAV,EAAqB;IAC1B,QAAI,KAAK,CAAL,CAAJ,EAAa;IACTxO,MAAAA,CAAC,CAAC,KAAK,CAAL,CAAD,CAAD,CAAW4O,MAAX,CAAkBJ,SAAS,GAAGxO,CAAC,CAACwO,SAAD,CAA/B;IACA,UAAItJ,WAAJ,CAFS;;IAIT,aAAO,CAACA,WAAQ,GAAGsJ,SAAS,CAACtJ,QAAV,EAAZ,EAAkChC,MAAzC;IAAiDsL,QAAAA,SAAS,GAAGtJ,WAAQ,CAAC2F,KAAT,EAAZ;IAAjD;;IACA7K,MAAAA,CAAC,CAACwO,SAAD,CAAD,CAAaK,MAAb,CAAoB,IAApB;IACH;;IACD,WAAO,IAAP;IACH,GAvBO;IAwBRC,EAAAA,SAAS,EAAE,mBAAUN,SAAV,EAAqB;IAC5B,QAAIC,IAAI,GAAGjM,UAAU,CAACgM,SAAD,CAArB;IACA,WAAO,KAAK9F,IAAL,CAAU,UAAUwC,KAAV,EAAiB;IAC9B,UAAI6D,IAAI,GAAG/O,CAAC,CAAC,IAAD,CAAZ;IAAA,UACIgP,QAAQ,GAAGD,IAAI,CAACC,QAAL,EADf;IAAA,UAEIzI,GAAG,GAAGkI,IAAI,GAAGD,SAAS,CAACpM,IAAV,CAAe,IAAf,EAAqB8I,KAArB,CAAH,GAAiCsD,SAF/C;IAGAQ,MAAAA,QAAQ,CAAC9L,MAAT,GAAkB8L,QAAQ,CAACN,OAAT,CAAiBnI,GAAjB,CAAlB,GAA0CwI,IAAI,CAACF,MAAL,CAAYtI,GAAZ,CAA1C;IACH,KALM,CAAP;IAMH,GAhCO;IAiCR0I,EAAAA,MAAM,EAAE,kBAAY;IAChB,SAAKnG,MAAL,GAAcJ,IAAd,CAAmB,YAAY;IAC3B1I,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQkP,WAAR,CAAoBlP,CAAC,CAAC,IAAD,CAAD,CAAQkF,QAAR,EAApB;IACH,KAFD;IAGA,WAAO,IAAP;IACH;IAtCO,CAAZ;;ICCAlF,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRL,EAAAA,IAAI,EAAE,cAAU3G,QAAV,EAAoB;IACtB,QAAI+N,MAAJ;IAAA,QAAYzB,KAAK,GAAG,IAApB;IACA,QAAI,CAACtM,QAAL,EAAe+N,MAAM,GAAGhO,CAAC,EAAV,CAAf,KACK,IAAI,OAAOC,QAAP,IAAmB,QAAvB,EACD+N,MAAM,GAAGhO,CAAC,CAACC,QAAD,CAAD,CAAYM,MAAZ,CAAmB,YAAY;IACpC,UAAI8E,IAAI,GAAG,IAAX;IACA,aAAOhF,UAAU,CAACyL,IAAX,CAAgB1J,IAAhB,CAAqBmK,KAArB,EAA4B,UAAUzD,MAAV,EAAkB;IACjD,eAAO9I,CAAC,CAAC4I,QAAF,CAAWE,MAAX,EAAmBzD,IAAnB,CAAP;IACH,OAFM,CAAP;IAGH,KALQ,CAAT,CADC,KAOA,IAAI,KAAKnC,MAAL,IAAe,CAAnB,EAAsB8K,MAAM,GAAGhO,CAAC,CAACA,CAAC,CAAC6G,GAAF,CAAM,KAAK,CAAL,CAAN,EAAe5G,QAAf,CAAD,CAAV,CAAtB,KACA+N,MAAM,GAAG,KAAK7I,GAAL,CAAS,YAAY;IAAE,aAAOnF,CAAC,CAAC6G,GAAF,CAAM,IAAN,EAAY5G,QAAZ,CAAP;IAA8B,KAArD,CAAT;IACL,WAAO+N,MAAP;IACH,GAdO;IAeRzN,EAAAA,MAAM,EAAE,mBAAUN,QAAV,EAAoB;IACxB,QAAIuC,UAAU,CAACvC,QAAD,CAAd,EAA0B,OAAO,KAAKkP,GAAL,CAAS,KAAKA,GAAL,CAASlP,QAAT,CAAT,CAAP;IAC1B,WAAOD,CAAC,CAACO,MAAM,CAAC6B,IAAP,CAAY,IAAZ,EAAkB,UAAUsC,OAAV,EAAmB;IAC1C,aAAO1E,CAAC,CAACgK,OAAF,CAAUtF,OAAV,EAAmBzE,QAAnB,CAAP;IACH,KAFQ,CAAD,CAAR;IAGH,GApBO;IAqBRmP,EAAAA,GAAG,EAAE,aAAUnP,QAAV,EAAoB;IACrB,WAAO,KAAKM,MAAL,CAAY,YAAY;IAC3B,aAAOuC,QAAQ,CAAC7C,QAAD,CAAR,GACHD,CAAC,CAAC4I,QAAF,CAAW,IAAX,EAAiB3I,QAAjB,CADG,GAEHD,CAAC,CAAC,IAAD,CAAD,CAAQ4G,IAAR,CAAa3G,QAAb,EAAuBgL,IAAvB,EAFJ;IAGH,KAJM,CAAP;IAKH,GA3BO;IA4BRkE,EAAAA,GAAG,EAAE,aAAUlP,QAAV,EAAoB;IACrB,QAAIsF,KAAK,GAAG,EAAZ;IACA,QAAI/C,UAAU,CAACvC,QAAD,CAAV,IAAwBA,QAAQ,CAACmC,IAAT,KAAkB4D,SAA9C,EACI,KAAK0C,IAAL,CAAU,UAAU1E,GAAV,EAAe;IACrB,UAAI,CAAC/D,QAAQ,CAACmC,IAAT,CAAc,IAAd,EAAoB4B,GAApB,CAAL,EAA+BuB,KAAK,CAACa,IAAN,CAAW,IAAX;IAClC,KAFD,EADJ,KAIK;IACD,UAAIiJ,QAAQ,GAAG,OAAOpP,QAAP,IAAmB,QAAnB,GAA8B,KAAKM,MAAL,CAAYN,QAAZ,CAA9B,GACVgD,SAAS,CAAChD,QAAD,CAAT,IAAuBuC,UAAU,CAACvC,QAAQ,CAACqD,IAAV,CAAlC,GAAqD9C,KAAK,CAAC4B,IAAN,CAAWnC,QAAX,CAArD,GAA4ED,CAAC,CAACC,QAAD,CADjF;IAEA,WAAKiG,OAAL,CAAa,UAAUyE,EAAV,EAAc;IACvB,YAAI0E,QAAQ,CAACpL,OAAT,CAAiB0G,EAAjB,IAAuB,CAA3B,EAA8BpF,KAAK,CAACa,IAAN,CAAWuE,EAAX;IACjC,OAFD;IAGH;IACD,WAAO3K,CAAC,CAACuF,KAAD,CAAR;IACH,GA1CO;IA2CR+J,EAAAA,EAAE,EAAE,YAAUrP,QAAV,EAAoB;IACpB,WAAO,OAAOA,QAAP,IAAmB,QAAnB,GACD,KAAKiD,MAAL,GAAc,CAAd,IAAmBlD,CAAC,CAACgK,OAAF,CAAU,KAAK,CAAL,CAAV,EAAmB/J,QAAnB,CADlB,GAEDA,QAAQ,IAAI,KAAKA,QAAL,IAAiBA,QAAQ,CAACA,QAF5C;IAGH,GA/CO;IAiDRsP,EAAAA,GAAG,EAAE,aAAUtP,QAAV,EAAoBC,OAApB,EAA6B;IAC9B,WAAOF,CAAC,CAAC+D,IAAI,CAAC,KAAKzD,MAAL,CAAYN,CAAC,CAACC,QAAD,EAAWC,OAAX,CAAb,CAAD,CAAL,CAAR;IACH,GAnDO;IAoDR8O,EAAAA,QAAQ,EAAE,oBAAY;IAClB,WAAO,KAAK7J,GAAL,CAAS,YAAY;IAAE,aAAO,KAAKqK,eAAL,IAAwBhP,KAAK,CAAC4B,IAAN,CAAW,KAAKgD,UAAhB,CAA/B;IAA4D,KAAnF,CAAP;IACH,GAtDO;IAwDRqK,EAAAA,OAAO,EAAE,iBAAUxP,QAAV,EAAoBC,OAApB,EAA6B;IAClC,QAAIqF,KAAK,GAAG,EAAZ;IAAA,QACImK,UAAU,GAAG,OAAOzP,QAAP,IAAmB,QAAnB,IAA+BD,CAAC,CAACC,QAAD,CADjD;IAEA,SAAKyI,IAAL,CAAU,UAAU+C,CAAV,EAAapG,IAAb,EAAmB;IACzB,aAAOA,IAAI,IAAI,EAAEqK,UAAU,GAAGA,UAAU,CAACzL,OAAX,CAAmBoB,IAAnB,KAA4B,CAA/B,GAAmCrF,CAAC,CAACgK,OAAF,CAAU3E,IAAV,EAAgBpF,QAAhB,CAA/C,CAAf;IACIoF,QAAAA,IAAI,GAAGA,IAAI,KAAKnF,OAAT,IAAoB,CAACyC,UAAU,CAAC0C,IAAD,CAA/B,IAAyCA,IAAI,CAACL,UAArD;IADJ;;IAEA,UAAIK,IAAI,IAAIE,KAAK,CAACtB,OAAN,CAAcoB,IAAd,IAAsB,CAAlC,EAAqCE,KAAK,CAACa,IAAN,CAAWf,IAAX;IACxC,KAJD;IAKA,WAAOrF,CAAC,CAACuF,KAAD,CAAR;IACH,GAjEO;IAkERoK,EAAAA,OAAO,EAAE,iBAAU1P,QAAV,EAAoB;IACzB,QAAI2P,SAAS,GAAG,EAAhB;IAAA,QACIrK,KAAK,GAAG,IADZ;;IAEA,WAAOA,KAAK,CAACrC,MAAN,GAAe,CAAtB;IACIqC,MAAAA,KAAK,GAAGvF,CAAC,CAACmF,GAAF,CAAMI,KAAN,EAAa,UAAUF,IAAV,EAAgB;IACjC,YAAI,CAACA,IAAI,GAAGA,IAAI,CAACL,UAAb,KAA4B,CAACrC,UAAU,CAAC0C,IAAD,CAAvC,IAAiDuK,SAAS,CAAC3L,OAAV,CAAkBoB,IAAlB,IAA0B,CAA/E,EAAkF;IAC9EuK,UAAAA,SAAS,CAACxJ,IAAV,CAAef,IAAf;IACA,iBAAOA,IAAP;IACH;IACJ,OALO,CAAR;IADJ;;IAOA,WAAOC,QAAQ,CAACsK,SAAD,EAAY3P,QAAZ,CAAf;IACH,GA7EO;IA8ER6I,EAAAA,MAAM,EAAE,gBAAU7I,QAAV,EAAoB;IACxB,WAAOqF,QAAQ,CAACvB,IAAI,CAAC,KAAK0G,KAAL,CAAW,YAAX,CAAD,CAAL,EAAiCxK,QAAjC,CAAf;IACH,GAhFO;IAiFRiF,EAAAA,QAAQ,EAAE,qBAAUjF,QAAV,EAAoB;IAC1B,WAAOqF,QAAQ,CAAC,KAAKH,GAAL,CAAS,YAAY;IAAE,aAAOD,QAAQ,CAAC,IAAD,CAAf;IAAuB,KAA9C,CAAD,EAAkDjF,QAAlD,CAAf;IACH,GAnFO;IAoFR4P,EAAAA,QAAQ,EAAE,kBAAU5P,QAAV,EAAoB;IAC1B,WAAOqF,QAAQ,CAAC,KAAKH,GAAL,CAAS,UAAUsC,CAAV,EAAakD,EAAb,EAAiB;IACtC,aAAOpK,MAAM,CAAC6B,IAAP,CAAY8C,QAAQ,CAACyF,EAAE,CAAC3F,UAAJ,CAApB,EAAqC,UAAU8K,KAAV,EAAiB;IAAE,eAAOA,KAAK,KAAKnF,EAAjB;IAAqB,OAA7E,CAAP;IACH,KAFe,CAAD,EAEX1K,QAFW,CAAf;IAGH,GAxFO;IAyFR8P,EAAAA,IAAI,EAAE,cAAU9P,QAAV,EAAoB;IACtB,WAAOD,CAAC,CAAC,KAAKyK,KAAL,CAAW,wBAAX,CAAD,CAAD,CAAwClK,MAAxC,CAA+CN,QAAQ,IAAI,GAA3D,CAAP;IACH,GA3FO;IA4FR+P,EAAAA,IAAI,EAAE,cAAU/P,QAAV,EAAoB;IACtB,WAAOD,CAAC,CAAC,KAAKyK,KAAL,CAAW,oBAAX,CAAD,CAAD,CAAoClK,MAApC,CAA2CN,QAAQ,IAAI,GAAvD,CAAP;IACH;IA9FO,CAAZ;;ICAA,SAASgQ,QAAT,CAAkBtF,EAAlB,EAAsBuF,KAAtB,EAA6B;IACzB,SAAOvF,EAAE,CAACW,GAAH,CAAO,YAAP,MAAyB,YAAzB,GACD4E,KAAK,KAAK,OAAV,GACK1C,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO4E,KAAP,CAAD,CAAV,GACG1C,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,cAAP,CAAD,CADb,GAEGkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,eAAP,CAAD,CAFb,GAGGkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,aAAP,CAAD,CAHb,GAIGkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,cAAP,CAAD,CALlB,GAMKkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO4E,KAAP,CAAD,CAAV,GACG1C,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,aAAP,CAAD,CADb,GAEGkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,gBAAP,CAAD,CAFb,GAGGkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,YAAP,CAAD,CAHb,GAIGkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO,eAAP,CAAD,CAXjB,GAYDkC,UAAU,CAAC7C,EAAE,CAACW,GAAH,CAAO4E,KAAP,CAAD,CAZhB;IAaH;;IAED7O,UAAU,CAAC6E,OAAX,CAAmB,UAAUiK,SAAV,EAAqB;IACpC,MAAIC,iBAAiB,GACjBD,SAAS,CAACxM,OAAV,CAAkB,GAAlB,EAAuB,UAAU0M,CAAV,EAAa;IAAE,WAAOA,CAAC,CAAC,CAAD,CAAD,CAAKhM,WAAL,EAAP;IAA2B,GAAjE,CADJ;;IAGArE,EAAAA,CAAC,CAACG,EAAF,CAAKgQ,SAAL,IAAkB,UAAU1N,KAAV,EAAiB;IAC/B,QAAIkI,EAAE,GAAG,KAAK,CAAL,CAAT;IACA,QAAIlI,KAAK,KAAKuD,SAAd,EAAyB,OAAOtD,QAAQ,CAACiI,EAAD,CAAR,GAC1BA,EAAE,CAAC,UAAUyF,iBAAX,CADwB,GAE1BzN,UAAU,CAACgI,EAAD,CAAV,GACIA,EAAE,CAAC9B,eAAH,CAAmB,WAAWuH,iBAA9B,CADJ,GAEIH,QAAQ,CAAC,IAAD,EAAOE,SAAP,CAJO,CAAzB,KAKK,OAAO,KAAKzH,IAAL,CAAU,UAAU1E,GAAV,EAAe;IACjC2G,MAAAA,EAAE,GAAG3K,CAAC,CAAC,IAAD,CAAN;IACA2K,MAAAA,EAAE,CAACW,GAAH,CAAO6E,SAAP,EAAkB3K,OAAO,CAAC,IAAD,EAAO/C,KAAP,EAAcuB,GAAd,EAAmB2G,EAAE,CAACwF,SAAD,CAAF,EAAnB,CAAzB;IACH,KAHW,CAAP;IAIR,GAXD;IAYH,CAhBD;;IChBAnQ,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACRqJ,EAAAA,MAAM,EAAE,kBAAY;IAChB,WAAO,KAAK5H,IAAL,CAAU,YAAY;IACzB,UAAI,KAAK1D,UAAL,IAAmB,IAAvB,EACI,KAAKA,UAAL,CAAgBC,WAAhB,CAA4B,IAA5B;IACP,KAHM,CAAP;IAIH,GANO;IAORsL,EAAAA,KAAK,EAAE,iBAAY;IACf,WAAO,KAAK7H,IAAL,CAAU,YAAY;IAAE,WAAKU,SAAL,GAAiB,EAAjB;IAAqB,KAA7C,CAAP;IACH,GATO;IAUR9B,EAAAA,KAAK,EAAE,iBAAY;IACf,WAAO,KAAKnC,GAAL,CAAS,YAAY;IAAE,aAAO,KAAKwJ,SAAL,CAAe,IAAf,CAAP;IAA6B,KAApD,CAAP;IACH,GAZO;IAcR1F,EAAAA,IAAI,EAAE,cAAUA,KAAV,EAAgB;IAClB,WAAO,KAAKzB,SAAL,GACH,KAAKkB,IAAL,CAAU,UAAU1E,GAAV,EAAe;IACrB,UAAIwM,UAAU,GAAG,KAAKpH,SAAtB;IACApJ,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQuQ,KAAR,GAAgB1B,MAAhB,CAAuBrJ,OAAO,CAAC,IAAD,EAAOyD,KAAP,EAAajF,GAAb,EAAkBwM,UAAlB,CAA9B;IACH,KAHD,CADG,GAKF,KAAK,IAAL,GAAY,KAAK,CAAL,EAAQpH,SAApB,GAAgC,IALrC;IAMH,GArBO;IAsBRqH,EAAAA,IAAI,EAAE,cAAUA,KAAV,EAAgB;IAClB,WAAO,KAAKjJ,SAAL,GACH,KAAKkB,IAAL,CAAU,UAAU1E,GAAV,EAAe;IACrB,UAAI0M,OAAO,GAAGlL,OAAO,CAAC,IAAD,EAAOiL,KAAP,EAAazM,GAAb,EAAkB,KAAK2M,WAAvB,CAArB;IACA,WAAKA,WAAL,GAAmBD,OAAO,IAAI,IAAX,GAAkB,EAAlB,GAAuB,KAAKA,OAA/C;IACH,KAHD,CADG,GAKF,KAAK,IAAL,GAAY,KAAKjG,KAAL,CAAW,aAAX,EAA0B0B,IAA1B,CAA+B,EAA/B,CAAZ,GAAiD,IALtD;IAMH,GA7BO;IA+BR+C,EAAAA,WAAW,EAAE,qBAAU0B,UAAV,EAAsB;IAC/B,WAAO,KAAKhC,MAAL,CAAYgC,UAAZ,EAAwBN,MAAxB,EAAP;IACH;IAjCO,CAAZ;;IAoCA,SAASO,YAAT,CAAsBxL,IAAtB,EAA4BlF,EAA5B,EAAgC;IAC5BA,EAAAA,EAAE,CAACkF,IAAD,CAAF;;IACA,OAAK,IAAIoC,CAAC,GAAG,CAAR,EAAWuB,GAAG,GAAG3D,IAAI,CAACD,UAAL,CAAgBlC,MAAtC,EAA8CuE,CAAC,GAAGuB,GAAlD,EAAuDvB,CAAC,EAAxD;IACIoJ,IAAAA,YAAY,CAACxL,IAAI,CAACD,UAAL,CAAgBqC,CAAhB,CAAD,EAAqBtH,EAArB,CAAZ;IADJ;IAEH;IAGD;;;IACAiB,kBAAkB,CAAC8E,OAAnB,CAA2B,UAAU4K,QAAV,EAAoBC,aAApB,EAAmC;IAC1D,MAAIC,MAAM,GAAGD,aAAa,GAAG,CAA7B,CAD0D;;IAG1D/Q,EAAAA,CAAC,CAACG,EAAF,CAAK2Q,QAAL,IAAiB,YAAY;IACzB;IACA,QAAIG,OAAJ;IAAA,QACI1L,KAAK,GAAGvF,CAAC,CAACmF,GAAF,CAAMqC,SAAN,EAAiB,UAAUvF,GAAV,EAAe;IACpC,UAAIiP,GAAG,GAAG,EAAV;IACAD,MAAAA,OAAO,GAAG5O,IAAI,CAACJ,GAAD,CAAd;;IACA,UAAIgP,OAAO,IAAI,OAAf,EAAwB;IACpBhP,QAAAA,GAAG,CAACiE,OAAJ,CAAY,UAAUyE,EAAV,EAAc;IACtB,cAAIA,EAAE,CAAC/H,QAAH,KAAgBoD,SAApB,EAA+B,OAAOkL,GAAG,CAAC9K,IAAJ,CAASuE,EAAT,CAAP,CAA/B,KACK,IAAI3K,CAAC,CAAC+G,GAAF,CAAM4D,EAAN,CAAJ,EAAe,OAAOuG,GAAG,GAAGA,GAAG,CAAC5Q,MAAJ,CAAWqK,EAAE,CAACI,GAAH,EAAX,CAAb;IACpBmG,UAAAA,GAAG,GAAGA,GAAG,CAAC5Q,MAAJ,CAAWN,CAAC,CAAC0G,QAAF,CAAWiE,EAAX,CAAX,CAAN;IACH,SAJD;IAKA,eAAOuG,GAAP;IACH;;IAED,aAAOD,OAAO,IAAI,QAAX,IAAuBhP,GAAG,IAAI,IAA9B,GACDA,GADC,GAEDjC,CAAC,CAAC0G,QAAF,CAAWzE,GAAX,CAFN;IAGH,KAfO,CADZ;IAAA,QAiBI6G,MAjBJ;IAAA,QAkBIqI,WAAW,GAAG,KAAKjO,MAAL,GAAc,CAlBhC;IAoBA,QAAIqC,KAAK,CAACrC,MAAN,GAAe,CAAnB,EAAsB,OAAO,IAAP;IAEtB,WAAO,KAAKwF,IAAL,CAAU,UAAU+C,CAAV,EAAalE,MAAb,EAAqB;IAClCuB,MAAAA,MAAM,GAAGkI,MAAM,GAAGzJ,MAAH,GAAYA,MAAM,CAACvC,UAAlC,CADkC;;IAIlCuC,MAAAA,MAAM,GAAGwJ,aAAa,IAAI,CAAjB,GACHxJ,MAAM,CAAC6J,WADJ,GAEHL,aAAa,IAAI,CAAjB,GACIxJ,MAAM,CAAC8J,UADX,GAEIN,aAAa,IAAI,CAAjB,GACIxJ,MADJ,GACa,IALvB;IAOA,UAAI+J,gBAAgB,GAAGtR,CAAC,CAAC4I,QAAF,CAAWnI,UAAQ,CAACoI,eAApB,EAAqCC,MAArC,CAAvB;IAEAvD,MAAAA,KAAK,CAACW,OAAN,CAAc,UAAUb,IAAV,EAAgB;IAE1B,YAAI8L,WAAJ,EAAiB;IACb9L,UAAAA,IAAI,GAAGA,IAAI,CAACsJ,SAAL,CAAe,IAAf,CAAP;IACH,SAFD,MAEO,IAAI,CAAC7F,MAAL,EAAa;IAChB,iBAAO9I,CAAC,CAACqF,IAAD,CAAD,CAAQiL,MAAR,EAAP;IACH;;IAEDxH,QAAAA,MAAM,CAACyI,YAAP,CAAoBlM,IAApB,EAA0BkC,MAA1B;;IAEA,YAAI+J,gBAAJ,EAAsB;IAClBT,UAAAA,YAAY,CAACxL,IAAD,EAAO,UAAUsF,EAAV,EAAc;IAC7B,gBAAIA,EAAE,CAAClG,QAAH,IAAe,IAAf,IAAuBkG,EAAE,CAAClG,QAAH,CAAYJ,WAAZ,OAA8B,QAArD,KACC,CAACsG,EAAE,CAACtI,IAAJ,IAAYsI,EAAE,CAACtI,IAAH,KAAY,iBADzB,KAC+C,CAACsI,EAAE,CAACxD,GADvD,EAC4D;IACxD,kBAAII,MAAM,GAAGoD,EAAE,CAAC6G,aAAH,GAAmB7G,EAAE,CAAC6G,aAAH,CAAiBC,WAApC,GAAkD/Q,MAA/D;IACA6G,cAAAA,MAAM,CAAC,MAAD,CAAN,CAAenF,IAAf,CAAoBmF,MAApB,EAA4BoD,EAAE,CAACvB,SAA/B;IACH;IACJ,WANW,CAAZ;IAOH;IACJ,OAnBD;IAoBH,KAjCM,CAAP;IAkCH,GA1DD,CAH0D;IAgE1D;IACA;IACA;;;IACApJ,EAAAA,CAAC,CAACG,EAAF,CAAK6Q,MAAM,GAAGF,QAAQ,GAAG,IAAd,GAAqB,YAAYC,aAAa,GAAG,QAAH,GAAc,OAAvC,CAAhC,IAAmF,UAAU9H,IAAV,EAAgB;IAC/FjJ,IAAAA,CAAC,CAACiJ,IAAD,CAAD,CAAQ6H,QAAR,EAAkB,IAAlB;IACA,WAAO,IAAP;IACH,GAHD;IAIH,CAvED;;IC5CA,IAAIY,IAAI,GAAG,CAAX;IAAA,IACEC,QAAQ,GAAG,EADb;IAAA,IAEEC,aAAa,GAAG;IACdC,EAAAA,KAAK,EAAE,aADO;IAEdC,EAAAA,SAAS,EAAE,aAFG;IAGdC,EAAAA,OAAO,EAAE,aAHK;IAIdC,EAAAA,SAAS,EAAE;IAJG,CAFlB;IAAA,IAQEC,gBAAgB,GAAG,eAAevR,MARpC;IAAA,IASEwR,KAAK,GAAG;IAAEA,EAAAA,KAAK,EAAE,SAAT;IAAoBC,EAAAA,IAAI,EAAE;IAA1B,CATV;IAAA,IAUEC,KAAK,GAAG;IAAEC,EAAAA,UAAU,EAAE,WAAd;IAA2BC,EAAAA,UAAU,EAAE;IAAvC,CAVV;IAAA,IAWEC,gBAAgB,GAAG,sDAXrB;IAAA,IAYEC,YAAY,GAAG;IACbC,EAAAA,cAAc,EAAE,oBADH;IAEbC,EAAAA,wBAAwB,EAAE,+BAFb;IAGbC,EAAAA,eAAe,EAAE;IAHJ,CAZjB;;IAkBA,SAASC,QAAT,CAAkBtQ,GAAlB,EAAuB;IACrB,SAAO,OAAOA,GAAP,IAAc,QAArB;IACD;;IACD,SAASuQ,UAAT,GAAsB;IACpB,SAAO,IAAP;IACD;;IACD,SAASC,WAAT,GAAuB;IACrB,SAAO,KAAP;IACD;;IACD,SAASC,GAAT,CAAarO,OAAb,EAAsB;IACpB,SAAOA,OAAO,CAACgN,IAAR,KAAiBhN,OAAO,CAACgN,IAAR,GAAeA,IAAI,EAApC,CAAP;IACD;;IACD,SAASsB,YAAT,CAAsBtO,OAAtB,EAA+BuO,KAA/B,EAAsC9S,EAAtC,EAA0CF,QAA1C,EAAoD;IAClDgT,EAAAA,KAAK,GAAGC,KAAK,CAACD,KAAD,CAAb;IACA,MAAIA,KAAK,CAACE,EAAV,EAAc,IAAIC,OAAO,GAAGC,UAAU,CAACJ,KAAK,CAACE,EAAP,CAAxB;IACd,SAAO,CAACxB,QAAQ,CAACoB,GAAG,CAACrO,OAAD,CAAJ,CAAR,IAA0B,EAA3B,EAA+BnE,MAA/B,CAAsC,UAAU+S,OAAV,EAAmB;IAC9D,WAAOA,OAAO,KACR,CAACL,KAAK,CAACM,CAAP,IAAYD,OAAO,CAACC,CAAR,IAAaN,KAAK,CAACM,CADvB,CAAP,KAED,CAACN,KAAK,CAACE,EAAP,IAAaC,OAAO,CAAC3M,IAAR,CAAa6M,OAAO,CAACH,EAArB,CAFZ,MAGD,CAAChT,EAAD,IAAO4S,GAAG,CAACO,OAAO,CAACnT,EAAT,CAAH,KAAoB4S,GAAG,CAAC5S,EAAD,CAH7B,MAID,CAACF,QAAD,IAAaqT,OAAO,CAACE,GAAR,IAAevT,QAJ3B,CAAP;IAKD,GANM,CAAP;IAOD;;IACD,SAASiT,KAAT,CAAeD,KAAf,EAAsB;IACpB,MAAIQ,KAAK,GAAG,CAAC,KAAKR,KAAN,EAAa3I,KAAb,CAAmB,GAAnB,CAAZ;IACA,SAAO;IAAEiJ,IAAAA,CAAC,EAAEE,KAAK,CAAC,CAAD,CAAV;IAAeN,IAAAA,EAAE,EAAEM,KAAK,CAACjT,KAAN,CAAY,CAAZ,EAAe6F,IAAf,GAAsB8F,IAAtB,CAA2B,GAA3B;IAAnB,GAAP;IACD;;IACD,SAASkH,UAAT,CAAoBF,EAApB,EAAwB;IACtB,SAAO,IAAI5O,MAAJ,CAAW,YAAY4O,EAAE,CAACxP,OAAH,CAAW,GAAX,EAAgB,OAAhB,CAAZ,GAAuC,SAAlD,CAAP;IACD;;IAED,SAAS+P,YAAT,CAAsBJ,OAAtB,EAA+BK,cAA/B,EAA+C;IAC7C,SAAOL,OAAO,CAACM,GAAR,IACJ,CAAC3B,gBAAD,IAAsBqB,OAAO,CAACC,CAAR,IAAarB,KAD/B,IAEL,CAAC,CAACyB,cAFJ;IAGD;;IAED,SAASE,SAAT,CAAmBxR,OAAnB,EAAyB;IACvB,SAAO+P,KAAK,CAAC/P,OAAD,CAAL,IAAgB4P,gBAAgB,IAAIC,KAAK,CAAC7P,OAAD,CAAzC,IAAoDA,OAA3D;IACD;;IAED,SAASkN,GAAT,CAAa7K,OAAb,EAAsBoP,MAAtB,EAA8B3T,EAA9B,EAAkC4T,IAAlC,EAAwC9T,QAAxC,EAAkD+T,SAAlD,EAA6DC,OAA7D,EAAsE;IACpE,MAAIC,EAAE,GAAGnB,GAAG,CAACrO,OAAD,CAAZ;IAAA,MAAuByP,GAAG,GAAIxC,QAAQ,CAACuC,EAAD,CAAR,KAAiBvC,QAAQ,CAACuC,EAAD,CAAR,GAAe,EAAhC,CAA9B;IACAJ,EAAAA,MAAM,CAACxJ,KAAP,CAAa,IAAb,EAAmBpE,OAAnB,CAA2B,UAAU+M,KAAV,EAAiB;IAC1C,QAAIA,KAAK,IAAI,OAAb,EAAsB,OAAOjT,CAAC,CAACS,UAAD,CAAD,CAAYqG,KAAZ,CAAkB3G,EAAlB,CAAP;IACtB,QAAImT,OAAO,GAAGJ,KAAK,CAACD,KAAD,CAAnB;IACAK,IAAAA,OAAO,CAACnT,EAAR,GAAaA,EAAb;IACAmT,IAAAA,OAAO,CAACE,GAAR,GAAcvT,QAAd,CAJ0C;;IAM1C,QAAIqT,OAAO,CAACC,CAAR,IAAanB,KAAjB,EAAwBjS,EAAE,GAAG,YAAUoT,CAAV,EAAa;IACxC,UAAIa,OAAO,GAAGb,CAAC,CAACc,aAAhB;IACA,UAAI,CAACD,OAAD,IAAaA,OAAO,KAAK,IAAZ,IAAoB,CAACpU,CAAC,CAAC4I,QAAF,CAAW,IAAX,EAAiBwL,OAAjB,CAAtC,EACE,OAAOd,OAAO,CAACnT,EAAR,CAAWqD,KAAX,CAAiB,IAAjB,EAAuBgE,SAAvB,CAAP;IACH,KAJuB;IAKxB8L,IAAAA,OAAO,CAACM,GAAR,GAAcI,SAAd;IACA,QAAIzL,QAAQ,GAAGyL,SAAS,IAAI7T,EAA5B;;IACAmT,IAAAA,OAAO,CAACgB,KAAR,GAAgB,UAAUf,CAAV,EAAa;IAC3BA,MAAAA,CAAC,GAAGgB,UAAU,CAAChB,CAAD,CAAd;IACA,UAAIA,CAAC,CAACiB,6BAAF,EAAJ,EAAuC;IACvCjB,MAAAA,CAAC,CAACQ,IAAF,GAASA,IAAT;IACA,UAAI/F,MAAM,GAAGzF,QAAQ,CAAC/E,KAAT,CAAekB,OAAf,EAAwB6O,CAAC,CAACkB,KAAF,IAAWzO,SAAX,GAAuB,CAACuN,CAAD,CAAvB,GAA6B,CAACA,CAAD,EAAIjT,MAAJ,CAAWiT,CAAC,CAACkB,KAAb,CAArD,CAAb;IACA,UAAIzG,MAAM,KAAK,KAAf,EAAsBuF,CAAC,CAACd,cAAF,IAAoBc,CAAC,CAACZ,eAAF,EAApB;IACtB,aAAO3E,MAAP;IACD,KAPD;;IAQAsF,IAAAA,OAAO,CAAC7L,CAAR,GAAY0M,GAAG,CAACjR,MAAhB;IACAiR,IAAAA,GAAG,CAAC/N,IAAJ,CAASkN,OAAT;IACA,QAAI,sBAAsB5O,OAA1B,EACEA,OAAO,CAACgQ,gBAAR,CAAyBb,SAAS,CAACP,OAAO,CAACC,CAAT,CAAlC,EAA+CD,OAAO,CAACgB,KAAvD,EAA8DZ,YAAY,CAACJ,OAAD,EAAUW,OAAV,CAA1E;IACH,GAzBD;IA0BD;;IACD,SAAS3D,MAAT,CAAgB5L,OAAhB,EAAyBoP,MAAzB,EAAiC3T,EAAjC,EAAqCF,QAArC,EAA+CgU,OAA/C,EAAwD;IACtD,MAAIC,EAAE,GAAGnB,GAAG,CAACrO,OAAD,CAAZ;IACI,GAACoP,MAAM,IAAI,EAAX,EAAexJ,KAAf,CAAqB,IAArB,EAA2BpE,OAA3B,CAAmC,UAAU+M,KAAV,EAAiB;IACpDD,IAAAA,YAAY,CAACtO,OAAD,EAAUuO,KAAV,EAAiB9S,EAAjB,EAAqBF,QAArB,CAAZ,CAA2CiG,OAA3C,CAAmD,UAAUoN,OAAV,EAAmB;IACpE,aAAO3B,QAAQ,CAACuC,EAAD,CAAR,CAAaZ,OAAO,CAAC7L,CAArB,CAAP;IACA,UAAI,yBAAyB/C,OAA7B,EACEA,OAAO,CAACiQ,mBAAR,CAA4Bd,SAAS,CAACP,OAAO,CAACC,CAAT,CAArC,EAAkDD,OAAO,CAACgB,KAA1D,EAAiEZ,YAAY,CAACJ,OAAD,EAAUW,OAAV,CAA7E;IACH,KAJD;IAKD,GANC;IAOL;;IAED,SAASM,UAAT,CAAoBtB,KAApB,EAA2B2B,MAA3B,EAAmC;IACjC,MAAIA,MAAM,IAAI,CAAC3B,KAAK,CAAC4B,kBAArB,EAAyC;IACvCD,IAAAA,MAAM,KAAKA,MAAM,GAAG3B,KAAd,CAAN;IAEAjT,IAAAA,CAAC,CAAC0I,IAAF,CAAO8J,YAAP,EAAqB,UAAU1O,IAAV,EAAgBgR,SAAhB,EAA2B;IAC9C,UAAIC,YAAY,GAAGH,MAAM,CAAC9Q,IAAD,CAAzB;;IACAmP,MAAAA,KAAK,CAACnP,IAAD,CAAL,GAAc,YAAY;IACxB,aAAKgR,SAAL,IAAkBjC,UAAlB;IACA,eAAOkC,YAAY,IAAIA,YAAY,CAACvR,KAAb,CAAmBoR,MAAnB,EAA2BpN,SAA3B,CAAvB;IACD,OAHD;;IAIAyL,MAAAA,KAAK,CAAC6B,SAAD,CAAL,GAAmBhC,WAAnB;IACD,KAPD;;IASA,QAAI;IACFG,MAAAA,KAAK,CAAC+B,SAAN,KAAoB/B,KAAK,CAAC+B,SAAN,GAAkBC,IAAI,CAACC,GAAL,EAAtC;IACD,KAFD,CAEE,OAAOC,OAAP,EAAgB;;IAElB,QAAIP,MAAM,CAACQ,gBAAP,KAA4BpP,SAA5B,GAAwC4O,MAAM,CAACQ,gBAA/C,GACF,iBAAiBR,MAAjB,GAA0BA,MAAM,CAACS,WAAP,KAAuB,KAAjD,GACET,MAAM,CAACU,iBAAP,IAA4BV,MAAM,CAACU,iBAAP,EAFhC,EAGErC,KAAK,CAAC4B,kBAAN,GAA2BhC,UAA3B;IACH;;IACD,SAAOI,KAAP;IACD;;IAED,SAASsC,WAAT,CAAqBtC,KAArB,EAA4B;IAC1B,MAAIxK,GAAJ;IAAA,MAAS6L,KAAK,GAAG;IAAEkB,IAAAA,aAAa,EAAEvC;IAAjB,GAAjB;;IACA,OAAKxK,GAAL,IAAYwK,KAAZ;IACE,QAAI,CAACV,gBAAgB,CAAC9L,IAAjB,CAAsBgC,GAAtB,CAAD,IAA+BwK,KAAK,CAACxK,GAAD,CAAL,KAAezC,SAAlD,EAA6DsO,KAAK,CAAC7L,GAAD,CAAL,GAAawK,KAAK,CAACxK,GAAD,CAAlB;IAD/D;;IAGA,SAAO8L,UAAU,CAACD,KAAD,EAAQrB,KAAR,CAAjB;IACD;;IAEDjT,CAAC,CAACiT,KAAF,GAAU;IAAE1D,EAAAA,GAAG,EAAEA,GAAP;IAAYe,EAAAA,MAAM,EAAEA;IAApB,CAAV;;IAEAtQ,CAAC,CAACyV,KAAF,GAAU,UAAUpT,OAAV,EAAgBkJ,KAAhB,EAAuB;IAC/B,MAAI,CAACqH,QAAQ,CAACvQ,OAAD,CAAb,EAAqBkJ,KAAK,GAAGlJ,OAAR,EAAcA,OAAI,GAAGkJ,KAAK,CAAClJ,IAA3B;IACrB,MAAI4Q,KAAK,GAAGxS,UAAQ,CAACiV,WAAT,CAAqB9D,aAAa,CAACvP,OAAD,CAAb,IAAuB,QAA5C,CAAZ;IAAA,MAAmEsT,OAAO,GAAG,IAA7E;IACA,MAAIpK,KAAJ,EAAW,KAAK,IAAIzH,IAAT,IAAiByH,KAAjB;IAAyBzH,IAAAA,IAAI,IAAI,SAAT,GAAuB6R,OAAO,GAAG,CAAC,CAACpK,KAAK,CAACzH,IAAD,CAAxC,GAAmDmP,KAAK,CAACnP,IAAD,CAAL,GAAcyH,KAAK,CAACzH,IAAD,CAAtE;IAAxB;IACXmP,EAAAA,KAAK,CAAC2C,SAAN,CAAgBvT,OAAhB,EAAsBsT,OAAtB,EAA+B,IAA/B;IACA,SAAOpB,UAAU,CAACtB,KAAD,CAAjB;IACD,CAND;;IAQAjT,CAAC,CAACsU,KAAF,GAAU,UAAUnU,EAAV,EAAcD,OAAd,EAAuB;IAC/B,MAAIqK,IAAI,GAAI,KAAK/C,SAAN,IAAoBhH,KAAK,CAAC4B,IAAN,CAAWoF,SAAX,EAAsB,CAAtB,CAA/B;;IACA,MAAIhF,UAAU,CAACrC,EAAD,CAAd,EAAoB;IAClB,QAAI0V,OAAO,GAAG,SAAVA,OAAU,GAAY;IAAE,aAAO1V,EAAE,CAACqD,KAAH,CAAStD,OAAT,EAAkBqK,IAAI,GAAGA,IAAI,CAACjK,MAAL,CAAYE,KAAK,CAAC4B,IAAN,CAAWoF,SAAX,CAAZ,CAAH,GAAwCA,SAA9D,CAAP;IAAiF,KAA7G;;IACAqO,IAAAA,OAAO,CAACnE,IAAR,GAAeqB,GAAG,CAAC5S,EAAD,CAAlB;IACA,WAAO0V,OAAP;IACD,GAJD,MAIO,IAAIjD,QAAQ,CAAC1S,OAAD,CAAZ,EAAuB;IAC5B,QAAIqK,IAAJ,EAAU;IACRA,MAAAA,IAAI,CAACuL,OAAL,CAAa3V,EAAE,CAACD,OAAD,CAAf,EAA0BC,EAA1B;IACA,aAAOH,CAAC,CAACsU,KAAF,CAAQ9Q,KAAR,CAAc,IAAd,EAAoB+G,IAApB,CAAP;IACD,KAHD,MAGO;IACL,aAAOvK,CAAC,CAACsU,KAAF,CAAQnU,EAAE,CAACD,OAAD,CAAV,EAAqBC,EAArB,CAAP;IACD;IACF,GAPM,MAOA;IACL,UAAM,IAAI4V,SAAJ,CAAc,mBAAd,CAAN;IACD;IACF,CAhBD;;IAkBA/V,CAAC,CAACG,EAAF,CAAK6V,GAAL,GAAW,UAAU/C,KAAV,EAAiBhT,QAAjB,EAA2B8T,IAA3B,EAAiCxL,QAAjC,EAA2C;IACpD,SAAO,KAAK0N,EAAL,CAAQhD,KAAR,EAAehT,QAAf,EAAyB8T,IAAzB,EAA+BxL,QAA/B,EAAyC,CAAzC,CAAP;IACD,CAFD;;IAIAvI,CAAC,CAACG,EAAF,CAAK8V,EAAL,GAAU,UAAUhD,KAAV,EAAiBhT,QAAjB,EAA2B8T,IAA3B,EAAiCxL,QAAjC,EAA2CyN,GAA3C,EAAgD;IACxD,MAAIE,UAAJ;IAAA,MAAgBlC,SAAhB;IAAA,MAA2BzH,KAAK,GAAG,IAAnC;;IACA,MAAI0G,KAAK,IAAI,CAACL,QAAQ,CAACK,KAAD,CAAtB,EAA+B;IAC7BjT,IAAAA,CAAC,CAAC0I,IAAF,CAAOuK,KAAP,EAAc,UAAU5Q,OAAV,EAAgBlC,EAAhB,EAAoB;IAChCoM,MAAAA,KAAK,CAAC0J,EAAN,CAAS5T,OAAT,EAAepC,QAAf,EAAyB8T,IAAzB,EAA+B5T,EAA/B,EAAmC6V,GAAnC;IACD,KAFD;IAGA,WAAOzJ,KAAP;IACD;;IAED,MAAI,CAACqG,QAAQ,CAAC3S,QAAD,CAAT,IAAuB,CAACuC,UAAU,CAAC+F,QAAD,CAAlC,IAAgDA,QAAQ,KAAK,KAAjE,EACEA,QAAQ,GAAGwL,IAAX,EAAiBA,IAAI,GAAG9T,QAAxB,EAAkCA,QAAQ,GAAG+F,SAA7C;IACF,MAAIuC,QAAQ,KAAKvC,SAAb,IAA0B+N,IAAI,KAAK,KAAvC,EACExL,QAAQ,GAAGwL,IAAX,EAAiBA,IAAI,GAAG/N,SAAxB;IAEF,MAAIuC,QAAQ,KAAK,KAAjB,EAAwBA,QAAQ,GAAGuK,WAAX;IAExB,SAAOvG,KAAK,CAAC7D,IAAN,CAAW,UAAU+C,CAAV,EAAa/G,OAAb,EAAsB;IACtC,QAAIsR,GAAJ,EAASE,UAAU,GAAG,oBAAU3C,CAAV,EAAa;IACjCjD,MAAAA,MAAM,CAAC5L,OAAD,EAAU6O,CAAC,CAAClR,IAAZ,EAAkBkG,QAAlB,CAAN;IACA,aAAOA,QAAQ,CAAC/E,KAAT,CAAe,IAAf,EAAqBgE,SAArB,CAAP;IACD,KAHQ;IAKT,QAAIvH,QAAJ,EAAc+T,SAAS,GAAG,mBAAUT,CAAV,EAAa;IACrC,UAAI4C,GAAJ;IAAA,UAAShS,KAAK,GAAGnE,CAAC,CAACuT,CAAC,CAAChM,MAAH,CAAD,CAAYkI,OAAZ,CAAoBxP,QAApB,EAA8ByE,OAA9B,EAAuCqG,GAAvC,CAA2C,CAA3C,CAAjB;;IACA,UAAI5G,KAAK,IAAIA,KAAK,KAAKO,OAAvB,EAAgC;IAC9ByR,QAAAA,GAAG,GAAGnW,CAAC,CAACiH,MAAF,CAASsO,WAAW,CAAChC,CAAD,CAApB,EAAyB;IAAE6C,UAAAA,aAAa,EAAEjS,KAAjB;IAAwBkS,UAAAA,SAAS,EAAE3R;IAAnC,SAAzB,CAAN;IACA,eAAO,CAACwR,UAAU,IAAI3N,QAAf,EAAyB/E,KAAzB,CAA+BW,KAA/B,EAAsC,CAACgS,GAAD,EAAM7V,MAAN,CAAaE,KAAK,CAAC4B,IAAN,CAAWoF,SAAX,EAAsB,CAAtB,CAAb,CAAtC,CAAP;IACD;IACF,KANa;IAQd+H,IAAAA,GAAG,CAAC7K,OAAD,EAAUuO,KAAV,EAAiB1K,QAAjB,EAA2BwL,IAA3B,EAAiC9T,QAAjC,EAA2C+T,SAAS,IAAIkC,UAAxD,CAAH;IACD,GAfM,CAAP;IAgBD,CAhCD;;IAkCAlW,CAAC,CAACG,EAAF,CAAKmW,GAAL,GAAW,UAAUrD,KAAV,EAAiBhT,QAAjB,EAA2BsI,QAA3B,EAAqC;IAC9C,MAAIgE,KAAK,GAAG,IAAZ;;IACA,MAAI0G,KAAK,IAAI,CAACL,QAAQ,CAACK,KAAD,CAAtB,EAA+B;IAC7BjT,IAAAA,CAAC,CAAC0I,IAAF,CAAOuK,KAAP,EAAc,UAAU5Q,OAAV,EAAgBlC,EAAhB,EAAoB;IAChCoM,MAAAA,KAAK,CAAC+J,GAAN,CAAUjU,OAAV,EAAgBpC,QAAhB,EAA0BE,EAA1B;IACD,KAFD;IAGA,WAAOoM,KAAP;IACD;;IAED,MAAI,CAACqG,QAAQ,CAAC3S,QAAD,CAAT,IAAuB,CAACuC,UAAU,CAAC+F,QAAD,CAAlC,IAAgDA,QAAQ,KAAK,KAAjE,EACEA,QAAQ,GAAGtI,QAAX,EAAqBA,QAAQ,GAAG+F,SAAhC;IAEF,MAAIuC,QAAQ,KAAK,KAAjB,EAAwBA,QAAQ,GAAGuK,WAAX;IAExB,SAAOvG,KAAK,CAAC7D,IAAN,CAAW,YAAY;IAC5B4H,IAAAA,MAAM,CAAC,IAAD,EAAO2C,KAAP,EAAc1K,QAAd,EAAwBtI,QAAxB,CAAN;IACD,GAFM,CAAP;IAGD,CAjBD;;IAmBAD,CAAC,CAACG,EAAF,CAAKoW,OAAL,GAAe,UAAUtD,KAAV,EAAiB1I,IAAjB,EAAuB;IACpC0I,EAAAA,KAAK,GAAIL,QAAQ,CAACK,KAAD,CAAR,IAAmBjT,CAAC,CAAC+C,aAAF,CAAgBkQ,KAAhB,CAApB,GAA8CjT,CAAC,CAACyV,KAAF,CAAQxC,KAAR,CAA9C,GAA+DsB,UAAU,CAACtB,KAAD,CAAjF;IACAA,EAAAA,KAAK,CAACwB,KAAN,GAAclK,IAAd;IACA,SAAO,KAAK7B,IAAL,CAAU,YAAY;IAC3B;IACA,QAAIuK,KAAK,CAAC5Q,IAAN,IAAc6P,KAAd,IAAuB,OAAO,KAAKe,KAAK,CAAC5Q,IAAX,CAAP,IAA2B,UAAtD,EAAkE,KAAK4Q,KAAK,CAAC5Q,IAAX,IAAlE;IAAA,SAEK,IAAI,mBAAmB,IAAvB,EAA6B,KAAKmU,aAAL,CAAmBvD,KAAnB,EAA7B,KACAjT,CAAC,CAAC,IAAD,CAAD,CAAQyW,cAAR,CAAuBxD,KAAvB,EAA8B1I,IAA9B;IACN,GANM,CAAP;IAOD,CAVD;IAaA;;;IACAvK,CAAC,CAACG,EAAF,CAAKsW,cAAL,GAAsB,UAAUxD,KAAV,EAAiB1I,IAAjB,EAAuB;IAC3C,MAAIgJ,CAAJ,EAAOvF,MAAP;IACA,OAAKtF,IAAL,CAAU,UAAUjB,CAAV,EAAa/C,OAAb,EAAsB;IAC9B6O,IAAAA,CAAC,GAAGgC,WAAW,CAAC3C,QAAQ,CAACK,KAAD,CAAR,GAAkBjT,CAAC,CAACyV,KAAF,CAAQxC,KAAR,CAAlB,GAAmCA,KAApC,CAAf;IACAM,IAAAA,CAAC,CAACkB,KAAF,GAAUlK,IAAV;IACAgJ,IAAAA,CAAC,CAAChM,MAAF,GAAW7C,OAAX;IACA1E,IAAAA,CAAC,CAAC0I,IAAF,CAAOsK,YAAY,CAACtO,OAAD,EAAUuO,KAAK,CAAC5Q,IAAN,IAAc4Q,KAAxB,CAAnB,EAAmD,UAAUxL,CAAV,EAAa6L,OAAb,EAAsB;IACvEtF,MAAAA,MAAM,GAAGsF,OAAO,CAACgB,KAAR,CAAcf,CAAd,CAAT;IACA,UAAIA,CAAC,CAACiB,6BAAF,EAAJ,EAAuC,OAAO,KAAP;IACxC,KAHD;IAID,GARD;IASA,SAAOxG,MAAP;IACD,CAZD;IAAA;;IAeI,CAAC,0EACD,uEADC,GAED,4CAFA,EAE8C1D,KAF9C,CAEoD,GAFpD,EAEyDpE,OAFzD,CAEiE,UAAU+M,KAAV,EAAiB;IAChFjT,EAAAA,CAAC,CAACG,EAAF,CAAK8S,KAAL,IAAc,UAAU1K,QAAV,EAAoB;IAChC,WAAQ,KAAKf,SAAN,GACL,KAAKyO,EAAL,CAAQhD,KAAR,EAAe1K,QAAf,CADK,GAEL,KAAKgO,OAAL,CAAatD,KAAb,CAFF;IAGD,GAJD;IAKD,CARD;;ICvPJ,IAAIyD,MAAM,GAAG,EAAb;IAAA,IAAiBC,WAAjB;IAAA,IACEC,OAAO,GAAG;IAAEC,EAAAA,MAAM,EAAE,QAAV;IAAoBC,EAAAA,GAAG,EAAE,EAAzB;IAA6BC,EAAAA,CAAC,EAAE;IAAhC,CADZ;IAAA,IAEEC,MAAM,GAAGvW,UAAQ,CAACc,aAAT,CAAuB,KAAvB,CAFX;IAAA,IAGE0V,mBAAmB,GAAG,6EAHxB;IAAA,IAIEC,SAJF;IAAA,IAKEC,kBALF;IAAA,IAKsBC,kBALtB;IAAA,IAK0CC,gBAL1C;IAAA,IAK4DC,eAL5D;IAAA,IAMEC,aANF;IAAA,IAMiBC,iBANjB;IAAA,IAMoCC,eANpC;IAAA,IAMqDC,cANrD;IAAA,IAOEC,QAAQ,GAAG,EAPb;;IASA,SAASlU,WAAT,CAAmBC,GAAnB,EAAwB;IAAE,SAAOA,GAAG,CAACC,OAAJ,CAAY,UAAZ,EAAwB,KAAxB,EAA+BC,WAA/B,EAAP;IAAqD;;IAC/E,SAASgU,cAAT,CAAwB9T,IAAxB,EAA8B;IAAE,SAAO6S,WAAW,GAAGA,WAAW,GAAG7S,IAAjB,GAAwBA,IAAI,CAACF,WAAL,EAA1C;IAA8D;;IAE9F,IAAIoT,MAAM,CAAC5L,KAAP,CAAa8L,SAAb,KAA2BlR,SAA/B,EAA0ChG,CAAC,CAAC0I,IAAF,CAAOkO,OAAP,EAAgB,UAAUiB,MAAV,EAAkB5E,KAAlB,EAAyB;IACjF,MAAI+D,MAAM,CAAC5L,KAAP,CAAayM,MAAM,GAAG,oBAAtB,MAAgD7R,SAApD,EAA+D;IAC7D0Q,IAAAA,MAAM,GAAG,MAAMmB,MAAM,CAACjU,WAAP,EAAN,GAA6B,GAAtC;IACA+S,IAAAA,WAAW,GAAG1D,KAAd;IACA,WAAO,KAAP;IACD;IACF,CANyC;IAQ1CiE,SAAS,GAAGR,MAAM,GAAG,WAArB;IACAiB,QAAQ,CAACR,kBAAkB,GAAGT,MAAM,GAAG,qBAA/B,CAAR,GACEiB,QAAQ,CAACP,kBAAkB,GAAGV,MAAM,GAAG,qBAA/B,CAAR,GACAiB,QAAQ,CAACL,eAAe,GAAGZ,MAAM,GAAG,kBAA5B,CAAR,GACAiB,QAAQ,CAACN,gBAAgB,GAAGX,MAAM,GAAG,4BAA7B,CAAR,GACAiB,QAAQ,CAACJ,aAAa,GAAGb,MAAM,GAAG,gBAA1B,CAAR,GACAiB,QAAQ,CAACH,iBAAiB,GAAGd,MAAM,GAAG,oBAA9B,CAAR,GACAiB,QAAQ,CAACD,cAAc,GAAGhB,MAAM,GAAG,iBAA3B,CAAR,GACAiB,QAAQ,CAACF,eAAe,GAAGf,MAAM,GAAG,2BAA5B,CAAR,GAAmE,EAPrE;IASA1W,CAAC,CAAC8X,EAAF,GAAO;IACLxB,EAAAA,GAAG,EAAGK,WAAW,KAAK3Q,SAAhB,IAA6BgR,MAAM,CAAC5L,KAAP,CAAa+L,kBAAb,KAAoCnR,SADlE;IAEL+R,EAAAA,MAAM,EAAE;IAAEC,IAAAA,QAAQ,EAAE,GAAZ;IAAiBC,IAAAA,IAAI,EAAE,GAAvB;IAA4BC,IAAAA,IAAI,EAAE;IAAlC,GAFH;IAGLC,EAAAA,SAAS,EAAEzB,MAHN;IAIL0B,EAAAA,aAAa,EAAER,cAAc,CAAC,eAAD,CAJxB;IAKLS,EAAAA,YAAY,EAAET,cAAc,CAAC,cAAD;IALvB,CAAP;;IAQA5X,CAAC,CAACG,EAAF,CAAKmY,OAAL,GAAe,UAAUpP,UAAV,EAAsBqP,QAAtB,EAAgCC,IAAhC,EAAsCjQ,QAAtC,EAAgDkQ,KAAhD,EAAuD;IACpE,MAAIzY,CAAC,CAACwC,UAAF,CAAa+V,QAAb,CAAJ,EACEhQ,QAAQ,GAAGgQ,QAAX,EAAqBC,IAAI,GAAGxS,SAA5B,EAAuCuS,QAAQ,GAAGvS,SAAlD;IACF,MAAIhG,CAAC,CAACwC,UAAF,CAAagW,IAAb,CAAJ,EACEjQ,QAAQ,GAAGiQ,IAAX,EAAiBA,IAAI,GAAGxS,SAAxB;IACF,MAAIhG,CAAC,CAAC+C,aAAF,CAAgBwV,QAAhB,CAAJ,EACEC,IAAI,GAAGD,QAAQ,CAACG,MAAhB,EAAwBnQ,QAAQ,GAAGgQ,QAAQ,CAACI,QAA5C,EAAsDF,KAAK,GAAGF,QAAQ,CAACE,KAAvE,EAA8EF,QAAQ,GAAGA,QAAQ,CAACA,QAAlG;IACF,MAAIA,QAAJ,EAAcA,QAAQ,GAAG,CAAC,OAAOA,QAAP,IAAmB,QAAnB,GAA8BA,QAA9B,GACvBvY,CAAC,CAAC8X,EAAF,CAAKC,MAAL,CAAYQ,QAAZ,KAAyBvY,CAAC,CAAC8X,EAAF,CAAKC,MAAL,CAAYC,QADf,IAC4B,IADvC;IAEd,MAAIS,KAAJ,EAAWA,KAAK,GAAGjL,UAAU,CAACiL,KAAD,CAAV,GAAoB,IAA5B;IACX,SAAO,KAAKG,IAAL,CAAU1P,UAAV,EAAsBqP,QAAtB,EAAgCC,IAAhC,EAAsCjQ,QAAtC,EAAgDkQ,KAAhD,CAAP;IACD,CAXD;;IAaAzY,CAAC,CAACG,EAAF,CAAKyY,IAAL,GAAY,UAAU1P,UAAV,EAAsBqP,QAAtB,EAAgCC,IAAhC,EAAsCjQ,QAAtC,EAAgDkQ,KAAhD,EAAuD;IACjE,MAAIhQ,GAAJ;IAAA,MAASoQ,SAAS,GAAG,EAArB;IAAA,MAAyBC,aAAzB;IAAA,MAAwCC,UAAU,GAAG,EAArD;IAAA,MACEC,IAAI,GAAG,IADT;IAAA,MACeC,gBADf;IAAA,MACgCC,QAAQ,GAAGlZ,CAAC,CAAC8X,EAAF,CAAKM,aADhD;IAAA,MAEEe,KAAK,GAAG,KAFV;;IAIA,MAAIZ,QAAQ,KAAKvS,SAAjB,EAA4BuS,QAAQ,GAAGvY,CAAC,CAAC8X,EAAF,CAAKC,MAAL,CAAYC,QAAZ,GAAuB,IAAlC;IAC5B,MAAIS,KAAK,KAAKzS,SAAd,EAAyByS,KAAK,GAAG,CAAR;IACzB,MAAIzY,CAAC,CAAC8X,EAAF,CAAKxB,GAAT,EAAciC,QAAQ,GAAG,CAAX;;IAEd,MAAI,OAAOrP,UAAP,IAAqB,QAAzB,EAAmC;IACjC;IACA2P,IAAAA,SAAS,CAACtB,aAAD,CAAT,GAA2BrO,UAA3B;IACA2P,IAAAA,SAAS,CAACrB,iBAAD,CAAT,GAA+Be,QAAQ,GAAG,GAA1C;IACAM,IAAAA,SAAS,CAACnB,cAAD,CAAT,GAA4Be,KAAK,GAAG,GAApC;IACAI,IAAAA,SAAS,CAACpB,eAAD,CAAT,GAA8Be,IAAI,IAAI,QAAtC;IACAU,IAAAA,QAAQ,GAAGlZ,CAAC,CAAC8X,EAAF,CAAKO,YAAhB;IACD,GAPD,MAOO;IACLS,IAAAA,aAAa,GAAG,EAAhB,CADK;;IAGL,SAAKrQ,GAAL,IAAYS,UAAZ;IACE,UAAI+N,mBAAmB,CAACxQ,IAApB,CAAyBgC,GAAzB,CAAJ,EAAmCsQ,UAAU,IAAItQ,GAAG,GAAG,GAAN,GAAYS,UAAU,CAACT,GAAD,CAAtB,GAA8B,IAA5C,CAAnC,KACKoQ,SAAS,CAACpQ,GAAD,CAAT,GAAiBS,UAAU,CAACT,GAAD,CAA3B,EAAkCqQ,aAAa,CAAC1S,IAAd,CAAmB3C,WAAS,CAACgF,GAAD,CAA5B,CAAlC;IAFP;;IAIA,QAAIsQ,UAAJ,EAAgBF,SAAS,CAAC3B,SAAD,CAAT,GAAuB6B,UAAvB,EAAmCD,aAAa,CAAC1S,IAAd,CAAmB8Q,SAAnB,CAAnC;;IAChB,QAAIqB,QAAQ,GAAG,CAAX,IAAgB,OAAOrP,UAAP,KAAsB,QAA1C,EAAoD;IAClD2P,MAAAA,SAAS,CAAC1B,kBAAD,CAAT,GAAgC2B,aAAa,CAAC3M,IAAd,CAAmB,IAAnB,CAAhC;IACA0M,MAAAA,SAAS,CAACzB,kBAAD,CAAT,GAAgCmB,QAAQ,GAAG,GAA3C;IACAM,MAAAA,SAAS,CAACvB,eAAD,CAAT,GAA6BmB,KAAK,GAAG,GAArC;IACAI,MAAAA,SAAS,CAACxB,gBAAD,CAAT,GAA+BmB,IAAI,IAAI,QAAvC;IACD;IACF;;IAEDS,EAAAA,gBAAe,GAAG,yBAAUhG,KAAV,EAAiB;IACjC,QAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;IAChC,UAAIA,KAAK,CAAC1L,MAAN,KAAiB0L,KAAK,CAACmD,aAA3B,EAA0C,OADV;;IAEhCpW,MAAAA,CAAC,CAACiT,KAAK,CAAC1L,MAAP,CAAD,CAAgB+O,GAAhB,CAAoB4C,QAApB,EAA8BD,gBAA9B;IACD,KAHD,MAIEjZ,CAAC,CAAC,IAAD,CAAD,CAAQsW,GAAR,CAAY4C,QAAZ,EAAsBD,gBAAtB,EAL+B;;;IAOjCE,IAAAA,KAAK,GAAG,IAAR;IACAnZ,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQsL,GAAR,CAAYqM,QAAZ;IACApP,IAAAA,QAAQ,IAAIA,QAAQ,CAACnG,IAAT,CAAc,IAAd,CAAZ;IACD,GAVD;;IAWA,MAAImW,QAAQ,GAAG,CAAf,EAAkB;IAChB,SAAKtC,EAAL,CAAQiD,QAAR,EAAkBD,gBAAlB,EADgB;IAGhB;;IACAG,IAAAA,UAAU,CAAC,YAAY;IACrB,UAAID,KAAJ,EAAW;;IACXF,MAAAA,gBAAe,CAAC7W,IAAhB,CAAqB4W,IAArB;IACD,KAHS,EAGN,CAACT,QAAQ,GAAGE,KAAZ,IAAqB,IAAtB,GAA8B,EAHvB,CAAV;IAID,GAnDgE;;;IAsDjE,OAAKxN,IAAL,MAAe,KAAKF,GAAL,CAAS,CAAT,EAAYsO,UAA3B;IAEA,OAAK/N,GAAL,CAASuN,SAAT;IAEA,MAAIN,QAAQ,IAAI,CAAhB,EAAmBa,UAAU,CAAC,YAAY;IACxCJ,IAAAA,IAAI,CAACtQ,IAAL,CAAU,YAAY;IAAEuQ,MAAAA,gBAAe,CAAC7W,IAAhB,CAAqB,IAArB;IAA4B,KAApD;IACD,GAF4B,EAE1B,CAF0B,CAAV;IAInB,SAAO,IAAP;IACD,CA/DD;;IAiEA4U,MAAM,GAAG,IAAT;;ICrHAhX,CAAC,CAACG,EAAF,CAAK8G,MAAL,CAAY;IACVkE,EAAAA,IAAI,EAAE,gBAAY;IAChB,WAAO,KAAKzC,IAAL,CAAU,YAAY;IAC3B,WAAK0C,KAAL,CAAWzG,OAAX,IAAsB,MAAtB,KAAiC,KAAKyG,KAAL,CAAWzG,OAAX,GAAqB,EAAtD;IACA,UAAIG,gBAAgB,CAAC,IAAD,EAAO,EAAP,CAAhB,CAA2BC,gBAA3B,CAA4C,SAA5C,KAA0D,MAA9D,EACE,KAAKqG,KAAL,CAAWzG,OAAX,GAAqBH,cAAc,CAAC,KAAKC,QAAN,CAAnC;IACH,KAJM,CAAP;IAKD,GAPS;IAQV4G,EAAAA,IAAI,EAAE,gBAAY;IAChB,WAAO,KAAKC,GAAL,CAAS,SAAT,EAAoB,MAApB,CAAP;IACD;IAVS,CAAZ;IAaA,IAAIgO,QAAQ,GAAGtZ,CAAC,CAACG,EAAF,CAAKgL,IAApB;IAAA,IAA0BoO,QAAQ,GAAGvZ,CAAC,CAACG,EAAF,CAAKkL,IAA1C;IAAA,IAAgDmO,UAAU,GAAGxZ,CAAC,CAACG,EAAF,CAAKsZ,MAAlE;;IAEA,SAASb,IAAT,CAAcjO,EAAd,EAAkB+O,KAAlB,EAAyBC,OAAzB,EAAkCC,KAAlC,EAAyCrR,QAAzC,EAAmD;IACjD,MAAI,OAAOmR,KAAP,IAAgB,UAAhB,IAA8B,CAACnR,QAAnC,EAA6CA,QAAQ,GAAGmR,KAAX,EAAkBA,KAAK,GAAG1T,SAA1B;IAC7C,MAAIuF,KAAK,GAAG;IAAEoO,IAAAA,OAAO,EAAEA;IAAX,GAAZ;;IACA,MAAIC,KAAJ,EAAW;IACTrO,IAAAA,KAAK,CAACqO,KAAN,GAAcA,KAAd;IACAjP,IAAAA,EAAE,CAACW,GAAH,CAAOtL,CAAC,CAAC8X,EAAF,CAAKK,SAAL,GAAiB,kBAAxB,EAA4C,KAA5C;IACD;;IACD,SAAOxN,EAAE,CAAC2N,OAAH,CAAW/M,KAAX,EAAkBmO,KAAlB,EAAyB,IAAzB,EAA+BnR,QAA/B,CAAP;IACD;;IAED,SAAS8C,IAAT,CAAcV,EAAd,EAAkB+O,KAAlB,EAAyBE,KAAzB,EAAgCrR,QAAhC,EAA0C;IACxC,SAAOqQ,IAAI,CAACjO,EAAD,EAAK+O,KAAL,EAAY,CAAZ,EAAeE,KAAf,EAAsB,YAAY;IAC3CL,IAAAA,QAAQ,CAACnX,IAAT,CAAcpC,CAAC,CAAC,IAAD,CAAf;IACAuI,IAAAA,QAAQ,IAAIA,QAAQ,CAACnG,IAAT,CAAc,IAAd,CAAZ;IACD,GAHU,CAAX;IAID;;IAEDpC,CAAC,CAACG,EAAF,CAAKgL,IAAL,GAAY,UAAUuO,KAAV,EAAiBnR,QAAjB,EAA2B;IACrC+Q,EAAAA,QAAQ,CAAClX,IAAT,CAAc,IAAd;IACA,MAAIsX,KAAK,KAAK1T,SAAd,EAAyB0T,KAAK,GAAG,CAAR,CAAzB,KACK,KAAKpO,GAAL,CAAS,SAAT,EAAoB,CAApB;IACL,SAAOsN,IAAI,CAAC,IAAD,EAAOc,KAAP,EAAc,CAAd,EAAiB,KAAjB,EAAwBnR,QAAxB,CAAX;IACD,CALD;;IAOAvI,CAAC,CAACG,EAAF,CAAKkL,IAAL,GAAY,UAAUqO,KAAV,EAAiBnR,QAAjB,EAA2B;IACrC,MAAImR,KAAK,KAAK1T,SAAd,EAAyB,OAAOuT,QAAQ,CAACnX,IAAT,CAAc,IAAd,CAAP,CAAzB,KACK,OAAOiJ,IAAI,CAAC,IAAD,EAAOqO,KAAP,EAAc,KAAd,EAAqBnR,QAArB,CAAX;IACN,CAHD;;IAKAvI,CAAC,CAACG,EAAF,CAAKsZ,MAAL,GAAc,UAAUC,KAAV,EAAiBnR,QAAjB,EAA2B;IACvC,MAAImR,KAAK,KAAK1T,SAAV,IAAuB,OAAO0T,KAAP,IAAgB,SAA3C,EACE,OAAOF,UAAU,CAACpX,IAAX,CAAgB,IAAhB,EAAsBsX,KAAtB,CAAP,CADF,KAEK,OAAO,KAAKhR,IAAL,CAAU,YAAY;IAChC,QAAIiC,EAAE,GAAG3K,CAAC,CAAC,IAAD,CAAV;IACA2K,IAAAA,EAAE,CAACA,EAAE,CAACW,GAAH,CAAO,SAAP,KAAqB,MAArB,GAA8B,MAA9B,GAAuC,MAAxC,CAAF,CAAkDoO,KAAlD,EAAyDnR,QAAzD;IACD,GAHW,CAAP;IAIN,CAPD;;IASAvI,CAAC,CAACG,EAAF,CAAK0Z,MAAL,GAAc,UAAUH,KAAV,EAAiBC,OAAjB,EAA0BpR,QAA1B,EAAoC;IAChD,SAAOqQ,IAAI,CAAC,IAAD,EAAOc,KAAP,EAAcC,OAAd,EAAuB,IAAvB,EAA6BpR,QAA7B,CAAX;IACD,CAFD;;IAIAvI,CAAC,CAACG,EAAF,CAAK2Z,MAAL,GAAc,UAAUJ,KAAV,EAAiBnR,QAAjB,EAA2B;IACvC,MAAIhB,MAAM,GAAG,KAAK+D,GAAL,CAAS,SAAT,CAAb;IACA,MAAI/D,MAAM,GAAG,CAAb,EAAgB,KAAK+D,GAAL,CAAS,SAAT,EAAoB,CAApB,EAAhB,KACK/D,MAAM,GAAG,CAAT;IACL,SAAO+R,QAAQ,CAAClX,IAAT,CAAc,IAAd,EAAoByX,MAApB,CAA2BH,KAA3B,EAAkCnS,MAAlC,EAA0CgB,QAA1C,CAAP;IACD,CALD;;IAOAvI,CAAC,CAACG,EAAF,CAAK4Z,OAAL,GAAe,UAAUL,KAAV,EAAiBnR,QAAjB,EAA2B;IACxC,SAAO8C,IAAI,CAAC,IAAD,EAAOqO,KAAP,EAAc,IAAd,EAAoBnR,QAApB,CAAX;IACD,CAFD;;IAIAvI,CAAC,CAACG,EAAF,CAAK6Z,UAAL,GAAkB,UAAUN,KAAV,EAAiBnR,QAAjB,EAA2B;IAC3C,SAAO,KAAKG,IAAL,CAAU,YAAY;IAC3B,QAAIiC,EAAE,GAAG3K,CAAC,CAAC,IAAD,CAAV;IACA2K,IAAAA,EAAE,CACCA,EAAE,CAACW,GAAH,CAAO,SAAP,KAAqB,CAArB,IAA0BX,EAAE,CAACW,GAAH,CAAO,SAAP,KAAqB,MAAhD,GAA0D,QAA1D,GAAqE,SADrE,CAAF,CAEEoO,KAFF,EAESnR,QAFT;IAGD,GALM,CAAP;IAMD,CAPD;;ICtDA7H,MAAM,CAACV,CAAP,GAAWA,CAAX;IAEA,IAAMia,CAAC,GAAGja,CAAV;;ACjBA,mBAAe;IAEb;IACAka,EAAAA,SAAS,EAAE,IAHE;IAKb;IACAC,EAAAA,SAAS,EAAE,IANE;IAQb;IACAC,EAAAA,OAAO,EAAE,IATI;IAWb;IACAC,EAAAA,QAAQ,EAAE,IAZG;IAcb;IACAC,EAAAA,KAAK,EAAE,IAfM;IAiBb;IACAC,EAAAA,UAAU,EAAE,GAlBC;IAoBb;IACAC,EAAAA,WAAW,EAAE,GArBA;IAuBb;IACAC,EAAAA,YAAY,EAAE,IAxBD;IA0Bb;IACAC,EAAAA,cAAc,EAAE,KA3BH;IA6Bb;IACAC,EAAAA,aAAa,EAAE,KA9BF;IAgCb;IACAC,EAAAA,YAAY,EAAE,IAjCD;IAmCb;IACAC,EAAAA,cAAc,EAAE,GApCH;IAsCb;IACAC,EAAAA,QAAQ,EAAE,IAvCG;IAyCb;IACAC,EAAAA,QAAQ,EAAE,EA1CG;IA4Cb;IACAC,EAAAA,WAAW,EAAE,CACX,UADW,EAEX,OAFW,CA7CA;IAkDb;IACAC,EAAAA,WAAW,EAAE,CACX,QADW,EAEX,SAFW,EAGX,MAHW,EAIX,YAJW,EAKX,MALW,EAMX,YANW,EAOX,aAPW,CAnDA;IA6Db;IACAC,EAAAA,KAAK,EAAE;IACLC,IAAAA,QAAQ,yJADH;IAILC,IAAAA,QAAQ,wKAJH;IAOLC,IAAAA,KAAK,+QAPA;IAYLC,IAAAA,MAAM,0eAZD;IAmBLC,IAAAA,OAAO,2dAnBF;IA0BLxL,IAAAA,IAAI,wKA1BC;IA6BLC,IAAAA,IAAI,sKA7BC;IAgCLwL,IAAAA,UAAU,mSAhCL;IAqCLC,IAAAA,UAAU,ocArCL;IA4CLC,IAAAA,UAAU,spBA5CL;IAqDLC,IAAAA,WAAW;IArDN,GA9DM;IA+Hb;IACAC,EAAAA,IAAI,EAAE;IACJT,IAAAA,QAAQ,EAAE,UADN;IAEJC,IAAAA,QAAQ,EAAE,UAFN;IAGJC,IAAAA,KAAK,EAAE,OAHH;IAIJC,IAAAA,MAAM,EAAE,YAJJ;IAKJC,IAAAA,OAAO,EAAE,aALL;IAMJxL,IAAAA,IAAI,EAAE,SANF;IAOJC,IAAAA,IAAI,EAAE,SAPF;IAQJwL,IAAAA,UAAU,EAAE,YARR;IASJC,IAAAA,UAAU,EAAE,yBATR;IAUJC,IAAAA,UAAU,EAAE,qBAVR;IAWJC,IAAAA,WAAW,EAAE;IAXT,GAhIO;IA8Ib;IACAE,EAAAA,cAAc,EAAE,IA/IH;IAiJb;IACAC,EAAAA,aAAa,EAAE,IAlJF;IAoJb;IACAC,EAAAA,aAAa,EAAE,KArJF;IAuJb;IACAC,EAAAA,MAAM,EAAE,IAxJK;IA0Jb;IACAC,EAAAA,UAAU,EAAE,KA3JC;IA6Jb;IACAC,EAAAA,SAAS,EAAE;IACTC,IAAAA,UAAU,EAAElC,CAAC,CAAC5R,IADL;IAET+T,IAAAA,MAAM,EAAEnC,CAAC,CAAC5R,IAFD;IAGTgU,IAAAA,WAAW,EAAEpC,CAAC,CAAC5R,IAHN;IAITiU,IAAAA,MAAM,EAAErC,CAAC,CAAC5R,IAJD;IAKTkU,IAAAA,YAAY,EAAEtC,CAAC,CAAC5R,IALP;IAMTmU,IAAAA,OAAO,EAAEvC,CAAC,CAAC5R;IANF,GA9JE;IAuKb;IACA6C,EAAAA,KAAK,EAAE,CAxKM;IA0Kb;IACAuR,EAAAA,kBAAkB,EAAE;IA3KP,CAAf;;ICaA;;;;;;;AAMA,IAAO,SAASC,QAAT,CAAkBvc,EAAlB,EAAsBsY,KAAtB,EAA6B;IAElC,MAAIkE,KAAK,GAAG,IAAZ;IAEA,SAAO,YAAY;IACjB,QAAIzc,OAAO,GAAG,IAAd;IAAA,QACEqK,IAAI,GAAG/C,SADT;IAGAoV,IAAAA,YAAY,CAACD,KAAD,CAAZ;IAEAA,IAAAA,KAAK,GAAGvD,UAAU,CAAC,YAAY;IAC7BjZ,MAAAA,EAAE,CAACqD,KAAH,CAAStD,OAAT,EAAkBqK,IAAlB;IACD,KAFiB,EAEfkO,KAFe,CAAlB;IAGD,GATD;IAWD;IAED;;;;;;;AAMA,IAAO,SAASoE,UAAT,CAAoB1V,GAApB,EAAyB2V,OAAzB,EAAkCC,KAAlC,EAAyC;IAE9C,MAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV;;IAEAD,EAAAA,GAAG,CAACE,MAAJ,GAAa,YAAY;IACvBJ,IAAAA,OAAO,CAACE,GAAD,CAAP;IACD,GAFD;;IAIAA,EAAAA,GAAG,CAACG,OAAJ,GAAc,YAAY;IACxBJ,IAAAA,KAAK,CAACC,GAAD,CAAL;IACD,GAFD;;IAIAA,EAAAA,GAAG,CAAC7V,GAAJ,GAAUA,GAAV;IAED;IAED;;;;;AAIA,IAAO,SAASiW,iBAAT,CAA2B1Y,OAA3B,EAAoC;IACzC,MAAIA,OAAO,CAAC0Y,iBAAZ,EAA+B;IAC7B1Y,IAAAA,OAAO,CAAC0Y,iBAAR;IACD,GAFD,MAEO,IAAI1Y,OAAO,CAAC2Y,oBAAZ,EAAkC;IACvC3Y,IAAAA,OAAO,CAAC2Y,oBAAR;IACD,GAFM,MAEA,IAAI3Y,OAAO,CAAC4Y,uBAAZ,EAAqC;IAC1C5Y,IAAAA,OAAO,CAAC4Y,uBAAR;IACD,GAFM,MAEA,IAAI5Y,OAAO,CAAC6Y,mBAAZ,EAAiC;IACtC7Y,IAAAA,OAAO,CAAC6Y,mBAAR;IACD;IACF;AAED,IAaA;;;;;;AAKA,IAAO,SAASC,mBAAT,CAA6BC,GAA7B,EAAkC;IACvC,MAAIC,GAAG,GAAG,mCAAV;IAAA,MACEC,GAAG,GAAGF,GAAG,CAAC9Z,OAAJ,CAAY+Z,GAAZ,EAAiB,IAAjB,CADR;IAEA,SAAOC,GAAP;IACD;IAED;;;;;;AAKA,IAAO,SAASC,kBAAT,CAA4Bnb,KAA5B,EAAmC;IACxC,MAAIib,GAAG,GAAG,MAAV;IAAA,MACExM,GAAG,GAAGzO,KAAK,CAAC0B,KAAN,CAAYuZ,GAAZ,CADR;IAAA,MAEE3V,GAAG,GAAGyF,UAAU,CAAC0D,GAAG,CAAC,CAAD,CAAJ,CAFlB;IAGA,SAAOnJ,GAAP;IACD;IAED;;;;;AAIA,IAAO,SAAS8V,YAAT,GAAwB;IAC7B,SAAOpd,QAAQ,CAACmE,IAAT,CAAckZ,YAAd,IAA8Bpd,MAAM,CAACqd,WAAP,IAAsBtd,QAAQ,CAACoI,eAAT,CAAyBmV,YAA7E,CAAP;IACD;IAED;;;;;AAIA,IAAO,SAASC,iBAAT,GAA6B;IAElC,MAAIC,SAAS,GAAGzd,QAAQ,CAACc,aAAT,CAAuB,KAAvB,CAAhB;IACA2c,EAAAA,SAAS,CAAC9S,KAAV,CAAgBQ,OAAhB,GAA0B,gFAA1B;IACAnL,EAAAA,QAAQ,CAACmE,IAAT,CAAcC,WAAd,CAA0BqZ,SAA1B;IACA,MAAIC,cAAc,GAAGD,SAAS,CAACE,WAAV,GAAwBF,SAAS,CAACG,WAAvD;IACA5d,EAAAA,QAAQ,CAACmE,IAAT,CAAcK,WAAd,CAA0BiZ,SAA1B;IAEA,SAAOC,cAAP;IAED;IAED;;;;;;;;AAOA,IAAO,SAASG,aAAT,CAAuBC,SAAvB,EAAkCC,SAAlC,EAA6CC,KAA7C,EAAoDC,SAApD,EAA+D;IAEpE,MAAIC,UAAU,GAAG,CAACD,SAAD,GAAaH,SAAS,CAACK,CAAvB,GAA2BL,SAAS,CAACM,CAAtD;IAAA,MACEC,WAAW,GAAG,CAACJ,SAAD,GAAaH,SAAS,CAACM,CAAvB,GAA2BN,SAAS,CAACK,CADrD;;IAGA,MAAIE,WAAW,GAAGN,SAAS,CAACK,CAAxB,IAA6BF,UAAU,GAAGH,SAAS,CAACI,CAAxD,EAA2D;IACzDH,IAAAA,KAAK,CAAC1S,QAAN,CAAe,SAAf;IACD;;IACD,MAAI+S,WAAW,IAAIN,SAAS,CAACK,CAAzB,IAA8BF,UAAU,IAAIH,SAAS,CAACI,CAA1D,EAA6D;IAC3DH,IAAAA,KAAK,CAACrS,WAAN,CAAkB,SAAlB;IACD;IACF;IAED;;;;;AAIA,IAAO,SAAS2S,YAAT,GAAwB;IAC7B,SAAO,CAAC,EAAG,kBAAkBre,MAAnB,IAA8BA,MAAM,CAACse,aAAP,IAAwBve,QAAQ,YAAYue,aAA5E,CAAR;IACD;;IC7JM,IAAMC,EAAE,GAAGhF,CAAC,CAACvZ,MAAD,CAAZ;AACP,IAAO,IAAMwe,EAAE,GAAGjF,CAAC,CAACxZ,QAAD,CAAZ;AAEP,IAAO,IAAM0e,WAAW,GAAG,OAApB;AACP,IAAO,IAAMC,YAAY,GAAG,QAArB;AACP,IAAO,IAAMC,aAAa,GAAG,SAAtB;AACP,IAAO,IAAMC,WAAW,GAAG,iCAApB;AAEP,IAAO,IAAMC,iBAAiB,GAAGR,YAAY,KAAK,YAAL,GAAoB,WAA1D;AACP,IAAO,IAAMS,gBAAgB,GAAGT,YAAY,KAAK,WAAL,GAAmB,WAAxD;AACP,IAAO,IAAMU,eAAe,GAAGV,YAAY,KAAK,UAAL,GAAkB,SAAtD;AAEP,IAAO,IAAMW,EAAE,GAAG,aAAX;AACP,IAAO,IAAMC,QAAQ,GAAG,MAAMD,EAAvB;AACP,IAAO,IAAME,QAAQ,GAAG,MAAMF,EAAvB;AAEP,IAAO,IAAMG,WAAW,GAAG;IACzB;IACAC,EAAAA,QAAQ,EAAE,KAFe;IAGzB;IACAC,EAAAA,UAAU,EAAE,KAJa;IAKzB;IACA/D,EAAAA,MAAM,EAAEgE,QAAQ,CAAChE;IANQ,CAApB;;ACVP,oBAAe;IAEb;;;;;;IAMA9B,EAAAA,SARa,qBAQH+F,KARG,EAQIhE,UARJ,EAQgBiE,UARhB,EAQ4B;IAAA;;IAEvC,QAAIC,UAAU,GAAG,KAAjB;IAEA,QAAIC,MAAM,GAAG,CAAb;IAAA,QACEC,MAAM,GAAG,CADX;IAAA,QAGEtT,IAAI,GAAG,CAHT;IAAA,QAIED,GAAG,GAAG,CAJR;;IAMA,QAAIwT,SAAS,GAAG,SAAZA,SAAY,CAAC/M,CAAD,EAAO;IAErBA,MAAAA,CAAC,GAAGA,CAAC,IAAI7S,MAAM,CAACuS,KAAhB,CAFqB;IAKrB;;IAEA,UAAI,KAAI,CAAC/L,OAAL,CAAa2U,cAAjB,EAAiC;IAC/BoE,QAAAA,KAAK,CAAC3U,GAAN,CAAU,SAAV,EAAqB,EAAEuU,WAAW,CAAC,QAAD,CAAlC;IACD,OAToB;;;IAYrB,UAAIU,UAAU,GAAGtG,CAAC,CAAC1G,CAAC,CAAChM,MAAH,CAAD,CAAYkI,OAAZ,CAAoByQ,UAApB,CAAjB,CAZqB;;IAcrB,UAAIK,UAAU,CAACrd,MAAf,EAAuB;IACrB,eAAO,IAAP;IACD;;IAEDid,MAAAA,UAAU,GAAG,IAAb;IAEAC,MAAAA,MAAM,GAAG7M,CAAC,CAAClR,IAAF,KAAW,YAAX,GACLkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBC,KADd,GAELlN,CAAC,CAACmN,OAFN;IAGAL,MAAAA,MAAM,GAAG9M,CAAC,CAAClR,IAAF,KAAW,YAAX,GACLkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBG,KADd,GAELpN,CAAC,CAACqN,OAFN;IAIA7T,MAAAA,IAAI,GAAGkN,CAAC,CAACgG,KAAD,CAAD,CAASxT,MAAT,GAAkBM,IAAzB;IACAD,MAAAA,GAAG,GAAGmN,CAAC,CAACgG,KAAD,CAAD,CAASxT,MAAT,GAAkBK,GAAxB;IAEAoS,MAAAA,EAAE,CAACjJ,EAAH,CAAMuJ,gBAAgB,GAAGI,QAAzB,EAAmCiB,QAAnC,EACG5K,EADH,CACMwJ,eAAe,GAAGG,QADxB,EACkCkB,OADlC;IAGD,KAjCD;;IAmCA,QAAID,QAAQ,GAAG,SAAXA,QAAW,CAACtN,CAAD,EAAO;IAEpBA,MAAAA,CAAC,GAAGA,CAAC,IAAI7S,MAAM,CAACuS,KAAhB;IAEAM,MAAAA,CAAC,CAACd,cAAF;;IAEA,UAAI0N,UAAU,IAAI,CAACN,WAAW,CAAC,UAAD,CAA1B,IAA0C,CAACA,WAAW,CAAC,YAAD,CAAtD,IAAwE,CAAC,KAAI,CAACkB,WAAlF,EAA+F;IAE7F,YAAIC,IAAI,GAAGzN,CAAC,CAAClR,IAAF,KAAW,WAAX,GACPkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBC,KADZ,GAEPlN,CAAC,CAACmN,OAFN;IAAA,YAGEO,IAAI,GAAG1N,CAAC,CAAClR,IAAF,KAAW,WAAX,GACHkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBG,KADhB,GAEHpN,CAAC,CAACqN,OALR;IAAA,YAOEM,SAAS,GAAGF,IAAI,GAAGZ,MAPrB;IAAA,YAQEe,SAAS,GAAGF,IAAI,GAAGZ,MARrB;IAUApG,QAAAA,CAAC,CAACgG,KAAD,CAAD,CAAS3U,GAAT,CAAa;IACXyB,UAAAA,IAAI,EAAEmU,SAAS,GAAGnU,IAAZ,GAAmB,IADd;IAEXD,UAAAA,GAAG,EAAEqU,SAAS,GAAGrU,GAAZ,GAAkB;IAFZ,SAAb;IAKD;IAEF,KAzBD;;IA2BA,QAAIgU,OAAO,GAAG,SAAVA,OAAU,GAAM;IAElB5B,MAAAA,EAAE,CAAC5I,GAAH,CAAOkJ,gBAAgB,GAAGI,QAA1B,EAAoCiB,QAApC,EACGvK,GADH,CACOmJ,eAAe,GAAGG,QADzB,EACmCkB,OADnC;IAGAX,MAAAA,UAAU,GAAG,KAAb;IAED,KAPD;;IASAlG,IAAAA,CAAC,CAACgC,UAAD,CAAD,CAAchG,EAAd,CAAiBsJ,iBAAiB,GAAGK,QAArC,EAA+CU,SAA/C;IAED;IA3FY,CAAf;;ICCA,IAAMc,0BAA0B,mBAAiB1B,EAAjB,gBAA8BA,EAA9B,gBAA2CA,EAA3C,iBAAyDA,EAAzD,sBAAhC;AAEA,kBAAe;IAEb;;;;;;;;;;;;IAYAtF,EAAAA,OAda,mBAcLqE,KAdK,EAcE4C,KAdF,EAcS;IAAA;;IAEpB,QAAIlB,UAAU,GAAG,KAAjB;IAEA,QAAIC,MAAM,GAAG,CAAb;IAAA,QACEC,MAAM,GAAG,CADX;IAAA,QAGEtT,IAAI,GAAG,CAHT;IAAA,QAIED,GAAG,GAAG,CAJR;IAAA,QAMEwU,SAAS,GAAG,CANd;IAAA,QAOEC,UAAU,GAAG,CAPf;IAAA,QASEC,CAAC,GAAG,CATN;;IAWA,QAAIlB,SAAS,GAAG,SAAZA,SAAY,CAAC/M,CAAD,EAAO;IAErBA,MAAAA,CAAC,GAAGA,CAAC,IAAI7S,MAAM,CAACuS,KAAhB;IAEAM,MAAAA,CAAC,CAACd,cAAF;IAEA,UAAIkM,UAAU,GAAG1E,CAAC,CAACoH,KAAD,CAAD,CAASlU,KAAT,EAAjB;IAAA,UACE2R,WAAW,GAAG7E,CAAC,CAACoH,KAAD,CAAD,CAAS/T,MAAT,EADhB;IAAA,UAEEmU,UAAU,GAAGxH,CAAC,CAACwE,KAAD,CAAD,CAAStR,KAAT,EAFf;IAAA,UAGEuU,WAAW,GAAGzH,CAAC,CAACwE,KAAD,CAAD,CAASnR,MAAT,EAHhB;IAKA8S,MAAAA,MAAM,GAAG7M,CAAC,CAAClR,IAAF,KAAW,YAAX,GACLkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBC,KADd,GAELlN,CAAC,CAACmN,OAFN;IAGAL,MAAAA,MAAM,GAAG9M,CAAC,CAAClR,IAAF,KAAW,YAAX,GACLkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBG,KADd,GAELpN,CAAC,CAACqN,OAFN,CAdqB;;IAmBrBY,MAAAA,CAAC,GAAG,CAAC,KAAI,CAAC9C,SAAN,GAAkB,CAAlB,GAAsB,CAACC,UAAU,GAAGG,WAAd,IAA6B,CAAvD,CAnBqB;;IAsBrBwC,MAAAA,SAAS,GAAG,CAAC,KAAI,CAAC5C,SAAN,GACPC,UAAU,GAAG8C,UADN,GAEP3C,WAAW,GAAG2C,UAFnB;IAGAF,MAAAA,UAAU,GAAG,CAAC,KAAI,CAAC7C,SAAN,GACRI,WAAW,GAAG4C,WADN,GAER/C,UAAU,GAAG+C,WAFlB,CAzBqB;;IA8BrBvB,MAAAA,UAAU,GAAImB,SAAS,GAAG,CAAZ,IAAiBC,UAAU,GAAG,CAA/B,GAAoC,IAApC,GAA2C,KAAxD;IACA1B,MAAAA,WAAW,CAAC,UAAD,CAAX,GAA2ByB,SAAS,GAAG,CAAZ,IAAiBC,UAAU,GAAG,CAA/B,GAAoC,IAApC,GAA2C,KAArE,CA/BqB;IAkCrB;;IACAxU,MAAAA,IAAI,GAAGkN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IAApB,GAA2ByU,CAAlC;IACA1U,MAAAA,GAAG,GAAGmN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GAApB,GAA0B0U,CAAhC,CApCqB;;IAuCrB,UAAI/C,KAAK,CAAC5S,QAAN,CAAe,SAAf,CAAJ,EAA+B;IAC7BoO,QAAAA,CAAC,CAACmH,0BAAD,CAAD,CAA8BrV,QAA9B,CAAuC,aAAvC;IACD;;IAEDmT,MAAAA,EAAE,CAACjJ,EAAH,CAAMuJ,gBAAgB,GAAGI,QAAzB,EAAmCiB,QAAnC,EACG5K,EADH,CACMwJ,eAAe,GAAGG,QADxB,EACkCkB,OADlC;IAGD,KA9CD;;IAgDA,QAAID,QAAQ,GAAG,SAAXA,QAAW,CAACtN,CAAD,EAAO;IAEpBA,MAAAA,CAAC,GAAGA,CAAC,IAAI7S,MAAM,CAACuS,KAAhB;IAEAM,MAAAA,CAAC,CAACd,cAAF;;IAEA,UAAI0N,UAAJ,EAAgB;IAEd,YAAIa,IAAI,GAAGzN,CAAC,CAAClR,IAAF,KAAW,WAAX,GACPkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBC,KADZ,GAEPlN,CAAC,CAACmN,OAFN;IAAA,YAGEO,IAAI,GAAG1N,CAAC,CAAClR,IAAF,KAAW,WAAX,GACHkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBG,KADhB,GAEHpN,CAAC,CAACqN,OALR;IAAA,YAOEM,SAAS,GAAGF,IAAI,GAAGZ,MAPrB;IAAA,YAQEe,SAAS,GAAGF,IAAI,GAAGZ,MARrB;IAAA,YAUEsB,OAAO,GAAGT,SAAS,GAAGnU,IAVxB;IAAA,YAWE6U,MAAM,GAAGT,SAAS,GAAGrU,GAXvB,CAFc;;IAgBd,YAAIyU,UAAU,GAAG,CAAjB,EAAoB;IAElB,cAAKJ,SAAS,GAAGrU,GAAb,GAAoB0U,CAAxB,EAA2B;IACzBI,YAAAA,MAAM,GAAGJ,CAAT;IACD,WAFD,MAEO,IAAKL,SAAS,GAAGrU,GAAb,GAAoB,CAACyU,UAAD,GAAcC,CAAtC,EAAyC;IAC9CI,YAAAA,MAAM,GAAG,CAACL,UAAD,GAAcC,CAAvB;IACD;IAEF,SARD,MAQO;IACLI,UAAAA,MAAM,GAAG9U,GAAT;IACD,SA1Ba;;;IA4Bd,YAAIwU,SAAS,GAAG,CAAhB,EAAmB;IAEjB,cAAKJ,SAAS,GAAGnU,IAAb,GAAqB,CAACyU,CAA1B,EAA6B;IAC3BG,YAAAA,OAAO,GAAG,CAACH,CAAX;IACD,WAFD,MAEO,IAAKN,SAAS,GAAGnU,IAAb,GAAqB,CAACuU,SAAD,GAAaE,CAAtC,EAAyC;IAC9CG,YAAAA,OAAO,GAAG,CAACL,SAAD,GAAaE,CAAvB;IACD;IAEF,SARD,MAQO;IACLG,UAAAA,OAAO,GAAG5U,IAAV;IACD;;IAEDkN,QAAAA,CAAC,CAACoH,KAAD,CAAD,CAAS/V,GAAT,CAAa;IACXyB,UAAAA,IAAI,EAAE4U,OAAO,GAAG,IADL;IAEX7U,UAAAA,GAAG,EAAE8U,MAAM,GAAG;IAFH,SAAb,EAxCc;;IA8Cd3H,QAAAA,CAAC,CAAChT,MAAF,CAAS,KAAI,CAACsX,SAAd,EAAyB;IACvBxR,UAAAA,IAAI,EAAE4U,OADiB;IAEvB7U,UAAAA,GAAG,EAAE8U;IAFkB,SAAzB;IAKD;IAEF,KA3DD;;IA6DA,QAAId,OAAO,GAAG,SAAVA,OAAU,GAAM;IAElB5B,MAAAA,EAAE,CAAC5I,GAAH,CAAOkJ,gBAAgB,GAAGI,QAA1B,EAAoCiB,QAApC,EACGvK,GADH,CACOmJ,eAAe,GAAGG,QADzB,EACmCkB,OADnC;IAGAX,MAAAA,UAAU,GAAG,KAAb;IACAN,MAAAA,WAAW,CAAC,UAAD,CAAX,GAA0B,KAA1B,CANkB;;IASlB5F,MAAAA,CAAC,CAACmH,0BAAD,CAAD,CAA8BhV,WAA9B,CAA0C,aAA1C;IAED,KAXD;;IAaA6N,IAAAA,CAAC,CAACwE,KAAD,CAAD,CAASxI,EAAT,CAAYsJ,iBAAiB,GAAGK,QAAhC,EAA0CU,SAA1C;IAED;IAzJY,CAAf;;ICEA,IAAMuB,wBAAwB,mBAAiBnC,EAAjB,gBAA8BA,EAA9B,gBAA2CA,EAA3C,YAA9B;AAEA,oBAAe;IAEb;;;;;;;;;;;;;;IAcAvF,EAAAA,SAhBa,qBAgBH8F,KAhBG,EAgBIxB,KAhBJ,EAgBW4C,KAhBX,EAgBkBS,QAhBlB,EAgB4BC,SAhB5B,EAgBuC;IAAA;;IAElD,QAAIC,gBAAgB,GAAG/H,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,kCAAxB;IAAA,QACEuC,gBAAgB,GAAGhI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,kCADtB;IAAA,QAEEwC,gBAAgB,GAAGjI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,kCAFtB;IAAA,QAGEyC,gBAAgB,GAAGlI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,kCAHtB;IAAA,QAIE0C,iBAAiB,GAAGnI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,mCAJvB;IAAA,QAKE2C,iBAAiB,GAAGpI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,mCALvB;IAAA,QAME4C,iBAAiB,GAAGrI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,mCANvB;IAAA,QAOE6C,iBAAiB,GAAGtI,CAAC,mBAAgByF,EAAhB,0BAAuCA,EAAvC,mCAPvB;IASA,QAAI8C,gBAAgB,GAAG;IACrB,WAAKR,gBADgB;IAErB,WAAKE,gBAFgB;IAGrB,YAAME,iBAHe;IAIrB,WAAKD,gBAJgB;IAKrB,WAAKF,gBALgB;IAMrB,YAAMM,iBANe;IAOrB,YAAMD,iBAPe;IAQrB,YAAMD;IARe,KAAvB;IAWApI,IAAAA,CAAC,CAACgG,KAAD,CAAD,CAASpR,MAAT,CACEmT,gBADF,EACoBC,gBADpB,EACsCC,gBADtC,EACwDC,gBADxD,EAEEC,iBAFF,EAEqBC,iBAFrB,EAEwCC,iBAFxC,EAE2DC,iBAF3D;IAKA,QAAIpC,UAAU,GAAG,KAAjB;IAEA,QAAIC,MAAM,GAAG,CAAb;IAAA,QACEC,MAAM,GAAG,CADX;IAAA,QAGEoC,SAAS,GAAG;IACV7D,MAAAA,CAAC,EAAE,CADO;IAEVC,MAAAA,CAAC,EAAE,CAFO;IAGV6D,MAAAA,CAAC,EAAE,CAHO;IAIVC,MAAAA,CAAC,EAAE;IAJO,KAHd;IAAA,QASEnE,SAAS,GAAG;IACVI,MAAAA,CAAC,EAAE,CADO;IAEVC,MAAAA,CAAC,EAAE,CAFO;IAGV6D,MAAAA,CAAC,EAAE,CAHO;IAIVC,MAAAA,CAAC,EAAE;IAJO,KATd;IAAA,QAeEpE,SAAS,GAAG;IACVK,MAAAA,CAAC,EAAE,CADO;IAEVC,MAAAA,CAAC,EAAE,CAFO;IAGV6D,MAAAA,CAAC,EAAE,CAHO;IAIVC,MAAAA,CAAC,EAAE;IAJO,KAfd;IAAA;IAuBEnB,IAAAA,CAAC,GAAG,CAvBN;IAAA,QAwBEoB,QAAQ,GAAG,CAxBb;IAAA,QAyBEC,SAAS,GAAG,CAzBd;IAAA,QA2BEC,SAAS,GAAG,EA3Bd,CA7BkD;;IA2DlD,QAAIC,YAAY,GAAG,SAAfA,YAAe,CAAUC,GAAV,EAAeC,OAAf,EAAwBC,OAAxB,EAAiC;IAElD;IACA,UAAIC,SAAS,GAAI,CAACF,OAAD,GAAWR,SAAS,CAAC7D,CAAtB,GAA2BkD,QAA3B,GACXmB,OAAO,GAAGR,SAAS,CAACC,CADT,GAEXD,SAAS,CAACC,CAAV,GAAcD,SAAS,CAAC7D,CAAxB,GAA4BkD,QAFjC;IAAA,UAGEsB,QAAQ,GAAI,CAACF,OAAD,GAAWT,SAAS,CAAC5D,CAAtB,GAA2BkD,SAA3B,GACNmB,OAAO,GAAGT,SAAS,CAACE,CADd,GAENF,SAAS,CAACE,CAAV,GAAcF,SAAS,CAAC5D,CAAxB,GAA4BkD,SALnC;IAOA,UAAIsB,IAAI,GAAG;IACT,aAAK;IACHlW,UAAAA,KAAK,EAAEC,IAAI,CAACkW,GAAL,CAAUL,OAAO,GAAGR,SAAS,CAAC7D,CAA9B,EAAkCkD,QAAlC,IAA8C;IADlD,SADI;IAIT,aAAK;IACHxU,UAAAA,MAAM,EAAEF,IAAI,CAACkW,GAAL,CAAUJ,OAAO,GAAGT,SAAS,CAAC5D,CAA9B,EAAkCkD,SAAlC,IAA+C;IADpD,SAJI;IAOT,cAAM;IACJ5U,UAAAA,KAAK,EAAEC,IAAI,CAACkW,GAAL,CAAUL,OAAO,GAAGR,SAAS,CAAC7D,CAA9B,EAAkCkD,QAAlC,IAA8C,IADjD;IAEJxU,UAAAA,MAAM,EAAEF,IAAI,CAACkW,GAAL,CAAUJ,OAAO,GAAGT,SAAS,CAAC5D,CAA9B,EAAkCkD,SAAlC,IAA+C;IAFnD,SAPG;IAWT,aAAK;IACH5U,UAAAA,KAAK,EAAEC,IAAI,CAACkW,GAAL,CAAU,CAACL,OAAD,GAAWR,SAAS,CAAC7D,CAA/B,EAAmCkD,QAAnC,IAA+C,IADnD;IAEH/U,UAAAA,IAAI,EAAEoW,SAAS,GAAG;IAFf,SAXI;IAeT,aAAK;IACH7V,UAAAA,MAAM,EAAEF,IAAI,CAACkW,GAAL,CAAU,CAACJ,OAAD,GAAWT,SAAS,CAAC5D,CAA/B,EAAmCkD,SAAnC,IAAgD,IADrD;IAEHjV,UAAAA,GAAG,EAAEsW,QAAQ,GAAG;IAFb,SAfI;IAmBT,cAAM;IACJjW,UAAAA,KAAK,EAAEC,IAAI,CAACkW,GAAL,CAAU,CAACL,OAAD,GAAWR,SAAS,CAAC7D,CAA/B,EAAmCkD,QAAnC,IAA+C,IADlD;IAEJxU,UAAAA,MAAM,EAAEF,IAAI,CAACkW,GAAL,CAAU,CAACJ,OAAD,GAAWT,SAAS,CAAC5D,CAA/B,EAAmCkD,SAAnC,IAAgD,IAFpD;IAGJjV,UAAAA,GAAG,EAAEsW,QAAQ,GAAG,IAHZ;IAIJrW,UAAAA,IAAI,EAAEoW,SAAS,GAAG;IAJd,SAnBG;IAyBT,cAAM;IACJhW,UAAAA,KAAK,EAAEC,IAAI,CAACkW,GAAL,CAAUL,OAAO,GAAGR,SAAS,CAAC7D,CAA9B,EAAkCkD,QAAlC,IAA8C,IADjD;IAEJxU,UAAAA,MAAM,EAAEF,IAAI,CAACkW,GAAL,CAAU,CAACJ,OAAD,GAAWT,SAAS,CAAC5D,CAA/B,EAAmCkD,SAAnC,IAAgD,IAFpD;IAGJjV,UAAAA,GAAG,EAAEsW,QAAQ,GAAG;IAHZ,SAzBG;IA8BT,cAAM;IACJjW,UAAAA,KAAK,EAAEC,IAAI,CAACkW,GAAL,CAAU,CAACL,OAAD,GAAWR,SAAS,CAAC7D,CAA/B,EAAmCkD,QAAnC,IAA+C,IADlD;IAEJxU,UAAAA,MAAM,EAAEF,IAAI,CAACkW,GAAL,CAAUJ,OAAO,GAAGT,SAAS,CAAC5D,CAA9B,EAAkCkD,SAAlC,IAA+C,IAFnD;IAGJhV,UAAAA,IAAI,EAAEoW,SAAS,GAAG;IAHd;IA9BG,OAAX;IAqCA,aAAOE,IAAI,CAACL,GAAD,CAAX;IACD,KAhDD,CA3DkD;;;IA8GlD,QAAIO,YAAY,GAAG,SAAfA,YAAe,CAAUP,GAAV,EAAeC,OAAf,EAAwBC,OAAxB,EAAiC;IAElD;IACA;IACA,UAAI5B,SAAS,GAAI2B,OAAO,GAAGR,SAAS,CAAC7D,CAArB,GAA0BkD,QAA1B,GACXtD,SAAS,CAACI,CAAV,GAAcgE,QAAd,GAAyBK,OAAzB,GAAmCzB,CADxB,GAEXM,QAAQ,IAAIW,SAAS,CAAC7D,CAAV,GAAcJ,SAAS,CAACI,CAA5B,CAAR,GAAyCgE,QAAzC,GAAoDpB,CAFzD;IAAA,UAGED,UAAU,GAAI2B,OAAO,GAAGT,SAAS,CAAC5D,CAArB,GAA0BkD,SAA1B,GACRvD,SAAS,CAACK,CAAV,GAAcgE,SAAd,GAA0BK,OAA1B,GAAoC1B,CAD5B,GAERO,SAAS,IAAIU,SAAS,CAAC5D,CAAV,GAAcL,SAAS,CAACK,CAA5B,CAAT,GAA0CgE,SAA1C,GAAsDrB,CAL7D;IAAA,UAOEgC,UAAU,GAAI,CAACP,OAAD,GAAWR,SAAS,CAAC7D,CAAtB,GAA2BkD,QAA3B,GACRtD,SAAS,CAACI,CAAV,GAAcgE,QAAd,GAAyBK,OAAzB,GAAmCzB,CAD3B,GAERM,QAAQ,IAAIW,SAAS,CAAC7D,CAAV,GAAcJ,SAAS,CAACI,CAA5B,CAAR,GAAyCgE,QAAzC,GAAoDpB,CAT3D;IAAA,UAUEiC,WAAW,GAAI,CAACP,OAAD,GAAWT,SAAS,CAAC5D,CAAtB,GAA2BkD,SAA3B,GACTvD,SAAS,CAACK,CAAV,GAAcgE,SAAd,GAA0BK,OAA1B,GAAoC1B,CAD3B,GAETO,SAAS,IAAIU,SAAS,CAAC5D,CAAV,GAAcL,SAAS,CAACK,CAA5B,CAAT,GAA0CgE,SAA1C,GAAsDrB,CAZ7D,CAJkD;;IAmBlD,UAAIkC,OAAO,GAAG,CAACpC,SAAS,GAAG,CAAZ,GACXrH,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IADT,GAEVkN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IAApB,GAA2B,CAA3B,GACCkN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IADrB,GAEC,CAJQ,IAIFyU,CAJZ;IAAA,UAKEmC,MAAM,GAAG,CAACpC,UAAU,GAAG,CAAb,GACNtH,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GADd,GAELmN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GAApB,GAA0B,CAA1B,GACCmN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GADrB,GAEC,CAJG,IAIG0U,CATd;IAAA,UAWEoC,QAAQ,GAAG,CAACJ,UAAU,GAAG,CAAb,GACRvJ,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IADZ,GAEPkN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IAApB,GAA2B,CAA3B,GACCkN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IADrB,GAEC,CAJK,IAICyU,CAfd;IAAA,UAgBEqC,OAAO,GAAG,CAACJ,WAAW,GAAG,CAAd,GACPxJ,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GADb,GAENmN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GAApB,GAA0B,CAA1B,GACCmN,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT,GADrB,GAEC,CAJI,IAIE0U,CApBd;IAsBA,UAAI6B,IAAI,GAAG;IACT,aAAK;IACHtW,UAAAA,IAAI,EAAEuU,SAAS,IAAI,CAACE,CAAd,GACD,CAACF,SAAS,GAAGE,CAAb,IAAkB,CAAlB,GAAsB,IADrB,GAEDkC,OAAO,GAAGpC,SAAV,GACEoC,OAAO,GAAG,IADZ,GAEEpC,SAAS,GAAG;IALhB,SADI;IAQT,aAAK;IACHxU,UAAAA,GAAG,EAAEyU,UAAU,IAAIC,CAAd,GACA,CAACD,UAAU,GAAGC,CAAd,IAAmB,CAAnB,GAAuB,IADvB,GAEAmC,MAAM,GAAGpC,UAAT,GACEoC,MAAM,GAAG,IADX,GAEEpC,UAAU,GAAG;IALjB,SARI;IAeT,cAAM;IACJzU,UAAAA,GAAG,EAAEyU,UAAU,IAAIC,CAAd,GACA,CAACD,UAAU,GAAGC,CAAd,IAAmB,CAAnB,GAAuB,IADvB,GAEAmC,MAAM,GAAGpC,UAAT,GACEoC,MAAM,GAAG,IADX,GAEEpC,UAAU,GAAG,IALhB;IAMJxU,UAAAA,IAAI,EAAEuU,SAAS,IAAI,CAACE,CAAd,GACD,CAACF,SAAS,GAAGE,CAAb,IAAkB,CAAlB,GAAsB,IADrB,GAEDkC,OAAO,GAAGpC,SAAV,GACEoC,OAAO,GAAG,IADZ,GAEEpC,SAAS,GAAG;IAVf,SAfG;IA2BT,aAAK;IACHvU,UAAAA,IAAI,EAAEyW,UAAU,IAAI,CAAChC,CAAf,GACD,CAACgC,UAAU,GAAGhC,CAAd,IAAmB,CAAnB,GAAuB,IADtB,GAEDoC,QAAQ,GAAGJ,UAAX,GACEI,QAAQ,GAAG,IADb,GAEEJ,UAAU,GAAG;IALjB,SA3BI;IAkCT,aAAK;IACH1W,UAAAA,GAAG,EAAE2W,WAAW,IAAIjC,CAAf,GACA,CAACiC,WAAW,GAAGjC,CAAf,IAAoB,CAApB,GAAwB,IADxB,GAEAqC,OAAO,GAAGJ,WAAV,GACEI,OAAO,GAAG,IADZ,GAEEJ,WAAW,GAAG;IALlB,SAlCI;IAyCT,cAAM;IACJ3W,UAAAA,GAAG,EAAE2W,WAAW,IAAIjC,CAAf,GACA,CAACiC,WAAW,GAAGjC,CAAf,IAAoB,CAApB,GAAwB,IADxB,GAEAqC,OAAO,GAAGJ,WAAV,GACEI,OAAO,GAAG,IADZ,GAEEJ,WAAW,GAAG,IALjB;IAMJ1W,UAAAA,IAAI,EAAEyW,UAAU,IAAI,CAAChC,CAAf,GACD,CAACgC,UAAU,GAAGhC,CAAd,IAAmB,CAAnB,GAAuB,IADtB,GAEDoC,QAAQ,GAAGJ,UAAX,GACEI,QAAQ,GAAG,IADb,GAEEJ,UAAU,GAAG;IAVhB,SAzCG;IAqDT,cAAM;IACJ1W,UAAAA,GAAG,EAAE2W,WAAW,IAAIjC,CAAf,GACA,CAACiC,WAAW,GAAGjC,CAAf,IAAoB,CAApB,GAAwB,IADxB,GAEAqC,OAAO,GAAGJ,WAAV,GACEI,OAAO,GAAG,IADZ,GAEEJ,WAAW,GAAG,IALjB;IAMJ1W,UAAAA,IAAI,EAAEuU,SAAS,IAAI,CAACE,CAAd,GACD,CAACF,SAAS,GAAGE,CAAb,IAAkB,CAAlB,GAAsB,IADrB,GAEDkC,OAAO,GAAGpC,SAAV,GACEoC,OAAO,GAAG,IADZ,GAEEpC,SAAS,GAAG;IAVf,SArDG;IAiET,cAAM;IACJxU,UAAAA,GAAG,EAAEyU,UAAU,IAAIC,CAAd,GACA,CAACD,UAAU,GAAGC,CAAd,IAAmB,CAAnB,GAAuB,IADvB,GAEAmC,MAAM,GAAGpC,UAAT,GACEoC,MAAM,GAAG,IADX,GAEEpC,UAAU,GAAG,IALhB;IAMJxU,UAAAA,IAAI,EAAEyW,UAAU,IAAI,CAAChC,CAAf,GACD,CAACgC,UAAU,GAAGhC,CAAd,IAAmB,CAAnB,GAAuB,IADtB,GAEDoC,QAAQ,GAAGJ,UAAX,GACEI,QAAQ,GAAG,IADb,GAEEJ,UAAU,GAAG;IAVhB;IAjEG,OAAX;IA+EA,aAAOH,IAAI,CAACL,GAAD,CAAX;IACD,KAzHD;;IA2HA,QAAI1C,SAAS,GAAG,SAAZA,SAAY,CAAC0C,GAAD,EAAMzP,CAAN,EAAY;IAE1BA,MAAAA,CAAC,GAAGA,CAAC,IAAI7S,MAAM,CAACuS,KAAhB;IAEAM,MAAAA,CAAC,CAACd,cAAF;IAEA0N,MAAAA,UAAU,GAAG,IAAb;IACAN,MAAAA,WAAW,CAAC,YAAD,CAAX,GAA4B,IAA5B;IAEAO,MAAAA,MAAM,GAAG7M,CAAC,CAAClR,IAAF,KAAW,YAAX,GACLkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBC,KADd,GAELlN,CAAC,CAACmN,OAFN;IAGAL,MAAAA,MAAM,GAAG9M,CAAC,CAAClR,IAAF,KAAW,YAAX,GACLkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBG,KADd,GAELpN,CAAC,CAACqN,OAFN,CAZ0B;;IAiB1B6B,MAAAA,SAAS,GAAG;IACV7D,QAAAA,CAAC,EAAE3E,CAAC,CAACgG,KAAD,CAAD,CAAS9S,KAAT,EADO;IAEV0R,QAAAA,CAAC,EAAE5E,CAAC,CAACgG,KAAD,CAAD,CAAS3S,MAAT,EAFO;IAGVoV,QAAAA,CAAC,EAAEzI,CAAC,CAACgG,KAAD,CAAD,CAASxT,MAAT,GAAkBM,IAHX;IAIV4V,QAAAA,CAAC,EAAE1I,CAAC,CAACgG,KAAD,CAAD,CAASxT,MAAT,GAAkBK;IAJX,OAAZ;IAOA0R,MAAAA,SAAS,GAAG;IACVI,QAAAA,CAAC,EAAE3E,CAAC,CAACwE,KAAD,CAAD,CAAStR,KAAT,EADO;IAEV0R,QAAAA,CAAC,EAAE5E,CAAC,CAACwE,KAAD,CAAD,CAASnR,MAAT,EAFO;IAGVoV,QAAAA,CAAC,EAAEzI,CAAC,CAACwE,KAAD,CAAD,CAAShS,MAAT,GAAkBM,IAHX;IAIV4V,QAAAA,CAAC,EAAE1I,CAAC,CAACwE,KAAD,CAAD,CAAShS,MAAT,GAAkBK;IAJX,OAAZ;IAOAyR,MAAAA,SAAS,GAAG;IACVK,QAAAA,CAAC,EAAE3E,CAAC,CAACoH,KAAD,CAAD,CAASlU,KAAT,EADO;IAEV0R,QAAAA,CAAC,EAAE5E,CAAC,CAACoH,KAAD,CAAD,CAAS/T,MAAT,EAFO;IAGVoV,QAAAA,CAAC,EAAEzI,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBR,IAHb;IAIV4V,QAAAA,CAAC,EAAE1I,CAAC,CAACoH,KAAD,CAAD,CAAS9T,QAAT,GAAoBT;IAJb,OAAZ,CA/B0B;;IAuC1B0U,MAAAA,CAAC,GAAG,CAAC,KAAI,CAAC9C,SAAN,GACA,CADA,GAEA,CAACH,SAAS,CAACK,CAAV,GAAcL,SAAS,CAACM,CAAzB,IAA8B,CAFlC;IAGA+D,MAAAA,QAAQ,GAAG,CAAC,KAAI,CAAClE,SAAN,GACPH,SAAS,CAACK,CADH,GAEPL,SAAS,CAACM,CAFd;IAGAgE,MAAAA,SAAS,GAAG,CAAC,KAAI,CAACnE,SAAN,GACRH,SAAS,CAACM,CADF,GAERN,SAAS,CAACK,CAFd;IAIAkE,MAAAA,SAAS,GAAGE,GAAZ,CAjD0B;;IAoD1B/I,MAAAA,CAAC,CAAC4H,wBAAD,CAAD,CAA4BvW,GAA5B,CAAgC,QAAhC,EAA0C0X,GAAG,GAAG,SAAhD;IAEA9D,MAAAA,EAAE,CAACjJ,EAAH,CAAMuJ,gBAAgB,GAAGI,QAAzB,EAAmCiB,QAAnC,EACG5K,EADH,CACMwJ,eAAe,GAAGG,QADxB,EACkCkB,OADlC;IAGD,KAzDD;;IA2DA,QAAID,QAAQ,GAAG,SAAXA,QAAW,CAACtN,CAAD,EAAO;IAEpBA,MAAAA,CAAC,GAAGA,CAAC,IAAI7S,MAAM,CAACuS,KAAhB;IAEAM,MAAAA,CAAC,CAACd,cAAF;;IAEA,UAAI0N,UAAU,IAAI,CAAC,KAAI,CAACY,WAAxB,EAAqC;IAEnC,YAAIC,IAAI,GAAGzN,CAAC,CAAClR,IAAF,KAAW,WAAX,GACPkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBC,KADZ,GAEPlN,CAAC,CAACmN,OAFN;IAAA,YAGEO,IAAI,GAAG1N,CAAC,CAAClR,IAAF,KAAW,WAAX,GACHkR,CAAC,CAACiN,aAAF,CAAgB,CAAhB,EAAmBG,KADhB,GAEHpN,CAAC,CAACqN,OALR;IAAA,YAOEM,SAAS,GAAGF,IAAI,GAAGZ,MAPrB;IAAA,YAQEe,SAAS,GAAGF,IAAI,GAAGZ,MARrB;IAUA,YAAIyD,SAAS,GAAGf,YAAY,CAACD,SAAD,EAAY5B,SAAZ,EAAuBC,SAAvB,CAA5B;IAEAlH,QAAAA,CAAC,CAACgG,KAAD,CAAD,CAAS3U,GAAT,CAAawY,SAAb;IAEA,YAAIC,SAAS,GAAGR,YAAY,CAACT,SAAD,EAAY5B,SAAZ,EAAuBC,SAAvB,CAA5B;IAEAlH,QAAAA,CAAC,CAACoH,KAAD,CAAD,CAAS/V,GAAT,CAAayY,SAAb;IAEA,QAAA,KAAI,CAACC,UAAL,GAAkB,IAAlB;IAED;IAEF,KA9BD;;IAgCA,QAAIlD,OAAO,GAAG,SAAVA,OAAU,GAAM;IAElB5B,MAAAA,EAAE,CAAC5I,GAAH,CAAOkJ,gBAAgB,GAAGI,QAA1B,EAAoCiB,QAApC,EACGvK,GADH,CACOmJ,eAAe,GAAGG,QADzB,EACmCkB,OADnC,EAFkB;;IAMlB,UAAIjB,WAAW,CAAC,YAAD,CAAf,EAA+B;IAC7BvB,QAAAA,aAAa,CACX;IACEM,UAAAA,CAAC,EAAEgE,QADL;IAEE/D,UAAAA,CAAC,EAAEgE;IAFL,SADW,EAKX;IACEjE,UAAAA,CAAC,EAAE3E,CAAC,CAACwE,KAAD,CAAD,CAAStR,KAAT,EADL;IAEE0R,UAAAA,CAAC,EAAE5E,CAAC,CAACwE,KAAD,CAAD,CAASnR,MAAT;IAFL,SALW,EASXmR,KATW,CAAb;IAWD;;IAED0B,MAAAA,UAAU,GAAG,KAAb;IACAN,MAAAA,WAAW,CAAC,YAAD,CAAX,GAA4B,KAA5B,CArBkB;;IAwBlB5F,MAAAA,CAAC,CAAC4H,wBAAD,CAAD,CAA4BvW,GAA5B,CAAgC,QAAhC,EAA0C,EAA1C,EAxBkB;;IA2BlB,UAAIsO,KAAK,GAAG,KAAI,CAACqK,oBAAL,CACVhK,CAAC,CAACwE,KAAD,CAAD,CAAStR,KAAT,EADU,EAEV8M,CAAC,CAACwE,KAAD,CAAD,CAASnR,MAAT,EAFU,CAAZ;;IAKA2M,MAAAA,CAAC,CAAChT,MAAF,CAAS,KAAI,CAACsX,SAAd,EAAyB;IACvB2F,QAAAA,SAAS,EAAE,KAAI,CAAClH,GAAL,CAAS7P,KAAT,GAAiByM,KADL;IAEvBuK,QAAAA,UAAU,EAAE,KAAI,CAACnH,GAAL,CAAS1P,MAAT,GAAkBsM,KAFP;IAGvBwK,QAAAA,QAAQ,EAAE,CAACnK,CAAC,CAACwE,KAAD,CAAD,CAAStR,KAAT,KAAmB,KAAI,CAAC6P,GAAL,CAAS7P,KAAT,GAAiByM,KAArC,IAA8C,CAHjC;IAIvByK,QAAAA,OAAO,EAAE,CAACpK,CAAC,CAACwE,KAAD,CAAD,CAASnR,MAAT,KAAoB,KAAI,CAAC0P,GAAL,CAAS1P,MAAT,GAAkBsM,KAAvC,IAAgD;IAJlC,OAAzB;IAOD,KAvCD;;IAyCAK,IAAAA,CAAC,CAACvR,IAAF,CAAO8Z,gBAAP,EAAyB,UAAUQ,GAAV,EAAesB,MAAf,EAAuB;IAC9CA,MAAAA,MAAM,CAACrO,EAAP,CAAUsJ,iBAAiB,GAAGK,QAA9B,EAAwC,UAAUrM,CAAV,EAAa;IACnD+M,QAAAA,SAAS,CAAC0C,GAAD,EAAMzP,CAAN,CAAT;IACD,OAFD;IAGD,KAJD;IAMD;IAnYY,CAAf;;ICeA;;;;QAGMgR;;;IAEJ,uBAAYC,KAAZ,EAAmBtd,OAAnB,EAA4ByD,EAA5B,EAAgC;IAE9B,SAAKzD,OAAL,GAAe+S,CAAC,CAAChT,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmBwd,QAAnB,EAA6Bvd,OAA7B,CAAf;;IAEA,QAAIA,OAAO,IAAI+S,CAAC,CAAClY,OAAF,CAAUmF,OAAO,CAAC+T,WAAlB,CAAf,EAA+C;IAC7C,WAAK/T,OAAL,CAAa+T,WAAb,GAA2B/T,OAAO,CAAC+T,WAAnC;IACD;;IAED,QAAI/T,OAAO,IAAI+S,CAAC,CAAClY,OAAF,CAAUmF,OAAO,CAAC8T,WAAlB,CAAf,EAA+C;IAC7C,WAAK9T,OAAL,CAAa8T,WAAb,GAA2B9T,OAAO,CAAC8T,WAAnC;IACD,KAV6B;;;IAa9B,SAAK0J,GAAL,GAAWzK,CAAC,CAACtP,EAAD,CAAZ,CAb8B;IAgB9B;IAEA;;IACA,SAAKga,QAAL,GAAgB,KAAhB,CAnB8B;;IAqB9B,SAAK5D,WAAL,GAAmB,KAAnB,CArB8B;;IAuB9B,SAAKrC,SAAL,GAAiB,KAAjB,CAvB8B;;IAyB9B,SAAKkG,WAAL,GAAmB,CAAnB,CAzB8B;;IA4B9B,SAAKZ,UAAL,GAAkB,KAAlB,CA5B8B;;IA+B9B,SAAKzF,SAAL,GAAiB,EAAjB,CA/B8B;;IAiC9B,SAAKkE,SAAL,GAAiB;IACftV,MAAAA,KAAK,EAAE,IADQ;IAEfG,MAAAA,MAAM,EAAE,IAFO;IAGfP,MAAAA,IAAI,EAAE,IAHS;IAIfD,MAAAA,GAAG,EAAE;IAJU,KAAjB;IAOA,SAAK1M,IAAL,CAAUokB,KAAV,EAAiB,KAAKtd,OAAtB,EAA+ByD,EAA/B;IAED;;;;aAEDvK,OAAA,cAAKokB,KAAL,EAAYnB,IAAZ,EAAkB1Y,EAAlB,EAAsB;IAEpB,SAAKka,SAAL,GAAiBL,KAAjB;IACA,SAAKM,UAAL,GAAkBzB,IAAI,CAAC,OAAD,CAAtB,CAHoB;;IAMpB,QAAI0B,MAAM,GAAGP,KAAK,CAAC,KAAKM,UAAN,CAAL,CAAuB,KAAvB,CAAb;IAEA,SAAKE,IAAL;IAEA,SAAKC,OAAL,CAAaF,MAAb,EAVoB;;IAapB,QAAI1B,IAAI,CAACnJ,SAAT,EAAoB;IAClB,WAAKA,SAAL,CAAe,KAAKgL,YAApB,EAAkC,KAAKjJ,UAAvC,EAAmD0D,QAAQ,GAAG,SAA9D;IACD;;IACD,QAAI0D,IAAI,CAACjJ,OAAT,EAAkB;IAChB,WAAKA,OAAL,CAAa,KAAK+K,MAAlB,EAA0B,KAAKC,MAA/B;IACD;;IACD,QAAI/B,IAAI,CAAClJ,SAAT,EAAoB;IAClB,WAAKA,SAAL,CACE,KAAK+K,YADP,EAEE,KAAKC,MAFP,EAGE,KAAKC,MAHP,EAIE/B,IAAI,CAAC9I,UAJP,EAKE8I,IAAI,CAAC7I,WALP;IAOD;IAEF;;aAED6K,aAAA,oBAAWC,OAAX,EAAoBC,IAApB,EAA0B;IAExB,QAAIC,OAAO,GAAG,EAAd;IAEAvL,IAAAA,CAAC,CAACvR,IAAF,CAAO4c,OAAP,EAAgB,UAAUpa,KAAV,EAAiB5H,IAAjB,EAAuB;IACrCkiB,MAAAA,OAAO,IAAID,IAAI,CAACjiB,IAAD,CAAf;IACD,KAFD;IAIA,WAAOkiB,OAAP;IAED;;aAEDC,cAAA,uBAAc;IACZ,WAAQ,KAAKve,OAAL,CAAaoT,KAAb,qBAAoCoF,EAApC,uBAAyD,EAAjE;IACD;;aAEDgG,YAAA,qBAAY;IAEV,QAAIC,OAAO,GAAG;IACZxK,MAAAA,QAAQ,uBAAoBuE,EAApB,gBAAiCA,EAAjC,sDACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBT,QAD/B,iCAEQ,KAAKjU,OAAL,CAAagU,KAAb,CAAmBC,QAF3B,kCADI;IAKZC,MAAAA,QAAQ,uBAAoBsE,EAApB,gBAAiCA,EAAjC,sDACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBR,QAD/B,iCAEQ,KAAKlU,OAAL,CAAagU,KAAb,CAAmBE,QAF3B,kCALI;IASZC,MAAAA,KAAK,uBAAoBqE,EAApB,gBAAiCA,EAAjC,+CACY,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBP,KAD9B,6BAEO,KAAKnU,OAAL,CAAagU,KAAb,CAAmBG,KAF1B,8BATO;IAaZC,MAAAA,MAAM,uBAAoBoE,EAApB,gBAAiCA,EAAjC,mDACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBN,MAD/B,+BAEQ,KAAKpU,OAAL,CAAagU,KAAb,CAAmBI,MAF3B,gCAbM;IAiBZC,MAAAA,OAAO,uBAAoBmE,EAApB,gBAAiCA,EAAjC,oDACY,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBL,OAD9B,+BAEO,KAAKrU,OAAL,CAAagU,KAAb,CAAmBK,OAF1B,gCAjBK;IAqBZxL,MAAAA,IAAI,uBAAoB2P,EAApB,gBAAiCA,EAAjC,8CACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkB7L,IAD/B,6BAEQ,KAAK7I,OAAL,CAAagU,KAAb,CAAmBnL,IAF3B,8BArBQ;IAyBZC,MAAAA,IAAI,uBAAoB0P,EAApB,gBAAiCA,EAAjC,8CACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkB5L,IAD/B,6BAEQ,KAAK9I,OAAL,CAAagU,KAAb,CAAmBlL,IAF3B,8BAzBQ;IA6BZwL,MAAAA,UAAU,uBAAoBkE,EAApB,gBAAiCA,EAAjC,0DACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBJ,UAD/B,iCAEM,KAAKtU,OAAL,CAAagU,KAAb,CAAmBM,UAFzB,kCA7BE;IAiCZC,MAAAA,UAAU,uBAAoBiE,EAApB,gBAAiCA,EAAjC,2DACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBH,UAD/B,mCAEQ,KAAKvU,OAAL,CAAagU,KAAb,CAAmBO,UAF3B,oCAjCE;IAqCZC,MAAAA,UAAU,uBAAoBgE,EAApB,gBAAiCA,EAAjC,2DACa,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBF,UAD/B,mCAEQ,KAAKxU,OAAL,CAAagU,KAAb,CAAmBQ,UAF3B,oCArCE;IAyCZC,MAAAA,WAAW,uBAAoB+D,EAApB,gBAAiCA,EAAjC,8DACc,KAAKxY,OAAL,CAAa0U,IAAb,CAAkBD,WADhC,mCAEO,KAAKzU,OAAL,CAAagU,KAAb,CAAmBS,WAF1B;IAzCC,KAAd,CAFU;;IAkDV,QAAIiK,eAAe,qBACFlG,EADE,wCAEDA,EAFC,0CAGCA,EAHD,6CAIGA,EAJH,iBAIiBA,EAJjB,wCAKP,KAAK2F,UAAL,CAAgB,KAAKne,OAAL,CAAa8T,WAA7B,EAA0C2K,OAA1C,CALO,0CAOT,KAAKF,WAAL,EAPS,mDASC/F,EATD,4CAUGA,EAVH,gFAYCA,EAZD,6CAaGA,EAbH,iBAaiBA,EAbjB,wCAcP,KAAK2F,UAAL,CAAgB,KAAKne,OAAL,CAAa+T,WAA7B,EAA0C0K,OAA1C,CAdO,yEAAnB;IAoBA,WAAOC,eAAP;IAED;;aAEDC,QAAA,iBAAQ;IAEN;IACA,QAAID,eAAe,GAAG,KAAKF,SAAL,EAAtB,CAHM;;;IAMN,QAAIR,YAAY,GAAGjL,CAAC,CAAC2L,eAAD,CAApB,CANM;;IASN,SAAKV,YAAL,GAAoBA,YAApB;IACA,SAAKY,OAAL,GAAeZ,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,SAA7B,CAAf;IACA,SAAKoG,YAAL,GAAoBb,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,eAA7B,CAApB;IACA,SAAKqG,OAAL,GAAed,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,SAA7B,CAAf;IACA,SAAKsG,YAAL,GAAoBf,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,eAA7B,CAApB;IACA,SAAKwF,MAAL,GAAcD,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,QAA7B,CAAd;IACA,SAAKuG,MAAL,GAAchB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,QAA7B,CAAd;IACA,SAAKyF,MAAL,GAAcF,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,QAA7B,CAAd;IACA,SAAKwG,MAAL,GAAcjB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,eAA7B,CAAd;IACA,SAAKyG,SAAL,GAAiBlB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,kBAA7B,CAAjB;IACA,SAAK0G,SAAL,GAAiBnB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,kBAA7B,CAAjB;IACA,SAAK2G,OAAL,GAAepB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,iBAA7B,CAAf;IACA,SAAK4G,QAAL,GAAgBrB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,kBAA7B,CAAhB;IACA,SAAK6G,WAAL,GAAmBtB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,qBAA7B,CAAnB;IACA,SAAK8G,WAAL,GAAmBvB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,oBAA7B,CAAnB;IACA,SAAK+G,WAAL,GAAmBxB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,qBAA7B,CAAnB;IACA,SAAKgH,YAAL,GAAoBzB,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,sBAA7B,CAApB;IACA,SAAKiH,KAAL,GAAa1B,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,cAA7B,CAAb;IACA,SAAKkH,KAAL,GAAa3B,YAAY,CAACte,IAAb,CAAkB+Y,QAAQ,GAAG,cAA7B,CAAb,CA3BM;;IA8BN,SAAKwF,MAAL,CAAYpZ,QAAZ,CAAqB,aAArB;IACA,SAAKqZ,MAAL,CAAYrZ,QAAZ,CAAqB,aAArB,EA/BM;;IAkCN,SAAKmZ,YAAL,CAAkB5Z,GAAlB,CAAsB,SAAtB,EAAiCuU,WAAW,CAAC,QAAD,CAA5C,EAlCM;;IAqCN,QAAI,CAAC,KAAK3Y,OAAL,CAAa+U,UAAd,IAA4B,KAAK/U,OAAL,CAAa+U,UAAb,KAA4B0D,QAAQ,GAAG,QAAvE,EAAiF;IAC/E,WAAK1D,UAAL,GAAkB,KAAKiJ,YAAvB;IACD,KAFD,MAEO;IACL,WAAKjJ,UAAL,GAAkB,KAAKiJ,YAAL,CAAkBte,IAAlB,CAAuB,KAAKM,OAAL,CAAa+U,UAApC,CAAlB;IACD;IAEF;;aAED+I,OAAA,gBAAO;IAEL,QAAI,CAAC,KAAK9d,OAAL,CAAa2U,cAAlB,EAAkC;IAChC5B,MAAAA,CAAC,CAAC0F,QAAQ,GAAG,QAAZ,CAAD,CAAuB/U,EAAvB,CAA0B,CAA1B,EAA6B0F,MAA7B;IACD,KAJI;;;IAOL,QAAI,CAAC2J,CAAC,CAAC0F,QAAQ,GAAG,QAAZ,CAAD,CAAuBzc,MAAxB,IAAkC,KAAKgE,OAAL,CAAauT,YAAnD,EAAiE;IAE/DR,MAAAA,CAAC,CAAC,MAAD,CAAD,CAAU3O,GAAV,CAAc;IAAE,oBAAY;IAAd,OAAd;;IAEA,UAAIuS,YAAY,EAAhB,EAAoB;IAClB,YAAIM,cAAc,GAAGF,iBAAiB,EAAtC;;IACA,YAAIE,cAAJ,EAAoB;IAClBlE,UAAAA,CAAC,CAAC,MAAD,CAAD,CAAU3O,GAAV,CAAc;IAAE,6BAAiB6S;IAAnB,WAAd;IACD;IACF;IAEF;;IAED,SAAK0H,KAAL;;IAEA,SAAKiB,YAAL,CAAkB,YAAlB,EAAgC,KAAKpC,GAArC,EAtBK;;;IAyBLzK,IAAAA,CAAC,CAAC,MAAD,CAAD,CAAUpL,MAAV,CAAiB,KAAKqW,YAAtB;IAEA,SAAK6B,SAAL;IAEA,SAAKC,WAAL,CAAiB,KAAK9B,YAAtB;;IAEA,SAAK4B,YAAL,CAAkB,QAAlB,EAA4B,KAAKpC,GAAjC;IAED;;aAEDrJ,QAAA,iBAAQ;IAEN,SAAKyL,YAAL,CAAkB,aAAlB,EAAiC,KAAKpC,GAAtC,EAFM;;;IAKN,SAAKQ,YAAL,CAAkB5U,MAAlB;IAEA,SAAKqU,QAAL,GAAgB,KAAhB;IACA,SAAK5D,WAAL,GAAmB,KAAnB;IACA,SAAKrC,SAAL,GAAiB,KAAjB;IACA,SAAKkG,WAAL,GAAmB,CAAnB;IAEA,QAAIqC,SAAS,GAAG,CAAChN,CAAC,CAAC0F,QAAQ,GAAG,QAAZ,CAAD,CAAuBzc,MAAxC,CAZM;;IAeN,QAAI+jB,SAAS,IAAI,KAAK/f,OAAL,CAAauT,YAA9B,EAA4C;IAC1CR,MAAAA,CAAC,CAAC,MAAD,CAAD,CAAU3O,GAAV,CAAc;IAAE,oBAAY,EAAd;IAAkB,yBAAiB;IAAnC,OAAd;IACD,KAjBK;;;IAoBN,QAAI2b,SAAS,IAAI,KAAK/f,OAAL,CAAa2U,cAA9B,EAA8C;IAC5CgE,MAAAA,WAAW,CAAC,QAAD,CAAX,GAAwB,KAAK3Y,OAAL,CAAa8U,MAArC;IACD,KAtBK;;;IAyBN,QAAI,CAAC/B,CAAC,CAAC0F,QAAQ,GAAG,QAAZ,CAAD,CAAuBzc,MAA5B,EAAoC;IAClCgc,MAAAA,EAAE,CAAC5I,GAAH,CAAO+I,aAAa,GAAGO,QAAvB;IACAX,MAAAA,EAAE,CAAC3I,GAAH,CAAO8I,YAAY,GAAGQ,QAAtB;IACD;;IAED,SAAKkH,YAAL,CAAkB,QAAlB,EAA4B,KAAKpC,GAAjC;IAED;;aAEDsC,cAAA,qBAAY/G,KAAZ,EAAmB;IAEjB,QAAIiH,QAAQ,GAAGjI,EAAE,CAAC9R,KAAH,EAAf;IAAA,QACEga,SAAS,GAAGlI,EAAE,CAAC3R,MAAH,EADd;IAAA,QAEEO,UAAU,GAAGpN,QAAQ,CAACoI,eAAT,CAAyBgF,UAFxC;IAAA,QAGEJ,SAAS,GAAGhN,QAAQ,CAACoI,eAAT,CAAyB4E,SAHvC;IAKA,QAAI8M,UAAU,GAAG,KAAKrT,OAAL,CAAaqT,UAA9B;IAAA,QACEC,WAAW,GAAG,KAAKtT,OAAL,CAAasT,WAD7B,CAPiB;;IAWjB,QAAI,KAAKtT,OAAL,CAAayT,aAAjB,EAAgC;IAE9BsF,MAAAA,KAAK,CAAClU,QAAN,CAAe2T,EAAE,GAAG,WAApB;IAEAO,MAAAA,KAAK,CAAC3U,GAAN,CAAU;IACR6B,QAAAA,KAAK,EAAE,MADC;IAERG,QAAAA,MAAM,EAAE,MAFA;IAGRP,QAAAA,IAAI,EAAE,CAHE;IAIRD,QAAAA,GAAG,EAAE;IAJG,OAAV;IAOA,WAAK6X,QAAL,GAAgB,IAAhB;IACA,WAAK5D,WAAL,GAAmB,IAAnB;IAED,KAdD,MAcO;IAEL;IACAd,MAAAA,KAAK,CAAC3U,GAAN,CAAU;IACR6B,QAAAA,KAAK,EAAEoN,UADC;IAERjN,QAAAA,MAAM,EAAEkN,WAFA;IAGRzN,QAAAA,IAAI,EAAE,CAACma,QAAQ,GAAG3M,UAAZ,IAA0B,CAA1B,GAA8B1M,UAA9B,GAA2C,IAHzC;IAIRf,QAAAA,GAAG,EAAE,CAACqa,SAAS,GAAG3M,WAAb,IAA4B,CAA5B,GAAgC/M,SAAhC,GAA4C;IAJzC,OAAV;IAOD;IAEF;;aAED2Z,eAAA,sBAAapK,GAAb,EAAkB;IAAA;;IAEhB,QAAIkK,QAAQ,GAAGjI,EAAE,CAAC9R,KAAH,EAAf;IAAA,QACEga,SAAS,GAAGlI,EAAE,CAAC3R,MAAH,EADd;IAAA,QAEEO,UAAU,GAAGpN,QAAQ,CAACoI,eAAT,CAAyBgF,UAFxC;IAAA,QAGEJ,SAAS,GAAGhN,QAAQ,CAACoI,eAAT,CAAyB4E,SAHvC,CAFgB;;IAQhB,QAAI4Z,QAAQ,GAAG;IACbta,MAAAA,IAAI,EAAE,KAAKoY,MAAL,CAAY7Z,GAAZ,CAAgB,MAAhB,CADO;IAEbgc,MAAAA,KAAK,EAAE,KAAKnC,MAAL,CAAY7Z,GAAZ,CAAgB,OAAhB,CAFM;IAGbwB,MAAAA,GAAG,EAAE,KAAKqY,MAAL,CAAY7Z,GAAZ,CAAgB,KAAhB,CAHQ;IAIbic,MAAAA,MAAM,EAAE,KAAKpC,MAAL,CAAY7Z,GAAZ,CAAgB,QAAhB,CAJK;IAKbkc,MAAAA,UAAU,EAAE,KAAKrC,MAAL,CAAY7Z,GAAZ,CAAgB,mBAAhB,CALC;IAMbmc,MAAAA,WAAW,EAAE,KAAKtC,MAAL,CAAY7Z,GAAZ,CAAgB,oBAAhB,CANA;IAOboc,MAAAA,SAAS,EAAE,KAAKvC,MAAL,CAAY7Z,GAAZ,CAAgB,kBAAhB,CAPE;IAQbqc,MAAAA,YAAY,EAAE,KAAKxC,MAAL,CAAY7Z,GAAZ,CAAgB,qBAAhB;IARD,KAAf,CARgB;;IAoBhB,QAAIiP,UAAU,GAAGyC,GAAG,CAAC7P,KAAJ,GACfyQ,kBAAkB,CAACyJ,QAAQ,CAACta,IAAV,CADH,GAEf6Q,kBAAkB,CAACyJ,QAAQ,CAACC,KAAV,CAFH,GAGf1J,kBAAkB,CAACyJ,QAAQ,CAACG,UAAV,CAHH,GAIf5J,kBAAkB,CAACyJ,QAAQ,CAACI,WAAV,CAJpB;IAAA,QAKEjN,WAAW,GAAGwC,GAAG,CAAC1P,MAAJ,GACZsQ,kBAAkB,CAACyJ,QAAQ,CAACva,GAAV,CADN,GAEZ8Q,kBAAkB,CAACyJ,QAAQ,CAACE,MAAV,CAFN,GAGZ3J,kBAAkB,CAACyJ,QAAQ,CAACK,SAAV,CAHN,GAIZ9J,kBAAkB,CAACyJ,QAAQ,CAACM,YAAV,CATtB;IAWA,QAAI/M,YAAY,GAAG,CAAC,KAAK1T,OAAL,CAAa0T,YAAb,GAA4B,CAA5B,GAAgC,KAAK1T,OAAL,CAAa0T,YAA7C,GAA4D,CAA7D,IAAkE,CAArF;IAAA;IAEEhB,IAAAA,KAAK,GAAGxM,IAAI,CAACwa,GAAL,CACNV,QAAQ,IAAI3M,UAAU,GAAGK,YAAjB,CADF,EAENuM,SAAS,IAAI3M,WAAW,GAAGI,YAAlB,CAFH,EAGN,CAHM,CAFV;IAQA,QAAIkH,QAAQ,GAAG1U,IAAI,CAACkW,GAAL,CAAS/I,UAAU,GAAGX,KAAtB,EAA6B,KAAK1S,OAAL,CAAaqT,UAA1C,CAAf;IAAA,QACEwH,SAAS,GAAG3U,IAAI,CAACkW,GAAL,CAAS9I,WAAW,GAAGZ,KAAvB,EAA8B,KAAK1S,OAAL,CAAasT,WAA3C,CADd;IAGAsH,IAAAA,QAAQ,GAAG,KAAK5a,OAAL,CAAawT,cAAb,GACP,KAAKxT,OAAL,CAAaqT,UADN,GAEPnN,IAAI,CAACC,KAAL,CAAWyU,QAAX,CAFJ;IAGAC,IAAAA,SAAS,GAAG,KAAK7a,OAAL,CAAawT,cAAb,GACR,KAAKxT,OAAL,CAAasT,WADL,GAERpN,IAAI,CAACC,KAAL,CAAW0U,SAAX,CAFJ;IAIA,QAAI8F,WAAW,GAAG;IAChB1a,MAAAA,KAAK,EAAE2U,QAAQ,GAAG,IADF;IAEhBxU,MAAAA,MAAM,EAAEyU,SAAS,GAAG,IAFJ;IAGhBhV,MAAAA,IAAI,EAAE,CAACma,QAAQ,GAAGpF,QAAZ,IAAwB,CAAxB,GAA4BjU,UAA5B,GAAyC,IAH/B;IAIhBf,MAAAA,GAAG,EAAE,CAACqa,SAAS,GAAGpF,SAAb,IAA0B,CAA1B,GAA8BtU,SAA9B,GAA0C;IAJ/B,KAAlB,CAjDgB;;IAyDhB,QAAI,KAAKvG,OAAL,CAAa4U,aAAjB,EAAgC;IAC9B,WAAKoJ,YAAL,CAAkB5M,OAAlB,CAA0BuP,WAA1B,EAAuC,YAAM;IAC3C,QAAA,KAAI,CAACC,YAAL,CAAkB9K,GAAlB;IACD,OAFD,EAEG,GAFH,EAEQ,aAFR;IAGD,KAJD,MAIO;IACL,WAAKkI,YAAL,CAAkB5Z,GAAlB,CAAsBuc,WAAtB;IACA,WAAKC,YAAL,CAAkB9K,GAAlB;IACD;;IAED,SAAK2H,QAAL,GAAgB,IAAhB;IAED;;aAEDV,uBAAA,8BAAqBxC,UAArB,EAAiCC,WAAjC,EAA8C;IAE5C,QAAI9H,KAAK,GAAG,CAAZ;;IAEA,QAAI,CAAC,KAAK8E,SAAV,EAAqB;IACnB9E,MAAAA,KAAK,GAAGxM,IAAI,CAACwa,GAAL,CAASnG,UAAU,GAAG,KAAKzE,GAAL,CAAS7P,KAA/B,EAAsCuU,WAAW,GAAG,KAAK1E,GAAL,CAAS1P,MAA7D,EAAqE,CAArE,CAAR;IACD,KAFD,MAEO;IACLsM,MAAAA,KAAK,GAAGxM,IAAI,CAACwa,GAAL,CAASnG,UAAU,GAAG,KAAKzE,GAAL,CAAS1P,MAA/B,EAAuCoU,WAAW,GAAG,KAAK1E,GAAL,CAAS7P,KAA9D,EAAqE,CAArE,CAAR;IACD;;IAED,WAAOyM,KAAP;IACD;;aAEDkO,eAAA,sBAAa9K,GAAb,EAAkB;IAEhB,QAAIwB,SAAS,GAAG;IACdI,MAAAA,CAAC,EAAE,KAAKuG,MAAL,CAAYhY,KAAZ,EADW;IAEd0R,MAAAA,CAAC,EAAE,KAAKsG,MAAL,CAAY7X,MAAZ;IAFW,KAAhB;IAKA,QAAIsM,KAAK,GAAG,KAAKqK,oBAAL,CACVzF,SAAS,CAACI,CADA,EAEVJ,SAAS,CAACK,CAFA,CAAZ;IAKA,SAAKuG,MAAL,CAAY9Z,GAAZ,CAAgB;IACd6B,MAAAA,KAAK,EAAEC,IAAI,CAAC2a,IAAL,CAAU/K,GAAG,CAAC7P,KAAJ,GAAYyM,KAAtB,IAA+B,IADxB;IAEdtM,MAAAA,MAAM,EAAEF,IAAI,CAAC2a,IAAL,CAAU/K,GAAG,CAAC1P,MAAJ,GAAasM,KAAvB,IAAgC,IAF1B;IAGd7M,MAAAA,IAAI,EAAE,CAACyR,SAAS,CAACI,CAAV,GAAcxR,IAAI,CAAC2a,IAAL,CAAU/K,GAAG,CAAC7P,KAAJ,GAAYyM,KAAtB,CAAf,IAA+C,CAA/C,GAAmD,IAH3C;IAId9M,MAAAA,GAAG,EAAE,CAAC0R,SAAS,CAACK,CAAV,GAAczR,IAAI,CAAC2a,IAAL,CAAU/K,GAAG,CAAC1P,MAAJ,GAAasM,KAAvB,CAAf,IAAgD,CAAhD,GAAoD;IAJ3C,KAAhB,EAZgB;;IAoBhBK,IAAAA,CAAC,CAAChT,MAAF,CAAS,KAAKsX,SAAd,EAAyB;IACvB2F,MAAAA,SAAS,EAAElH,GAAG,CAAC7P,KAAJ,GAAYyM,KADA;IAEvBuK,MAAAA,UAAU,EAAEnH,GAAG,CAAC1P,MAAJ,GAAasM,KAFF;IAGvBwK,MAAAA,QAAQ,EAAE,CAAC5F,SAAS,CAACI,CAAV,GAAc5B,GAAG,CAAC7P,KAAJ,GAAYyM,KAA3B,IAAoC,CAHvB;IAIvByK,MAAAA,OAAO,EAAE,CAAC7F,SAAS,CAACK,CAAV,GAAc7B,GAAG,CAAC1P,MAAJ,GAAasM,KAA5B,IAAqC,CAJvB;IAKvBzM,MAAAA,KAAK,EAAE6P,GAAG,CAAC7P,KAAJ,GAAYyM,KALI;IAMvBtM,MAAAA,MAAM,EAAE0P,GAAG,CAAC1P,MAAJ,GAAasM,KANE;IAOvB7M,MAAAA,IAAI,EAAE,CAACyR,SAAS,CAACI,CAAV,GAAc5B,GAAG,CAAC7P,KAAJ,GAAYyM,KAA3B,IAAoC,CAPnB;IAQvB9M,MAAAA,GAAG,EAAE,CAAC0R,SAAS,CAACK,CAAV,GAAc7B,GAAG,CAAC1P,MAAJ,GAAasM,KAA5B,IAAqC;IARnB,KAAzB,EApBgB;;IAgChB0E,IAAAA,aAAa,CACX;IACEM,MAAAA,CAAC,EAAE,KAAKwG,MAAL,CAAYjY,KAAZ,EADL;IAEE0R,MAAAA,CAAC,EAAE,KAAKuG,MAAL,CAAY9X,MAAZ;IAFL,KADW,EAKX;IACEsR,MAAAA,CAAC,EAAE,KAAKuG,MAAL,CAAYhY,KAAZ,EADL;IAEE0R,MAAAA,CAAC,EAAE,KAAKsG,MAAL,CAAY7X,MAAZ;IAFL,KALW,EASX,KAAK6X,MATM,EAUX,KAAKzG,SAVM,CAAb;IAaA,SAAKyG,MAAL,CAAY/Y,WAAZ,CAAwB,aAAxB;IACA,SAAKgZ,MAAL,CAAYhZ,WAAZ,CAAwB,aAAxB,EA9CgB;;IAiDhB,SAAK8Y,YAAL,CAAkBte,IAAlB,CAAuB+Y,QAAQ,GAAG,SAAlC,EAA6CrP,MAA7C,GAjDgB;;IAoDhB,QACE,KAAKpJ,OAAL,CAAa4U,aAAb,IACG,CAAC,KAAK5U,OAAL,CAAauV,kBADjB,IAEG,KAAK2I,MAAL,CAAY9Z,GAAZ,CAAgB,SAAhB,MAA+B,MAHpC,EAIE;IACA,WAAK8Z,MAAL,CAAYtL,MAAZ;IACD;IAEF;;aAEDmL,UAAA,iBAAQF,MAAR,EAAgB5kB,EAAhB,EAAoB6nB,GAApB,EAAyB;IAAA;;IAEvB,QAAIC,UAAU,qBAAkBvI,EAAlB,qBAAd,CAFuB;;IAKvB,SAAKwF,YAAL,CAAkBrW,MAAlB,CAAyBoZ,UAAzB,EALuB;;IAQvB,SAAK9C,MAAL,CAAYpZ,QAAZ,CAAqB,aAArB;IACA,SAAKqZ,MAAL,CAAYrZ,QAAZ,CAAqB,aAArB,EATuB;;IAYvB,SAAKqZ,MAAL,CAAYlX,UAAZ,CAAuB,OAAvB,EAAgC7E,IAAhC,CAAqC,KAArC,EAA4C,EAA5C;IACA,SAAKqV,SAAL,GAAiB,KAAjB;IACA,SAAKkG,WAAL,GAAmB,CAAnB;;IAEA,QAAI,KAAK1d,OAAL,CAAa4U,aAAb,IAA8B,CAAC,KAAK5U,OAAL,CAAauV,kBAAhD,EAAoE;IAClE,WAAK2I,MAAL,CAAY/Z,IAAZ;IACD;;IAED,SAAK+Z,MAAL,CAAY/b,IAAZ,CAAiB,KAAjB,EAAwB0b,MAAxB;IAEAlI,IAAAA,UAAU,CAACkI,MAAD,EAAS,UAAC/H,GAAD,EAAS;IAC1B;IACA,MAAA,MAAI,CAACA,GAAL,GAAWA,GAAX,CAF0B;;IAK1B,MAAA,MAAI,CAACuB,SAAL,GAAiB;IACf2J,QAAAA,aAAa,EAAElL,GAAG,CAAC7P,KADJ;IAEfgb,QAAAA,cAAc,EAAEnL,GAAG,CAAC1P;IAFL,OAAjB;;IAKA,UAAI,MAAI,CAACyT,WAAL,IAAqB,MAAI,CAAC4D,QAAL,IAAiB,MAAI,CAACzd,OAAL,CAAa6U,aAAvD,EAAuE;IACrE,QAAA,MAAI,CAAC+L,YAAL,CAAkB9K,GAAlB;IACD,OAFD,MAEO;IACL,QAAA,MAAI,CAACoK,YAAL,CAAkBpK,GAAlB;IACD,OAdyB;;;IAiB1B,UAAI7c,EAAJ,EAAQ;IACNA,QAAAA,EAAE,CAACiC,IAAH;IACD;IAEF,KArBS,EAqBP,YAAM;IACP;IACA,MAAA,MAAI,CAAC8iB,YAAL,CAAkBte,IAAlB,CAAuB+Y,QAAQ,GAAG,SAAlC,EAA6CrP,MAA7C,GAFO;;;IAKP,UAAI0X,GAAJ,EAAS;IACPA,QAAAA,GAAG,CAAC5lB,IAAJ;IACD;IACF,KA7BS,CAAV;;IA+BA,QAAI,KAAK8E,OAAL,CAAaoT,KAAjB,EAAwB;IACtB,WAAK8N,WAAL,CAAiBrD,MAAjB;IACD;IAEF;;aAEDqD,cAAA,qBAAY3K,GAAZ,EAAiB;IAEf,QAAInD,KAAK,GAAG,KAAKuK,SAAL,CAAe,KAAKC,UAApB,EAAgCxK,KAAhC,GACR,KAAKuK,SAAL,CAAe,KAAKC,UAApB,EAAgCxK,KADxB,GAERkD,mBAAmB,CAACC,GAAD,CAFvB;IAIA,SAAKyI,MAAL,CAAYjd,IAAZ,CAAiBqR,KAAjB;IAED;;aAED+N,OAAA,cAAKC,IAAL,EAAW;IAET,SAAKxB,YAAL,CAAkB,cAAlB,EAAkC,KAAKhC,UAAvC;;IAEA,SAAKA,UAAL,GAAkB,KAAKA,UAAL,GAAkBwD,IAApC;IAEA,SAAKC,MAAL,CAAY,KAAKzD,UAAjB;IAED;;aAEDyD,SAAA,gBAAOrd,KAAP,EAAc;IAAA;;IAEZA,IAAAA,KAAK,GAAGA,KAAK,GAAG,KAAK2Z,SAAL,CAAe3hB,MAA/B;;IAEA,QAAIgI,KAAK,IAAI,CAAb,EAAgB;IACdA,MAAAA,KAAK,GAAGA,KAAK,GAAG,KAAK2Z,SAAL,CAAe3hB,MAA/B;IACD,KAFD,MAEO,IAAIgI,KAAK,GAAG,CAAZ,EAAe;IACpBA,MAAAA,KAAK,GAAG,CAAC,KAAK2Z,SAAL,CAAe3hB,MAAf,GAAwBgI,KAAzB,IAAkC,KAAK2Z,SAAL,CAAe3hB,MAAzD;IACD;;IAED,SAAK4hB,UAAL,GAAkB5Z,KAAlB;IAEA,SAAK+Z,OAAL,CAAa,KAAKJ,SAAL,CAAe3Z,KAAf,EAAsB/D,GAAnC,EAAwC,YAAM;IAC5C,MAAA,MAAI,CAAC2f,YAAL,CAAkB,SAAlB,EAA6B5b,KAA7B;IACD,KAFD,EAEG,YAAM;IACP,MAAA,MAAI,CAAC4b,YAAL,CAAkB,SAAlB,EAA6B5b,KAA7B;IACD,KAJD;IAMD;;aAEDsd,QAAA,eAAMjV,CAAN,EAAS;IAEPA,IAAAA,CAAC,CAACd,cAAF;IAEA,QAAIgW,KAAK,GAAG,CAAZ;;IAEA,QAAIlV,CAAC,CAACmV,MAAN,EAAc;IACZD,MAAAA,KAAK,GAAGlV,CAAC,CAACmV,MAAF,GAAW,CAAX,GAAe,CAAf,GAAmB,CAAC,CAA5B;IACD,KAFD,MAEO,IAAInV,CAAC,CAACoV,UAAN,EAAkB;IACvBF,MAAAA,KAAK,GAAG,CAAClV,CAAC,CAACoV,UAAH,GAAgB,GAAxB;IACD,KAFM,MAEA,IAAIpV,CAAC,CAACqV,MAAN,EAAc;IACnBH,MAAAA,KAAK,GAAGlV,CAAC,CAACqV,MAAF,GAAW,CAAX,GAAe,CAAf,GAAmB,CAAC,CAA5B;IACD,KAZM;;;IAeP,QAAIC,KAAK,GAAG,CAACJ,KAAD,GAAS,KAAKvhB,OAAL,CAAa2T,cAAlC,CAfO;;IAkBP,QAAIiO,OAAO,GAAG;IACZC,MAAAA,CAAC,EAAExV,CAAC,CAACmN,OAAF,GAAY,KAAKyE,MAAL,CAAY1Y,MAAZ,GAAqBM,IAAjC,GAAwCtM,QAAQ,CAACoI,eAAT,CAAyBgF,UADxD;IAEZmb,MAAAA,CAAC,EAAEzV,CAAC,CAACqN,OAAF,GAAY,KAAKuE,MAAL,CAAY1Y,MAAZ,GAAqBK,GAAjC,GAAuCrM,QAAQ,CAACoI,eAAT,CAAyB4E;IAFvD,KAAd;IAKA,SAAKwb,IAAL,CAAUJ,KAAV,EAAiBC,OAAjB,EAA0BvV,CAA1B;IAED;;aAED0V,OAAA,cAAKJ,KAAL,EAAYK,MAAZ,EAAoB3V,CAApB,EAAuB;IAErB;IACAsV,IAAAA,KAAK,GAAGA,KAAK,GAAG,CAAR,GAAa,KAAK,IAAIA,KAAT,CAAb,GAAiC,IAAIA,KAA7C,CAHqB;;IAMrBA,IAAAA,KAAK,GAAG,KAAKzD,MAAL,CAAYjY,KAAZ,KAAsB,KAAKoR,SAAL,CAAe2J,aAArC,GAAqDW,KAA7D,CANqB;IASrB;IACA;IACA;;IAEA,QAAIA,KAAK,GAAG,KAAK3hB,OAAL,CAAa6T,QAArB,IAAiC8N,KAAK,GAAG,KAAK3hB,OAAL,CAAa4T,QAA1D,EAAoE;IAClE;IACD;;IAED,SAAKqO,MAAL,CAAYN,KAAZ,EAAmBK,MAAnB,EAA2B3V,CAA3B;IAED;;aAED4V,SAAA,gBAAON,KAAP,EAAcK,MAAd,EAAsB3V,CAAtB,EAAyB;IAEvB,QAAI6R,MAAM,GAAG,KAAKA,MAAlB;IAAA,QACED,MAAM,GAAG,KAAKA,MADhB;IAAA,QAEEiE,OAAO,GAAG;IACRxK,MAAAA,CAAC,EAAE,KAAKL,SAAL,CAAepR,KADV;IAER0R,MAAAA,CAAC,EAAE,KAAKN,SAAL,CAAejR,MAFV;IAGRyb,MAAAA,CAAC,EAAE,KAAKxK,SAAL,CAAexR,IAHV;IAIRic,MAAAA,CAAC,EAAE,KAAKzK,SAAL,CAAezR;IAJV,KAFZ,CAFuB;IAYvB;;IACA,QAAI0R,SAAS,GAAG;IACdI,MAAAA,CAAC,EAAEuG,MAAM,CAAChY,KAAP,EADW;IAEd0R,MAAAA,CAAC,EAAEsG,MAAM,CAAC7X,MAAP,EAFW;IAGdyb,MAAAA,CAAC,EAAE5D,MAAM,CAAC1Y,MAAP,GAAgBM,IAHL;IAIdic,MAAAA,CAAC,EAAE7D,MAAM,CAAC1Y,MAAP,GAAgBK;IAJL,KAAhB;IAOA,QAAIuc,QAAQ,GAAG,KAAK9K,SAAL,CAAe2J,aAAf,GAA+BW,KAA9C;IAAA,QACES,SAAS,GAAG,KAAK/K,SAAL,CAAe4J,cAAf,GAAgCU,KAD9C;IAAA;IAGElH,IAAAA,OAAO,GAAGuH,MAAM,CAACH,CAAP,GAAW,CAACG,MAAM,CAACH,CAAP,GAAWK,OAAO,CAACL,CAApB,IAAyBK,OAAO,CAACxK,CAAjC,GAAqCyK,QAH5D;IAAA,QAIEzH,MAAM,GAAGsH,MAAM,CAACF,CAAP,GAAW,CAACE,MAAM,CAACF,CAAP,GAAWI,OAAO,CAACJ,CAApB,IAAyBI,OAAO,CAACvK,CAAjC,GAAqCyK,SAJ3D,CApBuB;;IA2BvB,QAAI9H,CAAC,GAAG,CAAC,KAAK9C,SAAN,GAAkB,CAAlB,GAAsB,CAAC2K,QAAQ,GAAGC,SAAZ,IAAyB,CAAvD;IAAA,QACEC,WAAW,GAAG,CAAC,KAAK7K,SAAN,GAAkB2K,QAAlB,GAA6BC,SAD7C;IAAA,QAEEE,YAAY,GAAG,CAAC,KAAK9K,SAAN,GAAkB4K,SAAlB,GAA8BD,QAF/C;IAIA,QAAIpG,OAAO,GAAGzE,SAAS,CAACI,CAAV,GAAcyK,QAA5B;IAAA,QACEnG,OAAO,GAAG1E,SAAS,CAACK,CAAV,GAAcyK,SAD1B,CA/BuB;IAmCvB;IACA;;IACA,QAAIE,YAAY,IAAIhL,SAAS,CAACK,CAA9B,EAAiC;IAC/B+C,MAAAA,MAAM,GAAG,CAACpD,SAAS,CAACK,CAAV,GAAcyK,SAAf,IAA4B,CAArC;IACD,KAFD,MAEO;IACL1H,MAAAA,MAAM,GAAGA,MAAM,GAAGJ,CAAT,GACLA,CADK,GAEJI,MAAM,GAAIsB,OAAO,GAAG1B,CAApB,GACCI,MADD,GAEEsB,OAAO,GAAG1B,CAJjB;IAKD;;IAED,QAAI+H,WAAW,IAAI/K,SAAS,CAACI,CAA7B,EAAgC;IAC9B+C,MAAAA,OAAO,GAAG,CAACnD,SAAS,CAACI,CAAV,GAAcyK,QAAf,IAA2B,CAArC;IACD,KAFD,MAEO;IACL1H,MAAAA,OAAO,GAAGA,OAAO,GAAG,CAACH,CAAX,GACN,CAACA,CADK,GAELG,OAAO,GAAIsB,OAAO,GAAGzB,CAArB,GACCG,OADD,GAEEsB,OAAO,GAAGzB,CAJjB;IAKD,KAvDsB;;;IA0DvB,QAAIpU,IAAI,CAACqc,GAAL,CAAS,KAAKlL,SAAL,CAAe2F,SAAf,GAA2BmF,QAApC,IAAgD,KAAK9K,SAAL,CAAe2F,SAAf,GAA2B,IAA/E,EAAqF;IACnF,WAAK4D,YAAL,CAAkB,KAAK9K,GAAvB;IACD,KAFD,MAEO;IACLoI,MAAAA,MAAM,CAAC9Z,GAAP,CAAW;IACT6B,QAAAA,KAAK,EAAEC,IAAI,CAACC,KAAL,CAAWgc,QAAX,IAAuB,IADrB;IAET/b,QAAAA,MAAM,EAAEF,IAAI,CAACC,KAAL,CAAWic,SAAX,IAAwB,IAFvB;IAGTvc,QAAAA,IAAI,EAAEK,IAAI,CAACC,KAAL,CAAWsU,OAAX,IAAsB,IAHnB;IAIT7U,QAAAA,GAAG,EAAEM,IAAI,CAACC,KAAL,CAAWuU,MAAX,IAAqB;IAJjB,OAAX,EADK;;IASLtD,MAAAA,aAAa,CACX;IACEM,QAAAA,CAAC,EAAExR,IAAI,CAACC,KAAL,CAAWkc,WAAX,CADL;IAEE1K,QAAAA,CAAC,EAAEzR,IAAI,CAACC,KAAL,CAAWmc,YAAX;IAFL,OADW,EAKX;IACE5K,QAAAA,CAAC,EAAEJ,SAAS,CAACI,CADf;IAEEC,QAAAA,CAAC,EAAEL,SAAS,CAACK;IAFf,OALW,EASX,KAAKsG,MATM,CAAb;IAWD,KAhFsB;;;IAoFvBlL,IAAAA,CAAC,CAAChT,MAAF,CAAS,KAAKsX,SAAd,EAAyB;IACvBpR,MAAAA,KAAK,EAAEkc,QADgB;IAEvB/b,MAAAA,MAAM,EAAEgc,SAFe;IAGvBvc,MAAAA,IAAI,EAAE4U,OAHiB;IAIvB7U,MAAAA,GAAG,EAAE8U;IAJkB,KAAzB;IAOD;;aAED8H,SAAA,gBAAOC,KAAP,EAAc;IAEZ,SAAK/E,WAAL,GAAmB,KAAKA,WAAL,GAAmB+E,KAAtC;;IAEA,QAAK,KAAK/E,WAAL,GAAmB,EAApB,GAA0B,CAA1B,KAAgC,CAApC,EAAuC;IACrC,WAAKlG,SAAL,GAAiB,KAAjB;IACD,KAFD,MAEO;IACL,WAAKA,SAAL,GAAiB,IAAjB;IACD;;IAED,SAAKkL,QAAL,CAAc,KAAKhF,WAAnB;IAED;;aAEDgF,WAAA,kBAASD,KAAT,EAAgB;IAEd,SAAKvE,MAAL,CAAY9Z,GAAZ,CAAgB;IACd4L,MAAAA,SAAS,EAAE,YAAYyS,KAAZ,GAAoB;IADjB,KAAhB;IAIA,SAAK7B,YAAL,CAAkB;IAChB3a,MAAAA,KAAK,EAAE,KAAKoR,SAAL,CAAe2J,aADN;IAEhB5a,MAAAA,MAAM,EAAE,KAAKiR,SAAL,CAAe4J;IAFP,KAAlB,EANc;;IAYd,SAAKhD,MAAL,CAAY/Y,WAAZ,CAAwB,SAAxB;IAED;;aAEDyd,SAAA,kBAAS;IAAA;;IAEP,QAAIC,aAAa,GAAGpN,QAAQ,CAAC,YAAM;IAEjC,UAAI,MAAI,CAACiI,QAAT,EAAmB;IACjB,YAAI,MAAI,CAAC5D,WAAT,EAAsB;IACpB,UAAA,MAAI,CAAC+G,YAAL,CAAkB;IAChB3a,YAAAA,KAAK,EAAE,MAAI,CAACoR,SAAL,CAAe2J,aADN;IAEhB5a,YAAAA,MAAM,EAAE,MAAI,CAACiR,SAAL,CAAe4J;IAFP,WAAlB;IAID,SALD,MAKO;IACL,UAAA,MAAI,CAACf,YAAL,CAAkB;IAChBja,YAAAA,KAAK,EAAE,MAAI,CAACoR,SAAL,CAAe2J,aADN;IAEhB5a,YAAAA,MAAM,EAAE,MAAI,CAACiR,SAAL,CAAe4J;IAFP,WAAlB;IAID;IACF;IAEF,KAhB2B,EAgBzB,GAhByB,CAA5B;IAkBA,WAAO2B,aAAP;IAED;;aAED1O,WAAA,oBAAW;IAET,QAAI,CAAC,KAAK2F,WAAV,EAAuB;IACrB;IACA,WAAK0B,SAAL,GAAiB;IACftV,QAAAA,KAAK,EAAE,KAAK+X,YAAL,CAAkB/X,KAAlB,EADQ;IAEfG,QAAAA,MAAM,EAAE,KAAK4X,YAAL,CAAkB5X,MAAlB,EAFO;IAGfP,QAAAA,IAAI,EAAE,KAAKmY,YAAL,CAAkBzY,MAAlB,GAA2BM,IAHlB;IAIfD,QAAAA,GAAG,EAAE,KAAKoY,YAAL,CAAkBzY,MAAlB,GAA2BK;IAJjB,OAAjB;IAOA,WAAKoY,YAAL,CAAkBnZ,QAAlB,CAA2B2T,EAAE,GAAG,WAAhC;IAEA,WAAKwF,YAAL,CAAkB5Z,GAAlB,CAAsB;IACpB6B,QAAAA,KAAK,EAAE,MADa;IAEpBG,QAAAA,MAAM,EAAE,MAFY;IAGpBP,QAAAA,IAAI,EAAE,CAHc;IAIpBD,QAAAA,GAAG,EAAE;IAJe,OAAtB;IAOA,WAAKiU,WAAL,GAAmB,IAAnB;IAED,KApBD,MAoBO;IAEL,WAAKmE,YAAL,CAAkB9Y,WAAlB,CAA8BsT,EAAE,GAAG,WAAnC;IAEA,WAAKwF,YAAL,CAAkB5Z,GAAlB,CAAsB;IACpB6B,QAAAA,KAAK,EAAE,KAAKsV,SAAL,CAAetV,KAAf,GACH,KAAKsV,SAAL,CAAetV,KADZ,GAEH,KAAKjG,OAAL,CAAaqT,UAHG;IAIpBjN,QAAAA,MAAM,EAAE,KAAKmV,SAAL,CAAenV,MAAf,GACJ,KAAKmV,SAAL,CAAenV,MADX,GAEJ,KAAKpG,OAAL,CAAasT,WANG;IAOpBzN,QAAAA,IAAI,EAAE,KAAK0V,SAAL,CAAe1V,IAAf,GACF,KAAK0V,SAAL,CAAe1V,IADb,GAEF,CAACkS,EAAE,CAAC9R,KAAH,KAAa,KAAKjG,OAAL,CAAaqT,UAA3B,IAAyC,CAAzC,GAA6C9Z,QAAQ,CAACoI,eAAT,CAAyBgF,UATtD;IAUpBf,QAAAA,GAAG,EAAE,KAAK2V,SAAL,CAAe3V,GAAf,GACD,KAAK2V,SAAL,CAAe3V,GADd,GAED,CAACmS,EAAE,CAAC3R,MAAH,KAAc,KAAKpG,OAAL,CAAasT,WAA5B,IAA2C,CAA3C,GAA+C/Z,QAAQ,CAACoI,eAAT,CAAyB4E;IAZxD,OAAtB;IAeA,WAAKsT,WAAL,GAAmB,KAAnB;IACD;;IAED,SAAK+G,YAAL,CAAkB;IAChB3a,MAAAA,KAAK,EAAE,KAAKoR,SAAL,CAAe2J,aADN;IAEhB5a,MAAAA,MAAM,EAAE,KAAKiR,SAAL,CAAe4J;IAFP,KAAlB;IAKD;;aAED3M,aAAA,sBAAa;IAEX4B,IAAAA,iBAAiB,CAAC,KAAK8H,YAAL,CAAkB,CAAlB,CAAD,CAAjB;IAED;;aAED6E,UAAA,iBAAQxW,CAAR,EAAW;IAET,QAAI,CAAC,KAAKrM,OAAL,CAAamT,QAAlB,EAA4B;IAC1B,aAAO,KAAP;IACD;;IAED,QAAI2P,OAAO,GAAGzW,CAAC,CAACyW,OAAF,IAAazW,CAAC,CAAC0W,KAAf,IAAwB1W,CAAC,CAAC2W,QAAxC;IAAA,QACEC,OAAO,GAAG5W,CAAC,CAAC4W,OAAF,IAAa5W,CAAC,CAAC6W,OAD3B;IAAA,QAEEC,MAAM,GAAG9W,CAAC,CAAC8W,MAAF,IAAY9W,CAAC,CAAC6W,OAFzB;;IAIA,YAAQJ,OAAR;IACE;IACA,WAAK,EAAL;IACE,aAAK3B,IAAL,CAAU,CAAC,CAAX;IACA;IACF;;IACA,WAAK,EAAL;IACE,aAAKA,IAAL,CAAU,CAAV;IACA;IACF;;IACA,WAAK,GAAL;IACE,aAAKY,IAAL,CACE,KAAK/hB,OAAL,CAAa2T,cAAb,GAA8B,CADhC,EAEE;IAAEkO,UAAAA,CAAC,EAAE,KAAK5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,UAAAA,CAAC,EAAE,KAAK7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,SAFF,EAGEiG,CAHF;IAKA;IACF;;IACA,WAAK,GAAL;IACE,aAAK0V,IAAL,CACE,CAAC,KAAK/hB,OAAL,CAAa2T,cAAd,GAA+B,CADjC,EAEE;IAAEkO,UAAAA,CAAC,EAAE,KAAK5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,UAAAA,CAAC,EAAE,KAAK7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,SAFF,EAGEiG,CAHF;IAKA;IACF;;IACA,WAAK,EAAL;IACE,aAAK0V,IAAL,CACE,KAAK/hB,OAAL,CAAa2T,cAAb,GAA8B,CADhC,EAEE;IAAEkO,UAAAA,CAAC,EAAE,KAAK5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,UAAAA,CAAC,EAAE,KAAK7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,SAFF,EAGEiG,CAHF;IAKA;IACF;;IACA,WAAK,GAAL;IACE,aAAK0V,IAAL,CACE,CAAC,KAAK/hB,OAAL,CAAa2T,cAAd,GAA+B,CADjC,EAEE;IAAEkO,UAAAA,CAAC,EAAE,KAAK5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,UAAAA,CAAC,EAAE,KAAK7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,SAFF,EAGEiG,CAHF;IAKA;IACF;;IACA,WAAK,EAAL;IACE,YAAI4W,OAAO,IAAIE,MAAf,EAAuB;IACrB,eAAKlB,MAAL,CACE,CADF,EAEE;IAAEJ,YAAAA,CAAC,EAAE,KAAK5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,YAAAA,CAAC,EAAE,KAAK7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,WAFF,EAGEiG,CAHF;IAKD;;IACD;IACF;;IACA,WAAK,GAAL;IACE,YAAI4W,OAAJ,EAAa;IACX,eAAKT,MAAL,CAAY,CAAC,EAAb;IACD;;IACD;IACF;;IACA,WAAK,GAAL;IACE,YAAIS,OAAJ,EAAa;IACX,eAAKT,MAAL,CAAY,EAAZ;IACD;;IACD;;IACF;IA/DF;IAkED;;aAED3C,YAAA,qBAAY;IAAA;;IAEV,SAAKZ,MAAL,CAAY7P,GAAZ,CAAgB6I,WAAW,GAAGS,QAA9B,EAAwC3J,EAAxC,CAA2CkJ,WAAW,GAAGS,QAAzD,EAAmE,UAACrM,CAAD,EAAO;IACxE,MAAA,MAAI,CAAC8H,KAAL;IACD,KAFD;IAIA,SAAK8J,MAAL,CAAY7O,GAAZ,CAAgBgJ,WAAW,GAAGM,QAA9B,EAAwC3J,EAAxC,CAA2CqJ,WAAW,GAAGM,QAAzD,EAAmE,UAACrM,CAAD,EAAO;IACxE,MAAA,MAAI,CAACiV,KAAL,CAAWjV,CAAX;IACD,KAFD;IAIA,SAAK+S,OAAL,CAAahQ,GAAb,CAAiB6I,WAAW,GAAGS,QAA/B,EAAyC3J,EAAzC,CAA4CkJ,WAAW,GAAGS,QAA1D,EAAoE,UAACrM,CAAD,EAAO;IACzE,MAAA,MAAI,CAAC0V,IAAL,CACE,MAAI,CAAC/hB,OAAL,CAAa2T,cAAb,GAA8B,CADhC,EAEE;IAAEkO,QAAAA,CAAC,EAAE,MAAI,CAAC5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,QAAAA,CAAC,EAAE,MAAI,CAAC7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,OAFF,EAGEiG,CAHF;IAKD,KAND;IAQA,SAAKgT,QAAL,CAAcjQ,GAAd,CAAkB6I,WAAW,GAAGS,QAAhC,EAA0C3J,EAA1C,CAA6CkJ,WAAW,GAAGS,QAA3D,EAAqE,UAACrM,CAAD,EAAO;IAC1E,MAAA,MAAI,CAAC0V,IAAL,CACE,CAAC,MAAI,CAAC/hB,OAAL,CAAa2T,cAAd,GAA+B,CADjC,EAEE;IAAEkO,QAAAA,CAAC,EAAE,MAAI,CAAC5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,QAAAA,CAAC,EAAE,MAAI,CAAC7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,OAFF,EAGEiG,CAHF;IAKD,KAND;IAQA,SAAKiT,WAAL,CAAiBlQ,GAAjB,CAAqB6I,WAAW,GAAGS,QAAnC,EAA6C3J,EAA7C,CAAgDkJ,WAAW,GAAGS,QAA9D,EAAwE,UAACrM,CAAD,EAAO;IAC7E,MAAA,MAAI,CAAC4V,MAAL,CACE,CADF,EAEE;IAAEJ,QAAAA,CAAC,EAAE,MAAI,CAAC5D,MAAL,CAAYhY,KAAZ,KAAsB,CAA3B;IAA8B6b,QAAAA,CAAC,EAAE,MAAI,CAAC7D,MAAL,CAAY7X,MAAZ,KAAuB;IAAxD,OAFF,EAGEiG,CAHF;IAKD,KAND;IAQA,SAAKqT,KAAL,CAAWtQ,GAAX,CAAe6I,WAAW,GAAGS,QAA7B,EAAuC3J,EAAvC,CAA0CkJ,WAAW,GAAGS,QAAxD,EAAkE,YAAM;IACtE,MAAA,MAAI,CAACyI,IAAL,CAAU,CAAC,CAAX;IACD,KAFD;IAIA,SAAK5B,WAAL,CAAiBnQ,GAAjB,CAAqB6I,WAAW,GAAGS,QAAnC,EAA6C3J,EAA7C,CAAgDkJ,WAAW,GAAGS,QAA9D,EAAwE,YAAM;IAC5E,MAAA,MAAI,CAACpE,UAAL;IACD,KAFD;IAIA,SAAKqL,KAAL,CAAWvQ,GAAX,CAAe6I,WAAW,GAAGS,QAA7B,EAAuC3J,EAAvC,CAA0CkJ,WAAW,GAAGS,QAAxD,EAAkE,YAAM;IACtE,MAAA,MAAI,CAACyI,IAAL,CAAU,CAAV;IACD,KAFD;IAIA,SAAK3B,WAAL,CAAiBpQ,GAAjB,CAAqB6I,WAAW,GAAGS,QAAnC,EAA6C3J,EAA7C,CAAgDkJ,WAAW,GAAGS,QAA9D,EAAwE,YAAM;IAC5E,MAAA,MAAI,CAAC8J,MAAL,CAAY,CAAC,EAAb;IACD,KAFD;IAIA,SAAK/C,YAAL,CAAkBrQ,GAAlB,CAAsB6I,WAAW,GAAGS,QAApC,EAA8C3J,EAA9C,CAAiDkJ,WAAW,GAAGS,QAA/D,EAAyE,YAAM;IAC7E,MAAA,MAAI,CAAC8J,MAAL,CAAY,EAAZ;IACD,KAFD;IAIA,SAAKtD,SAAL,CAAe9P,GAAf,CAAmB6I,WAAW,GAAGS,QAAjC,EAA2C3J,EAA3C,CAA8CkJ,WAAW,GAAGS,QAA5D,EAAsE,YAAM;IAC1E,MAAA,MAAI,CAACxE,QAAL;IACD,KAFD;IAIA8D,IAAAA,EAAE,CAAC5I,GAAH,CAAO+I,aAAa,GAAGO,QAAvB,EAAiC3J,EAAjC,CAAoCoJ,aAAa,GAAGO,QAApD,EAA8D,UAACrM,CAAD,EAAO;IACnE,MAAA,MAAI,CAACwW,OAAL,CAAaxW,CAAb;IACD,KAFD;IAIA0L,IAAAA,EAAE,CAAChJ,EAAH,CAAMmJ,YAAY,GAAGQ,QAArB,EAA+B,KAAKiK,MAAL,EAA/B;IAED;;aAED/C,eAAA,sBAAavT,CAAb,EAAgBQ,IAAhB,EAAsB;IACpB,QAAI,KAAK7M,OAAL,CAAagV,SAAb,CAAuB3I,CAAvB,CAAJ,EAA+B;IAC7B,WAAKrM,OAAL,CAAagV,SAAb,CAAuB3I,CAAvB,EAA0B/P,KAA1B,CAAgC,IAAhC,EAAsCyW,CAAC,CAAClY,OAAF,CAAUgS,IAAV,IAAkBA,IAAlB,GAAyB,CAACA,IAAD,CAA/D;IACD;IACF;;;;IAIH;;;;;IAGAkG,CAAC,CAAChT,MAAF,CAASsd,WAAW,CAACpiB,SAArB,EAAgC+X,SAAhC,EAA2CE,OAA3C,EAAoDD,SAApD;IAEA;;;;IAGAzZ,MAAM,CAAC6jB,WAAP,GAAqBA,WAArB;;;;;;;;"}